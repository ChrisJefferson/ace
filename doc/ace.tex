%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%W  ace.tex                ACE documentation             Alexander Hulpke
%W                                                      Joachim Neub"user
%W                                                            Greg Gamble
%%
%H  $Id$
%%
%Y  Copyright (C) 2000, School of Math & Comp. Sci., St Andrews, Scotland
%%

\def\ACE{{\sf ACE}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{The ACE Share Package}

The  \lq Advanced Coset Enumerator' {\ACE}:

\begintt
ACE coset enumerator (C) 1995-1999 by George Havas and Colin Ramsay
    http://www.csee.uq.edu.au/~havas/ace3.tar.gz
\endtt

can  be called  from within  {\GAP} through  an interface,  written by
Alexander Hulpke and Greg Gamble, which is described in this manual.

The interface links to an external binary and therefore is only usable
under UNIX (see Section~"Installing the ACE share package" for how  to
install {\ACE}).  It will not work  on  Windows  or the Macintosh.  It
requires {\GAP}~4.

{\ACE} can be used through this interface in different ways:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Using ACE as a Default for Coset Enumerations and some General
Warnings}

After loading  {\ACE}   (see Section~"Loading the ACE share package"),
if you  want to use the {\ACE}  coset enumerator as a  default for all
coset  enumerations  done  by   {\GAP}  (which  may  also  get  called
indirectly),  you can  achieve  this by  setting  the global  variable
`TCENUM' to `ACETCENUM'.

\begintt
gap> TCENUM:=ACETCENUM;;
\endtt

This    sets    the    function    `CosetTableFromGensAndRels'    (see
Section~"ref:Coset  Tables  and   Coset  Enumeration"  in  the  {\GAP}
Reference  Manual)   to  be  the  function   `CallACE'  (described  in
Section~"CallACE"),  which then  can be  called with  all  the options
defined  for the  {\ACE} interface,  not  just the  options `max'  and
`silent'.  If  `TCENUM' is  set  to  `ACETCENUM'  without any  further
action, the `default'  strategy of the {\ACE} enumerator  will be used
(see  Chapter~"Predefined  Strategies").    An  {\ACE}  strategy  (see
Chapter~"Predefined Strategies") is merely  a special option of {\ACE}
that sets  a number of  the options described in  Chapter~"Options for
the ACE  Enumerator" all at once.  One can set  options globally using
the  function `PushOptions'  (see Chapter~"ref:Options  Stack"  in the
{\GAP} Reference Manual); options pushed onto `OptionsStack' this way,
remain there until an  explicit `PopOptions()' call is made.  However,
the usual way to pass options is behind a colon following a function's
arguments    (as   described   for    the   function    `CallACE'   in
Section~"CallACE", for  example); options  passed this way  are local,
and  disappear from  `OptionsStack'  after the  function has  executed
successfully.  Beware, however the function will see any other options
on   the  `OptionsStack'   (in  particular,   any  pushed   there  via
`PushOptions', prior  to the function call), unless  over-ridden by an
option passed via the function.   Also note that duplication of option
names for different programs  may lead to misinterpretations.  You can
use  `DisplayOptionsStack'  (see Chapter~"ref:DisplayOptionsStack"  in
the {\GAP} Reference  Manual) to ensure that there  is no such danger.
However, considering  how much of  a potential mine-field  a non-empty
`OptionsStack' might be for the unwary user, we provide

\>FlushOptionsStack()

which  simply  executes `PopOptions()' until `OptionsStack' is empty.

It is important to realize that {\ACE}'s options (even the non-strategy 
options) are not orthogonal, i.e.\ the order in which they are put to
{\ACE} can be important.  For this reason,  except for a  few options
that have no effect on the course of an  enumeration,  the  order  in
which  options  are passed to the {\ACE} interface is preserved  when 
those same options are passed to the {\ACE} binary.  Also  note  that
except for limitations imposed  by {\GAP}  e.g.\ clashes  with {\GAP}
keywords and blank spaces not allowed in keywords, the options of the
{\ACE} interface are the same as for the binary; so, for example, the
options can appear in upper or lower case (or indeed, mixed case) and
most may be abbreviated. Note that any options that the {\ACE} binary
doesn't  understand  are  simply  ignored  and  a  warning is sent to 
standard error (which should appear in your {\GAP} session).  If this
occurs,  the  input fed to  {\ACE} and the output from {\ACE} will be
files in a  temporary directory;  the full path  to  these  files  is
recorded in the record fields `ACEinfo.infile' and `ACEinfo.outfile',
respectively.

You can switch back  to the  coset enumerator  built into  the {\GAP}
library by assigning `TCENUM' to `GAPTCENUM'.

\begintt
gap> TCENUM:=GAPTCENUM;;
\endtt

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Calling ACE Directly}

If on  the other hand you  do not want  to set up {\ACE}  globally for
your coset  enumerations, you may call the  {\ACE} interface directly,
which will allow you to decide for yourself, for each such call, which
options you  want to use for running {\ACE}. (Please note the warnings
regarding options in the preceding section.)  By such a call,  a  file
with  your input  data in  {\ACE} readable  format will  be  handed to
{\ACE} and you will get the answer back in some {\GAP} format. At that
moment however the {\ACE} job  is terminated, that is, you cannot send
any  further questions or  requests about  the result  of that  job to
{\ACE}; you  are not using  {\ACE} interactively.  For  an interactive
use of {\ACE} from {\GAP} see Chapter~"Using ACE Interactively".

Calling the {\ACE} interface directly is done by

\>CallACE( <fgens>, <rels>, <sgens> :<options> )

Here <fgens> is  a list of free generators, <rels> a  list of words in
these generators  giving relators for a finitely  presented group, and
<sgens> the list  of subgroup generators, again expressed  as words in
the free generators. All these are given in the standard {\GAP} format
(See Chapter~"ref:Finitely  Presented Groups" of  the {\GAP} Reference
Manual).

Behind  the colon  any  selection  of the  options  available for  the
interface   (see    Chapters~"Options   for   the    ACE   Enumerator"
and~"Predefined Strategies")  can be  given, separated by  commas like
record components.  These  can be used e.g.~to preset  limits of space
and time  to be  used, to modify  input and  output and to  modify the
enumeration procedure. Note that strategies are simply special options
that set a number of the options, detailed in Chapter~"Options for the
ACE Enumerator", all at once.

Please  see Section~"Using ACE as a Default for Coset Enumerations and 
some General Warnings" for a discussion  regarding  global  and  local
passing of options, and the non-orthogonal nature of {\ACE}'s options.

The  function   calls the  {\ACE}  coset  enumerator  and returns  the
(standardized) coset table obtained.

If the coset enumeration does not finish in the preset limits it raises
an error, unless the  `silent' option (see Section~"parameter silent") 
is set, in which case it  returns  `fail'.  

The  example  given  below is  the  call  for  a presentation  of  the
Fibonacci  group F(2,7)  for  which  we shall  discuss  the impact  of
various options in Chapter~"Examples".

\begintt
gap> F:= FreeGroup( "a", "b", "c", "d", "e", "f", "g");;
gap> a:= F.1;; b:= F.2;; c:= F.3;; d:= F.4;; e:= F.5;; f:= F.6;; g:= F.7;;
gap> fgens:= [a, b, c, d, e, f, g,];;
gap> rels:= [
> a*b*c^-1,
> b*c*d^-1,
> c*d*e^-1,
> d*e*f^-1,
> e*f*g^-1,
> f*g*a^-1,
> g*a*b^-1];;
gap> CallACE(fgens, rels, [c]);;
\endtt

(The  variable  `ACETCENUM.CosetTableFromGensAndRels'  is assigned  to
`CallACE'.)

If you only want to  test, whether a coset enumeration terminates, and
don't want to  transfer the whole coset table  to {\GAP}. Instead, you
can call

\>ACEStats(<fgens>,<rels>,<sgens>:<options>)

which    calls    the   {\ACE}    binary    and    returns   a    list
`[<index>,<c>,<m>,<t>]'  where <index>  is the  index of  the subgroup
(and $0$, if the enumeration does not succeed), <c> gives you the time
used for the enumeration, <m> is the maximum number of \lq alive' coset
numbers at any time in the enumeration , while <t> is the total number
of  coset numbers  that  were  defined in  the  enumeration. See  also
Section~"Information about the Enumeration".   The same warnings noted
in     Section~"Using ACE as a Default for Coset Enumerations and some 
General Warnings", regarding options, apply.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Writing ACE Standalone Input Files}

If you want  to use ACE as  a standalone with its own  syntax, you can
write  a  {\GAP}   input  and  can  use  `CallACE'   with  the  option
`outfile:=<filename>' (see Section~"parameter  outfile").  This   will
keep the input file for the {\ACE}  standalone produced by the  {\GAP}
interface under the file name <filename> (and  just return `fail')  so
that you can perform  interactive work in the standalone.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Calling ACE Interactively}

Further features  of the {\ACE} standalone  can be used  from GAP only
through an interactive link.

%The  {\ACE} standalone  provides further  features, in  particular 
%
%\beginlist
%
%\item{--} the possibility for  interactive work. This is currently not
%available  from {\GAP} through  the interface,  since {\GAP}  does not
%provide  (yet) bidirectional  streams.  It is  hoped  that these  will
%become  available in  the future  and when  this will  be the  case an
%update  of  the  interface  should  also provide  the  possibility  of
%interactive use of {\ACE} from {\GAP}.
%
%\item{--} the possibility to work with incomplete tables and to try to
%get information out of these.  This is not (yet) available from {\GAP}
%since {\GAP} does not have data structures for such incomplete tables.
%
%\endlist


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Section{Acknowledgement}

Large parts of  this manual, in particular      the description of the
options for  running {\ACE}, are  directly copied from  the respective
description in  the manual~\cite{Ram99} for the  standalone version of
{\ACE} by Colin Ramsay.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Installing and Loading the ACE Share Package}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Installing the ACE share package}

To  install, unpack  the  archive file  in  a directory  in the  `pkg'
hierarchy  of your  version  of  {\GAP}~4. (This  might  be the  `pkg'
directory of the {\GAP}~4 home  directory; it is however also possible
to keep an additional `pkg' directory in your private directories, see
Section~"ref:Installing  Share Packages"  of  the {\GAP}~4   Reference
Manual for details  on how to do this.) Go to  the newly created `ACE'
directory and  call `./configure <path>'  where <path> is the  path to
the {\GAP} home  directory. So for example if  you install the package
in the main `pkg' directory call

\begintt
./configure ../..
\endtt

This  will fetch  the  architecture  type for  which  {\GAP} has  been
compiled last and create a `Makefile'. Now simply call

\begintt
make
\endtt

to compile the binary and to install it in the appropriate place.

Note that the  current version of the configuration  process only sets
up  directory paths.  If you  need a  different compiler  or different
compiler options, you need  to edit `src/Makefile.in' prior to calling
`make' yourself.

If you use this installation of {\GAP} on different hardware platforms
you will have to compile the binary for each platform separately. This
is  done  by calling  `configure'  and  `make'  for the  package  anew
immediately   after  compiling  {\GAP}   itself  for   the  respective
architecture.  If your version of  {\GAP} is already compiled (and has
last  been compiled  on  the same  architecture)  you do  not need  to
compile {\GAP} again, it is  sufficient to call the `configure' script
in the {\GAP} home directory.

The manual you are currently reading describes how to use the   {\ACE}
share package; it can be found in the `doc' subdirectory of the package.

The  subdirectory  `standalone-doc'  contains the  file  `ace3001.dvi'
which holds a version of the user manual for the {\ACE} standalone; it
forms part of~\cite{Ram99a}).  You should consult it if  you are going
to  switch to  the {\ACE}  standalone, e.g.~in  order to  directly use
interactive facilities.

The  `src' subdirectory  contains a  copy  of the  original source  of
{\ACE}.  (The  only modification  is  that  a  file `Makefile.in'  was
obtained from  the different `make.xyz' and  will be used  to create a
`Makefile'.)  You  can replace  the source by  a newer  version before
compiling.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Loading the ACE share package}

To use  the {\ACE} package you  have to request it  explicitly. This is
done by calling
\begintt
gap> RequirePackage( "ace" );
\endtt
See Section~"ref:RequirePackage" in the {\GAP} Reference Manual.

If {\GAP} cannot find a working binary, the call to `RequirePackage' will
fail.

If you want to load the {\ACE} package by default, you can put this
`RequirePackage' command into your `gaprc' file
(see Section~"ref:The .gaprc file" in the {\GAP} Reference Manual).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Some Basics}

Throughout  this  manual for  the  use of  {\ACE}  as  a {\GAP}  share
package, we shall assume that the reader already knows the basic ideas
of  coset enumeration, as  can be  found for  example in~\cite{Neu82}.
There, a simple  proof is given for the fact  that a coset enumeration
for  a subgroup of  finite index  in a  finitely presented  group must
eventually terminate with the correct result, provided the enumeration
process obeys  a simple condition  (Mendelsohn's condition) formulated
in Lemma 1 and Theorem 2 of~\cite{Neu82}.  This basic condition leaves
room for a great variety of \lq strategies' for coset enumeration; two
\lq classical' ones, have been known for a long time as the \lq Felsch
strategy'  and  the  \lq  HLT  strategy' (for  Haselgrove,  Leech  and
Trotter).  Extensive experimental  studies on  many strategies  can be
found in  \cite{CDHW73}, \cite{Hav91}, \cite{HR99a},  and \cite{HR99b}
in particular.

A few basic points  should be particularly understood:

\beginlist

\item{--} \lq Subgroup(generator) and relator tables' that are used in
the description of coset enumeration  in \cite{Neu82}, and to which we
will  also occasionally  refer in  this manual,   do  *not* physically
exist    in the implementation of  coset enumeration in {\ACE}.  For a
terminology that  is closer to  the actual implementation and  also to
the  formulations  in  the   manual  for  the  {\ACE}  standalone  see
\cite{CDHW73} and \cite{Hav91}.

\item{--} Coset  enumeration. proceeds by defining  \lq coset numbers'
that  really denote  possible  representatives for  cosets written  as
words in the generators  of the group. At the  time of their generation
it is not  guaranteed that any two of these  words do indeed represent
different cosets.

\item{--} It is customary in  talking about coset enumeration to speak
of \lq  cosets' when really coset  numbers are meant. While  we try to
avoid this in this interface manual, in certain word combinations such
as \lq coset application' we will follow this custom.

\item{--} The definition of a coset number may lead to \lq deductions'
from the \lq closing of rows in subgroup or relator tables'. These are
kept in a \lq deduction stack'.

\item{--}  Also  it  may  be  found  that  (different)  words  in  the
generators  defining different coset  numbers really  lie in  the same
coset of  the given subgroup.  This  is called a  \lq coincidence' and
will eventually lead to the elimination of the larger of the two coset
numbers.    Until  this   elimination  has   been   performed  pending
coincidences are kept in a \lq queue of coincidences'.

\item{--} A definition that will actually close a row in a subgroup or
relator  table will  immediately yield  twice as  many entries  in the
coset  table  as  other  definitions.   Such  definitions  are  called
\lq preferred definitions', the places in rows of a subgroup or relator
table that they close are also  referred to as \lq gaps of length one' 
or minimal gaps. Such gaps  can be  found  at little  extra cost  when
\lq relators  are traced  from a  given  coset number'. {\ACE} keeps a
selection of  them in a \lq preferred  definition stack'  for  use  in
some definition strategies (see~\cite{Hav91}).

\endlist

It will also be necessary to understand some further basic features of
the  implementation and  the corresponding  terminology which  we will
explain in the sequel.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Enumeration  Style}

The first main decision for any coset enumeration is in  which sequence
to  make definitions. When a new  coset number has to  be defined, in
{\ACE} there are basically three possible methods to choose from:

\beginlist

\item{--}  One  may fill  the  next empty  entry  in  the coset  table
by scanning     from the  left/top  of  the  coset table  towards  the
right/bottom -- that is, in order  row by row. This is called *C-style
definition* (for *C*oset Table Based definition) of coset numbers.  In
fact a procedure needs to follow a method like this to some extent for
the proofs that coset enumeration eventually terminates in the case of
finite index (see~\cite{Neu82}).

\item{--} In *R-style definition* (for *R*elator Based definition) the
order  in which  cosets are  defined is  explicitly prescribed  by the
order in which rows of (the subgroup generator tables and) the relator
tables are filled by making definitions.

\item{--}  One may  choose  definitions from  a *Preferred  Definition
Stack*.  In  this stack possibilities for definition  of coset numbers
are stored  that will close a  certain row of a  relator table.  Using
these \lq preferred definitions' is sometimes also  referred  to as  a
\lq minimal gaps strategy'. The idea of using these is that by closing
a  row  in  a  relator table, thus,   one   will  immediately   get  a
consequence.  We will come back to the obvious question of  where  one
obtains this \lq preferred definition stack'.

\endlist

The *enumeration  style* is mainly  determined by the  balance between
C-style definitions  and R-style  definitions, which is  controlled by
the values of the `ct' and `rt' parameters (see Sections~"parameter ct"
and~"parameter rt").

However this still leaves us with  plenty of freedom for the design of
definition  strategies,  freedom which  can, for example,  be  used to
great advantage in Felsch-type strategies. Though it is  not  strictly
necessary, Felsch-type  programs generally start off  by ensuring that
each of the given subgroup generators  forms a cycle at coset 1 before
embarking  on   further  enumeration.  The  use  of   this  and  other
possibilities leads to the following table of *enumeration styles*.


% \begin{table}
% \hrule
% \caption{The styles}
% \label{tab:sty}
% \smallskip
% \renewcommand{\arraystretch}{0.875}
% \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}crrlc} 
% \hline\hline
% & \ttt{Rt} value & \ttt{Ct} value & style name & \\
% \hline
% & $<\!0$ & $<\!0$ & R/C & \\
% & $<\!0$ & $0$    & R*  & \\
% & $<\!0$ & $>\!0$ & Cr  & \\
% & $0$    & $<\!0$ & C   & \\
% & $0$    & $0$    & R/C (defaulted) & \\
% & $0$    & $>\!0$ & C  & \\
% & $>\!0$ & $<\!0$ & Rc & \\
% & $>\!0$ & $0$    & R  & \\
% & $>\!0$ & $>\!0$ & CR & \\
% \hline\hline
% \end{tabular*}
% \end{table}
\begintt
Rt value     Ct value     style name
---------------------------------------

   0           >0         C
  <0           >0         Cr
  >0           >0         CR

  >0            0         R
  <0            0         R*
  >0           <0         Rc
  <0           <0         R/C
   0            0         R/C (default)

---------------------------------------
\endtt

In *C-style*  most definitions are made in the  next empty coset table
slot  and  are (in  principle)  tested  in  all essentially  different
positions in the relators; i.e.~this is a Felsch-like mode.

However in C Style some  definitions may be made following a preferred
definition strategy, see the `pmode' and `psize' options below.

*Cr-style* is like  C-style except that a single R-style  pass is done
after the initial C-style pass.

In *CR-style* alternate passes of C-style and R-style are performed.

In *R-style*  all   the  definitions  are   made  via  relator  scans; 
i.e.~this is an HLT-like mode.

*R\*-style*  makes  definitions the  same as  R-style,  but  tests all
definitions as for C-style.

*Rc-style* is like R-style, except  that a single C-style pass is done
after the initial R-style pass.

In  *R/C-style*  we  run  in  R-style  until  an  overflow, perform  a
lookahead on the entire table, and then switch to CR-style.

*Defaulted R/C-style*  is the default  style, used if  you call {\ACE}
without specifying  options. In it we  use R/C-style with  `ct' set to
1000 and `rt' set to  approximately $2000$ divided by the total length
of the relators  in an attempt to balance R and  C definitions when we
switch to CR-style.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Finding Deductions, Coincidences, and Preferred Definitions} 

*TO BE WRITTEN*

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Chapter{Options for the ACE Enumerator}

{\ACE} offers  a wide  range of  options to direct  and guide  a coset
enumeration,  most of  which are  available from  {\GAP}  through this
interface. We describe most of the options available via the interface
in this chapter; other options, termed strategies, are defined in  the
following chapter.  Strategies  are  merely special options of  {\ACE}
that set a number of options described in this chapter,  all  at once.

Except for limitations imposed  by {\GAP}  e.g.\ clashes  with {\GAP}
keywords and blank spaces not allowed in keywords, the options of the
{\ACE} interface are the same as for the binary; so, for example, the
options can appear in upper or lower case (or indeed, mixed case) and
most may be abbreviated. Below we only list the options in all  lower
case, and in their longest form;  where  abbreviation is possible  we
give the shortest abbreviation in the option's description   e.g.~for
the `mendelsohn' option we state that  its  shortest  abbreviation is
`mend', which means `mende', `mendel' etc., and  indeed,  `Mend'  and
`MeND', are all valid abbreviations of that option. Some options have
synonyms e.g.~`cfactor' is an alternative for `ct'.

It is important to realize that {\ACE}'s options (even the non-strategy 
options) are not orthogonal, i.e.\ the order in which they are put to
{\ACE} can be important.  For this reason,  except for a  few options
that have no effect on the course of an  enumeration,  the  order  in
which  options  are passed to the {\ACE} interface is preserved  when 
those same options are passed to the {\ACE} binary. One of the reasons
for  the  non-orthogonality  of  options  is to protect the user from
obtaining invalid enumerations from bad combinations of options;  the
general rule is that the later option prevails.

Any  option  that the {\ACE} binary doesn't  understand  is    simply
ignored  and a warning is sent to standard error (which should appear
in your {\GAP} session). If this occurs, the input fed to  {\ACE} and
the output from {\ACE} will be files  in a  temporary directory;  the
full   path   to  these   files   is  recorded  in  the record fields
`ACEinfo.infile' and `ACEinfo.outfile', respectively.

If `CallACE' (see Section~"CallACE") is given no options, the `default'
strategy (see Chapter~"Predefined Strategies")  is  selected.  If  the
`default' strategy does not suffice, most usually a user will   select
one   of   the   other   strategies   from   among  the ones listed in 
Chapter~"Predefined Strategies", and   possibly   modify   some of the 
parameter choices by selecting from the options in this chapter.  It's
not illegal to select more than one strategy,  but  it's not sensible;
as mentioned above, the later one prevails.

Please  see Section~"Using ACE as a Default for Coset Enumerations and 
some General Warnings" for a general discussion of the option mechanism
and of the pitfalls one  may encounter, in the passing of options.
There are two ways options may be passed to {\ACE}:

\beginlist

\item{--} Options may be set globally using the function `PushOptions'.

\item{--} Options may be appended to the argument list of any function
call,  separated by a  colon from  the argument  list;  they  are then
passed on recursively to any subsequent inner function call, which may
in turn have options of their own.

%\item{--} If {\ACE} is to be used interactively .....
%*TO BE FILLED IN*

\endlist

Options  are  given  like  record  components,  separated  by  commas.
Options that take a parameter are  given as an  assignment to the name
(such  as `time:=<val>').   Options passed without assigning a value,
are treated by {\GAP} as the setting of a boolean option to the value
`true'. If the option is a known {\ACE} option, `CallACE' will   make
the   appropriate  translation  to  the value expected by the  {\ACE}
binary; the appropriate translation may be to pass to the binary:  no
value, 0, or 1.  In general,  this  should not concern the user since
`CallACE' will take care of it. Options announced as unknown (options
are  echoed  to  the  screen,  if  the  `echo' option is passed) will
*always*  be  passed to  {\ACE} as no-value  options;  the  user  can
over-ride this behaviour  simply by assigning the intended value. The
reason for  passing  unknown  options in this way, is that the {\ACE} 
interface should still work,  albeit with erroneous warning messages,
with  an  updated  binary. The  {\ACE}  options  known  to the {\ACE} 
interface are the fields of the record `KnownACEoptions';  each field
(known {\ACE} option) is assigned to a list of the form
`[<i>, <ListOrFunction>]', where `<i>' is an integer representing the
shortest abbreviation of the option and `<ListOrFunction>' is  either
a list of (known) allowed values or a boolean function that  may   be 
used to determine if the given value is a (known) valid value e.g.

\begintt
gap> KnownACEoptions.compaction;
[ 3, [ 0 .. 100 ] ]
\endtt

indicates that the option `compaction' may be  abbreviated  to  `com'
and the (known) valid values are in the (integer) range 0 to 100; and

\begintt
gap> KnownACEoptions.ct;
[ 2, <Operation "IS_INT"> ]
\endtt

indicates that there is essentially no abbreviation of `ct' (since its
shortest abbreviation is of length 2),  and a value of  `ct' is  known
to be valid if `IsInt' returns true for that value.

*All* options (except `silent', `messfile', `outfile' and `echo')   on
the `OptionsStack', when the {\ACE} interface is called via `CallACE',
are passed to the {\ACE} binary, even those flagged  as unknown or bad
(when the `echo' option is passed). The options `silent',   `messfile'
(which  is  translated  to  `ao'  for  the  binary) and `outfile' were
introduced for {\GAP} use;  and `echo',  though an {\ACE} option,   is 
actually handled by `CallACE' and not passed to the binary.

So  for example to  use the  `hard' strategy  option and  increase the
workspace to $10^7$ words for the example given above, one could call:

\begintt
gap> CallACE(fgens,rels,[c]:hard,workspace:=10^7);;
\endtt

Except for a few additional option synonyms (e.g.~`messfile' is a 
{\GAP}-introduced synonym for the `ao' {\ACE} option), and just two
multiple-word {\ACE} options (the `pure r' and `pure c' strategies
have become `purer' and `purec', respectively, for the {\GAP} interface),
and a small number of additional non-{\ACE} options (e.g.~`silent'
and `outfile'), all option names for the interface are the same as for
the {\ACE} standalone. The {\ACE} binary has many multiple-word options
but all except `pure r' and `pure c' have single-word alternatives;
only the single-word option names are available via the {\GAP} interface.
Some abbreviations that are possible for the {\ACE} binary (e.g.~`fi'
for `fill', and `rec' for `recover') are *not* allowed via the {\GAP}
interface, since they clash with {\GAP} keywords. Again, most of the
preceding paragraph will not be of importance to the {\GAP} user;
these comments have been made merely for the user who wishes to reconcile
what the interface does with how the {\ACE} binary performs, and is
of most use to standalone users.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{An Option that Modifies the Input to the Enumeration}

\beginitems
\>`asis'{parameter asis}&
Do not reduce relators. (Shortest abbreviation: `as'.)
\enditems

By default, {\ACE} freely  and cyclically reduces the relators, freely
reduces  the  subgroup generators,  and  sorts  relators and  subgroup
generators in length-increasing  order.  If you do not  want this, you
can switch it off by setting the `asis' option.

*Notes:* As well as allowing you  to use the presentation *as* it *is*
given,  this  is  useful for  forcing  definitions  to  be made  in  a
prespecified  order,  by  introducing  dummy  (i.e.,  freely  trivial)
subgroup generators.   (Note that the  exact form of  the presentation
can  have a significant  impact on  the enumeration  statistics.)  For
some fine points of the influence of `asis' being set on the treatment
of involutory generators see the {\ACE} standalone manual.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{General Parameters that Modify the Enumeration Process}

\beginitems

\>`ct:=<val>'{parameter ct}
\>`cfactor:=<val>'{parameter cfactor}&
Number of C-style definitions per pass; `<val>' should be an  integer. 
(Shortest abbreviation of `cfactor' is `c'.)

The absolute value of `<val>' sets the
number of C-style definitions per  pass through  the enumerator's main
loop. The sign of `<val>'  sets the  style. The possible  combinations
of the values of `ct' and  `rt'  (described below)  are  given in  the
table of  enumeration styles in Section~"Enumeration Style".

\>`rt:=<val>'{parameter rt}
\>`rfactor:=<val>'{parameter rfactor}&
Number of R-style definitions per pass; `<val>' should be an  integer. 
(Shortest abbreviation of `rfactor' is `r'.)

The absolute value of `<val>' sets the
number of R-style definitions per  pass through  the enumerator's main
loop. The sign of `<val>'  sets the  style. The possible  combinations
of the values of `ct' (described above)  and  `rt'  are  given in  the
table of  enumeration styles in Section~"Enumeration Style".

\>`no:=<val>'{parameter  number}&
The number of group relators to include in the subgroup; `<val>' should
be an integer greater than or equal to $-1$.

It is sometimes helpful to include the group relators into the list of
the subgroup generators,  in the sense that they  are applied to coset
number  \#1 at the  start of  an enumeration.  A value  of 0  for this
option  turns this  feature off  and  the (default)  argument of  $-1$
includes all the relators.  A positive argument includes the specified
number of relators, in order. The `no' option affects only the C-style
procedures.

\>`mendelsohn'{parameter mendelsohn}&
Turns on mendelsohn processing. (Shortest abbreviation: `mend'.)

Mendelsohn style processing  during relator scanning/closing is turned
on by giving  this option.  Off is the default,  and here relators are
scanned only  from the start (and  end) of a  relator.  Mendelsohn \lq
on' means that all (different) cyclic of a relator are scanned.

The effect  of Mendelsohn style  processing is case-specific.   It can
mean the difference  between success or failure, or  it can impact the
number  of  cosets   required,  or  it  can  have   no  effect  on  an
enumeration's statistics.

*Note:* Processing all cyclic permutations of the relators can be very
time-consuming,  especially if  the  presentation is  large.  So,  all
other things being equal, the  Mendelsohn flag should normally be left
off.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Parameters Modifying C-Style Definition}

The  next  three  options  are   relevant  only  for  making   C-style
definitions.  Making definitions in C-style, that is filling the coset
table line  by line, it can  be very advantageous to  switch to making
definitions from the preferred definition stack.  Possible definitions
can  be  extracted  from  this  stack  in various  ways  and  the  two
parameters `pmode'  and `psize' (see~"parameter  pmode" and ~"parameter
psize"  respectively)  regulate this.  However  it  should be  clearly
understood that  making  all definitions  from  a preferred  definition
stack one may  violate the condition of Mendelsohn's  theorem, and the
parameter `fill' (see~"parameter fill") can be used to avoid this.

\>`fill:=<val>'{parameter fill}
\>`ffactor:=<val>'{parameter ffactor}&
Controls the preferred definition strategy by setting the fill factor;
`<val>' must be a non-negative integer.
(Shortest abbreviation of `fill' is `fil', and shortest abbreviation of 
`ffactor' is `f'.)

Unless prevented by  the fill factor, gaps of  length one found during
deduction   testing  are  preferentially   filled  (see~\cite{Hav91}).
However,  this potentially  violates the  formal requirement  that all
rows in the coset table  are eventually filled (and tested against the
relators).   The fill  factor is  used  to ensure  that some  constant
proportion of the coset table  is always kept filled.  Before defining
a coset  number to  fill a  gap of length  one, the  enumerator checks
whether `fill' times  the completed part of the table  is at least the
total  size of  the  table and,  if  not, fills  coset  table rows  in
standard order (C-style) instead of filling gaps.

An  argument of  0  selects  the default  value  of $\lfloor  5(n+2)/4
\rfloor$,  where $n$  is the  number of  columns in  the  table.  This
default  fill factor  allows  a moderate  amount  of gap-filling.   If
`fill' is  1, then there is  no gap-filling.  A large  value of `fill'
can cause  what is in effect  infinite looping (resolved  by the coset
enumeration failing).   However, in general,  a large value  does work
well.  The  effects of the various gap-filling  strategies vary widely.
It is  not clear  which values are  good general defaults  or, indeed,
whether any strategy is always ``not too bad''.

\>`pmode:=<val>'{parameter pmode}&
Parameter for preferred definitions;  `<val>' should be in the integer
range 0 to 3. (Shortest abbreviation: `pmod'.)

The  value of  the  `pmode' option  determines  which definitions  are
preferred.  If  the argument is  0, then Felsch style  definitions are
made using  the next empty table  slot.  If the  argument is non-zero,
then gaps of length one found during relator scans in Felsch style are
preferentially  filled  (subject to  the  value  of  `fill').  If  the
argument  is 1,  they are  filled  immediately, and  if it  is 2,  the
consequent deduction  is also made  immediately (of course,  these are
also put on the deduction stack).  If the argument is 3, then the gaps
of length one are noted in the preferred definition queue.

Provided such a gap survives  (and no coincidence occurs, which causes
the queue  to be discarded) the  next coset number will  be defined to
fill the oldest  gap of length one.  The default value  is either 0 or
3,  depending  on  the  strategy  selected  (see  Section  "Predefined
Strategies").  If you want to know more details, read the code.


\>`psize:=<val>'{parameter psize}&
Size of preferred definition queue; `<val>' *must*  be $2^n$, for some
integer $n>0$. (Shortest abbreviation: `psiz'.)

The  preferred definition  queue is  implemented as  a  ring, dropping
earliest entries. An argument of 0 selects  the default size of $256$.
Each  queue slot takes two words (i.e., 8 bytes),  and the  queue  can
store up to $2^n-1$ entries.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Parameters for R-Style Definition}

\>`row:=<val>'{parameter row}&
Set the \lq row filling' parameter; `<val>' is either 0 or 1.

By default, \lq row filling' is on (i.e.~`true' or 1).  To turn it off
set `row' to either `false' or 0 (both are translated to 0 when passed
to  the {\ACE}  binary).   When making  HLT-style  definitions, it  is
normal to scan each row of  the coset table after its coset number has
been applied to  all relators, and make definitions  to fill any holes
in that row of the  coset table encountered. This will, in particular,
guarantee  that   the  condition  of  Mendelsohn's   Theorem  will  be
fulfilled.  Failure  to do  so can cause  even simple  enumerations to
overflow.

\>`lookahead:=<val>'{parameter lookahead}&
Lookahead; `<val>' should be in the integer range 0 to 4.
(Shortest abbreviation: `look'.)
  
Although HLT-style strategies  are fast, they are local,  in the sense
that  the  implications   of  any  definitions/deductions  made  while
applying cosets may not become  apparent until much later.  One way to
alleviate this problem is to perform lookaheads occasionally; that is,
to  test the  information  in  the table,  looking  for deductions  or
concidences.  {\ACE} can perform a lookahead when the table overflows,
before the compaction routine is  called.  Lookahead can be done using
the entire  table or  only that  part of the  table above  the current
coset, and  it can  be done R-style  (scanning coset numbers  from the
beginning  of relators)  or C-style  (testing all  definitions  in all
essentially different positions).

The following are the effects of the possible values of `lookahead':

\beginlist

\item{--} A value of 0 disables lookahead;
\item{--} 1 does a partial table lookahead, R-style; 
\item{--} 2 does a whole table lookahead, C-style; 
\item{--} 3 does a whole table lookahead, R-style; 
\item{--} 4 does a partial table lookahead, C-style.  

\endlist

The  default  is  1 if the `hlt' strategy is used and 0 otherwise;
see Section~"Predefined Strategies".

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Further Parameters}

\>`dmode:=<val>'{parameter dmode}&
Deduction mode; `<val>' should be in the integer range 0 to 4.
(Shortest abbreviation: `dmod'.)

A completed table  is only valid if every table  entry has been tested
in all essentially different  positions in all relators.  This testing
can either be done directly  (Felsch strategy) or via relator scanning
(HLT strategy).  If it is  done directly, then more than one deduction
(i.e., table  entry) can be waiting  to be processed at  any one time.
So the untested deductions are stored in a stack.  Normally this stack
is fairly small but, during a collapse, it can become very large.

This  command allows  the user  to  specify how  deductions should  be
handled.  The value <val> has the following interpretations:


\beginlist

\item{--} $0$:  
discard deductions if there is no stack space left;

\item{--} $1$: 
as for $0$, but purge any redundant coset numbers on the top of the stack
at every coincidence;

\item{--} $2$: 
as for 0, but  purge all redundant coset numbers from the stack at
every coincidence;

\item{--} $3$:
discard the entire stack if it overflows; and

\item{--} $4$:
if  the stack  overflows,  double the  stack size  and  purge all
redundant coset numbers from the stack.

\endlist

The  default deduction mode  is either  $0$ or  $4$, depending  on the
strategy  selected (see  Section~"Predefined Strategies"),  and  it is
recommended that you stay with the  default.  If you want to know more
details, read the well-commented C code.

*Notes:*
If deductions are discarded for any reason, then a final relator check
phase  will be run  automatically at  the end  of the  enumeration, if
necessary, to check the result.

\>`dsize:=<val>'{parameter dsize}&
Deduction stack size; `<val>' should be a non-negative integer.
(Shortest abbreviation: `dsiz'.)

Sets the  size of  the (initial) allocation  for the  deduction stack.
The size is  in terms of the number of  deductions, with one deduction
taking two words (i.e., 8 bytes).  The default size, of $1000$, can be
selected  by  a value  of  0.   See the  `dmode' entry  for a  (brief)
discussion of deduction handling.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Technical Options}

The following options do not affect how the coset enumeration is done,
but how it  uses the computer's resources. They  might thus affect the
runtime as  well as  the range of  problems that  can be tackled  on a
given machine.

\beginitems

\>`workspace:=<val>'{parameter workspace}&
Workspace size in words (default $10^6$);
`<val>' should be an expression that evaluates to a positive integer,
or a string of digits ending in a `k', `M' or `G' representing a
multiplication factor of $10^3$, $10^6$ or $10^9$, respectively
e.g.~both `workspace := 2 * 10^6' and `workspace := "2M"' specify
a workspace of $2\times10^6$ words. Actually, if the value of
`workspace' is entered as a string, each of `k', `M' or `G'
will be accepted in either upper or lower case.
(Shortest abbreviation: `wo'.)

By default, {\ACE} has a physical table size of $10^6$ words (i.e., $4
\times 10^6$ bytes in the  default 32-bit environment).  The number of
coset numbers in the table is  the table size divided by the number of
columns.   Although  the  number   of  coset  numbers  is  limited  to
$2^{31}-1$ (if the C `int' type is 32 bits), the table size can exceed
the $4$GByte 32-bit limit if a suitable machine is used.

\>`time:=<val>'{parameter time}&
Maximum execution time in seconds; `<val>' must be an integer greater
than or equal to $-1$. (Shortest abbreviation: `ti'.)

The `time' command  puts a time limit (in seconds) on  the length of a
run. The default is $-1$  which is no  time limit. If the  argument is
$\ge0$ then the total elapsed time for this call is checked at the end
of each pass through the enumerator's main loop, and if it's more than
the limit the run is stopped and the current table returned.

Note that a limit of $0$ performs exactly one pass through the main
loop, since $0 \ge 0$.

%\begintt
%???????????????????????????????????????????????????????????????????
%*GREG:
%
%DOES THIS HAVE RELEVANCE TO THE INTERACTIVE MODE?*
%
%If the enumerator is run in the continue mode, this allows a form of
%  ``single-stepping''
%
%??????????????????????????????????????????????????????????????????
%\endtt

The time  limit is approximate, in  the sense that  the enumerator may
run for a longer, but never a shorter, time.  So, if there is, e.g., a
big collapse (so that the time round the loop becomes very long), then
the run may run over the limit by a large amount.

*Notes:*
The time  limit is  CPU-time, not wall-time.   As in all  timing under
Unix, the clock's granularity (usually  $10$ mSec) and the system load
can affect  the timing;  so the  number of main  loop iterations  in a
given time may vary.

\>`loop:=<val>'{parameter loop}&
Loop limit; `<val>' should be a non-negative integer.

The core enumerator is organised as a state machine, with each step
performing an \lq action' (i.e., lookahead, compaction) or a block of
actions (i.e., $|`ct'|$ coset definitions, $|`rt'|$ coset applications).
The number of passes through the main loop (i.e., steps) is counted, and
the enumerator can make an early return when this count hits the
value of `loop'.
A value of $0$, the default, turns this feature off.

*Guru Notes:*
You can do lots of really neat things using this feature, but you need
some understanding of the internals of {\ACE} to get real benefit from
it.

\>`path'{parameter path}&
Turns on path compression.

To  correctly  process  multiple  concidences, a  union-find  must  be
performed.  If both path compression and weighted union are used, then
this can be  done in essentially linear time  (see, e.g., \cite{CLR90}).
Weighted union alone, in the  worst-case, is worse than linear, but is
subquadratic.  In  practice, path  compression is expensive,  since it
involves many coset table  accesses.  So, by default, path compression
is turned off; it can be turned on by `path'.  It has no effect on the
result, but may affect the running time and the internal statistics.

*Guru Notes:*
The whole question of the best way to handle large coincidence forests
is problematic.  Formally, {\ACE} does  not do a weighted union, since
it is constrained to replace the higher-numbered of a coincident pair.
In practice,  this seems  to amount to  much the same  thing!  Turning
path  compression on  cuts down  the  amount of  data movement  during
coincidence processing at the expense of having to trace the paths and
compress them.  In general, it does not seem to be worthwhile.

\>`compaction:=<val>'{parameter compaction}&
Percentage of dead cosets to trigger compaction;
`<val>' should be an integer (percentage) in the integer range 0 to 100.
(Shortest abbreviation: `com'.)

The parameter  `compaction' sets the percentage of  dead coset numbers
needed  to   trigger  compaction  of   the  coset  table,   during  an
enumeration.  The default is 10 or 100, depending on the strategy used
(see Section~"Predefined Strategies").

Compaction  recovers the  space  allocated to  cosetnumbers which  are
flagged  as  dead  (i.e.,  which  were found  to  be  coincident  with
lower  coset number).   It results in  a table where all  the active
cosets are numbered  contiguously from \#1, and with  the remainder of
the table available for new cosets.

%UPTOHERE 

The coset  table is compacted when  a definition of a  coset number is
required,  there is no  space for  a new  coset number  available, and
provided that  the given percentage  of the coset table  contains dead
coset numbers.   For example, `com  = 20' means compaction  will occur
only  if 20\%  or  more of  the cosets  in  the table  are dead.   The
argument can  be any  integer in the  range $0--100$, and  the default
value is 10 or  100; see Section~"Predefined Strategies".  An argument
of 100 means that compaction  is never performed, while an argument of
0 means always compact, no matter how few dead coset numbers there are
(provided there is at least one, of course).

Compaction may be performed  multiple times during an enumeration, and
the table that results from an  enumeration may or may not be compact,
depending on whether or not there have been any coincidences since the
last compaction (or  from the start of the  enumeration, if there have
been no compactions).

*Notes:*
In some strategies  (e.g., `hlt') a lookahead phase  may be run before
compaction  is   attempted.   In  other   strategies  (e.g.,  `sims3')
compaction may  be performed  while there are  outstanding deductions;
since deductions  are discarded  during compaction, a  final lookahead
phase will (automatically) be performed.

Compacting a  table 'destroys' information  and history, in  the sense
that the  coincidence list is deleted,  and the table  entries for any
dead cosets are deleted.

??????????????????????????????????????????????????????????????????????

*GREG:
WILL THIS BE RELEVANT FOR INTERACTIVE USE?*

If  messaging is  enabled (see~"Information  About  the Enumeration"),
then a progress  message (labelled {\tt CO}) is  printed each time the
compaction routine is  actually called (as opposed to  each time it is
potentially called).

??????????????????????????????????????????????????????????????????????


\>`max:=<val>'{parameter max}&
Maximum number of cosets to be defined.

Sets the maximum  number of coset numbers to  be defined.  By default,
all  of the workspace  is used,  if necessary,  in building  the coset
table.  So the table size is  an upper bound on how many coset numbers
can be active at any one time.   The `max' option allows a limit to be
placed on  how much of the  physical table space is  made available to
the enumerator.   Enough space for  at least two coset  numbers (i.e.,
the subgroup and one other) must  be made available.  An argument of 0
selects all of the workspace.

\enditems

    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \Chapter{Predefined Strategies}


    The versatility  of {\ACE}  means that it  can be difficult  to select
    appropriate  parameters when  presented with  a new  enumeration.  The
    problem is compounded  by the fact that no  generally applicable rules
    exist to  predict, given a presentation, which  parameter settings are
    'good'.   To  help  overcome  this problem,  {\ACE}  contains  various
    commands which select particular enumeration strategies.  One or other
    of these strategies may work and, if not, the results may indicate how
    the parameters can be varied  to obtain a successful enumeration.  

    By default  {\ACE} uses  a strategy `default'  which assumes  that the
    enumeration is easy, and if it turns out not to be so, {\ACE} switches
    to  a strategy designed  for more  difficult enumerations.   The other
    straightforward  options for  beginning users  are `easy'  and `hard'.
    Thus, `easy' will quickly succeed or fail (in the context of the given
    resources); `default' may  quickly succeed, but then try  `hard' for a
    while;  `hard' will  run  more  slowly from  the  beginning trying  to
    succeed.

    The following options, we will refer to as strategies; these options
    are special in that they set many options all at once. They are:
    `default',  `easy',   `felsch', `hard', `hlt', `purec', `purer', and
    `sims'. All of these can be passed as boolean options from the {\ACE}
    interface, except `sims' which expects one of the integer values: 1,
    3, 5, 7, or 9. Also, `felsch' can be given the value 0 or 1; when
    `felsch' is passed with no value it has the same effect as passing it
    with a value of 0.

    Strategy  options  are parsed  by  the  interface  *before* any  other
    option,  it is therefore  possible to  modify parameters  on top  of a
    strategy.

    The thirteen standard strategies are listed below, their definition is
    given  in the following  table. For  all of  them the  following three
    parameters  are the  same;  `path'  = `false',  `psize'  = $256$,  and
    `dsize' = $1000$. Note;  `mend' = `y' stands for the parameter 
    `mendelsohn'  being set.

    % \begin{table}
    % \hrule
    % \caption{The Predefined Strategies}
    % \label{tab:pred}
    % \smallskip
    % \renewcommand{\arraystretch}{0.875}
    % \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}lrrrrrrrrrrrrr} 
    % \hline\hline
    %           & \multicolumn{13}{c}{parameter} \\ 
    % \cline{2-14}
    % strategy & path & row & mend & number & look & com & ct   & rt    & fill &
    % pmode & psize & dmode & dsize \\ 
    % \hline
    % default    & n   & y   & n    & -1 & n    & 10  & 0    & 0     & 0  & 3    & 256  & 4    & 1000 \\
    % easy   & n   & y   & n    & 0  & n    & 100 & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
    % felsch:0& n   & n   & n    & 0  & n    & 10  & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
    % felsch:1  & n   & n   & n    & -1 & n    & 10  & 1000 & 0     & 0  & 3    & 256  & 4    & 1000 \\
    % hard   & n   & y   & n    & -1 & n    & 10  & 1000 & 1     & 0  & 3    & 256  & 4    & 1000 \\
    % hlt    & n   & y   & n    & 0  & 1    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
    % purec & n   & n   & n    & 0  & n    & 100 & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
    % purer & n   & n   & n    & 0  & n    & 100 & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
    % sims:1 & n   & y   & n    & 0  & n    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
    % sims:3 & n   & y   & n    & 0  & n    & 10  & 0    & -1000 & 1  & 0    & 256  & 4    & 1000 \\
    % sims:5 & n   & y   & y    & 0  & n    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
    % sims:7 & n   & y   & y    & 0  & n    & 10  & 0    & -1000 & 1  & 0    & 256  & 4    & 1000 \\
    % sims:9 & n   & n   & n    & 0  & n    & 10  & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
    % \hline\hline
    % \end{tabular*}
    % \end{table}

    \begintt
                                         parameter
                -------------------------------------------------------------
    strategy    row  mend  number  look  com    ct     rt  fill  pmode  dmode
    -------------------------------------------------------------------------
    default       1     n      -1     n   10     0      0     0      3      4
    easy          1     n       0     n  100     0   1000     1      0      0
    felsch := 0   0     n       0     n   10  1000      0     1      0      4
    felsch := 1   0     n      -1     n   10  1000      0     0      3      4
    hard          1     n      -1     n   10  1000      1     0      3      4
    hlt           1     n       0     y   10     0   1000     1      0      0
    purec         0     n       0     n  100  1000      0     1      0      4
    purer         0     n       0     n  100     0   1000     1      0      0
    sims := 1     1     n       0     n   10     0   1000     1      0      0
    sims := 3     1     n       0     n   10     0  -1000     1      0      4
    sims := 5     1     y       0     n   10     0   1000     1      0      0
    sims := 7     1     y       0     n   10     0  -1000     1      0      4
    sims := 9     0     n       0     n   10  1000      0     1      0      4
    -------------------------------------------------------------------------
    \endtt

    The  various  parameters  occurring  in  this table  (which  are  also
    available  via {\GAP})  are  explained in  groups  according to  their
    functionality  in  Chapter  "Options  for the  ACE  Enumerator".   The
    parameter names are  listed in the top row and  the strategy names are
    in the first column.

    Note  that  we  explicitly   (re)set  all  of  the  listed  enumerator
    parameters in all of the  predefined strategies, even although some of
    them have  no effect. For example,  the `fill' value  is irrelevant in
    HLT mode.   The idea  behind this  is that, if  you later  change some
    parameters individually, then the enumeration retains the `flavour' of
    the  last   selected  predefined  strategy.   

    Note also  that other parameters  which may effect an  enumeration are
    left  untouched  by setting  one  of  the  predefined strategies;  for
    example,  the values  of  `max' (see~"parameter  max") and  `asis'
    (see~"parameter asis").
    These parameters have  an effect which is independant  of the selected
    strategy.

    Note that, apart from the `felsch := 0' and `sims := 9' strategies, all
    of the strategies are distinct, although some are very similar.


    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \Section{The Strategies in Detail}

    \beginitems

    \>`default'{parameter default}&
    This selects the default strategy, which is based on the defaulted R/C
    style;  see Section~"Enumeration Style".   The idea  here is
    that  we assume  that the  enumeration is  'easy' and  start out  in R
    style.  If it turns  out not to be easy, then we  regard it as 'hard',
    and switch  to CR-style, after performing  a lookahead on  the entire
    table.

    \>`easy'{parameter easy}&
    If this strategy  is selected, we run in R-style  (i.e., HLT) and turn
    lookahead  and compaction  off.  For  small and/or  easy enumerations,
    this mode is likely to be the fastest.

    \>`felsch'{parameter felsch}
    \>`felsch:=<val>'{parameter felsch}&
    Assigning `felsch' 0 or no value selects a pure Felsch strategy, and a
    value of 1 selects a Felsch strategy with all relators in the subgroup
    and turns gap-filling on.

    \>`hard'{parameter hard}&  
    In many  'hard' enumerations, a  mixture of
    R-style  and  C-style  definitions,  all  tested  in  all  essentially
    different positions, is appropriate.  This option selects such a mixed
    strategy.  The  idea here  is that  most of the  work is  done C-style
    (with the relators  in the subgroup and with  gap-filling active), but
    that every  $1000$ C-style definitions  a further coset is  applied to
    all  relators.*Guru  Notes:*  The  $1000/1$  mix  is  not  necessarily
    optimal, and some experimentation may  be needed to find an acceptable
    balance (see,  for example, \cite{HR1}).   Note also that,  the longer
    the total length  of the presentation, the more work  needs to be done
    for each coset application to  the relators; one coset application can
    result in more than  $1000$ definitions, reversing the balance between
    R-style and C-style definitions.

    \>`hlt'{parameter hlt}&
    Selects the standard HLT strategy.

    \>`purec'{parameter purec}&
    Sets  the  strategy  to  basic  C-style  (coset  table  based)  --  no
    compaction, no gap-filling, no relators in subgroup.

    \>`purer'{parameter purer}&
    Sets the strategy  to basic R-style (relator based)  -- no Mendelsohn,
    no compaction, no lookahead, no row-filling.

    \>`sims:=<val>'{parameter sims}&
    There are five possible strategies determined by this option, selected
by  assigning  one  of  the  values:   1,  3,  5,  7  or  9.   In  his
book~\cite{Sim94}, Sims discusses ten standard enumeration strategies.
These  are effectively  HLT  (with and  without  the `mend'  parameter
-see~"parameter mendelsohn")  and Felsch,  all either with  or without
table standardisation  as the  enumeration proceeds.  {\ACE}  does not
implement  table  standardisation   during  an  enumeration,  although
incomplete tables  can be  standardised and an  enumeration continued.
The  five non-standardising  strategies  are implemented,  and can  be
selected by these options.  The number is the same as given in Section
5.5~of~\cite{Sim94}.   With  care, it  is  possible  to duplicate  the
statistics   given   in~\cite{Sim};  some   examples   are  given   in
Chapter~"Examples".  % again, in the appendix ...

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Chapter{Information and Experimentation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Section{Information about the Enumeration}

\beginitems

\>`silent'{parameter silent}& 
If the coset  enumeration did not finish within  the preset limits, an
error is raised by the interface to {\GAP}, unless the option `silent'
has been set,  in which case `fail' is returned.  Note  that this is a
feature of  the {\GAP}  interface only, it  has no counterpart  in the
{\ACE} standalone.

\>`outfile:=<filename>'{parameter outfile}&
If this  option is used,  {\GAP} will keep  the input file  for {\ACE}
produced by he {\GAP} interface under the filename <filename>, so that
one  could  easily  use  the  {\ACE}  standalone  for  work  with  the
respective presentation,  without having to  create an input  file for
the standalone anew.  Clearly this is a feature  of the interface only
that has no counterpart in the {\ACE} standalone.

\>`mess'{parameter mess}
\>`mess:=<val>'{parameter mess}&
If only `mess' is given, messages are turned on. It is also possible to
assigne the message level.

\>`messfile:=<filename>'{parameter messfile}&
Messages are printed in file <filename> (the default output is on the
screen).

\enditems

By default,  or if the argument `mess'  = 0, {\ACE} prints  out only a
single line of information giving  the result of each enumeration.  If
`mess' is non-zero then the presentation and the parameters are echoed
at the start  of the run, and messages on  the enumeration's status as
it progresses are also printed  out.  The absolute value of `val' sets
the frequency of  the progress messages, with a  negative sign turning
hole monitoring on.

The result line gives the result of the call to the enumerator and some
basic statistics.  The statistics given are, in order: 
 
\beginlist
\item{--}  `a':   number of active cosets; 
\item{--}  `r':   number of applied cosets;
\item{--}  `h':   first (potentially) incomplete row;
\item{--}  `n':   next coset definition number; 
\item{--}  `h':   (if `mess'$ \< 0$), percentage of holes in the table;
\item{--}  `l':   number of main loop passes;
\item{--}  `c':   total CPU time;
\item{--}  `m':   maximum number of active cosets;
\item{--}  `t':   total number of cosets defined.
\endlist

The possible results are given in the following Table; any result not
listed represents an internal error and should be reported.

\begintt
result               level     meaning 
----------------------------------------------------------------------------
INDEX = x                0     finite index of `x' obtained
OVERFLOW                 0     out of table space
SG PHASE OVERFLOW        0     out of space (processing subgroup generators)
ITERATION LIMIT          0     `loop' limit triggered
TIME LIMT                0     `ti' limit triggered
HOLE LIMIT               0     `ho' limit triggered
INCOMPLETE TABLE         0     all cosets applied, but table has holes
MEMORY PROBLEM           1     out of memory (building data structures)
----------------------------------------------------------------------------
\endtt

% \begin{table}
% \hrule
% \caption{Possible enumeration results}
% \label{tab:rslts}
% \smallskip
% \renewcommand{\arraystretch}{0.875}
% \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}lll} 
% \hline\hline
% result & level & meaning \\
% \hline
% \ttt{INDEX = x}         & 0 & finite index of \ttt{x} obtained \\
% \ttt{OVERFLOW}          & 0 & out of table space \\
% \ttt{SG PHASE OVERFLOW} & 0 & out of space (processing subgroup
% 				generators) \\
% \ttt{ITERATION LIMIT}   & 0 & \ttt{loop} limit triggered \\
% \ttt{TIME LIMT}         & 0 & \ttt{ti} limit triggered \\
% \ttt{HOLE LIMIT}        & 0 & \ttt{ho} limit triggered \\
% \ttt{INCOMPLETE TABLE}  & 0 & all cosets applied, but table has holes \\
% \ttt{MEMORY PROBLEM}    & 1 & out of memory (building data structures) \\
% \hline\hline
% \end{tabular*}
% \end{table}

The  progress message  lines consist  of  an initial  tag, some  fixed
statistics, and  some variable statistics.  The  possible message tags
are listed in the folowing table, along with their meanings.


\begintt
----------------------------------------------------------------------
message   action      meaning
----------------------------------------------------------------------
AD             y      coset 1 application definition (`SG'/`RS' phase)
RD             y      R-style definition
RF             y      row-filling definition
CG             y      immediate gap-filling definition
CC             y*     coincidence processed
DD             y*     deduction processed
CP             y      preferred list gap-filling definition
CD             y      C-style definition
Lx             n      lookahead performed (type `x')
CO             n      table compacted
CL             n      complete lookahead (table as deduction stack)
UH             n      updated completed-row counter
RA             n      remaining cosets applied to relators
SG             n      subgroup generator phase
RS             n      relators in subgroup phase
DS             n      stack overflowed (compacted and doubled)
----------------------------------------------------------------------
\endtt

% \begin{table}
% \hrule
% \caption{Possible progress messages}
% \label{tab:prog}
% \smallskip
% \renewcommand{\arraystretch}{0.875}
% \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}lll} 
% \hline\hline
% message & action & meaning \\
% \hline
% \ttt{AD} & y  & coset \#1 application definition 
% 			(\ttt{SG}/\ttt{RS} phase) \\
% \ttt{RD} & y  & R-style definition \\
% \ttt{RF} & y  & row-filling definition \\
% \ttt{CG} & y  & immediate gap-filling definition \\
% \ttt{CC} & y* & coincidence processed \\
% \ttt{DD} & y* & deduction processed \\
% \ttt{CP} & y  & preferred list gap-filling definition \\
% \ttt{CD} & y  & C-style definition \\
% \ttt{Lx} & n  & lookahead performed (type \ttt{x}) \\
% \ttt{CO} & n  & table compacted \\
% \ttt{CL} & n  & complete lookahead (table as deduction stack) \\
% \ttt{UH} & n  & updated completed-row counter \\
% \ttt{RA} & n  & remaining cosets applied to relators \\
% \ttt{SG} & n  & subgroup generator phase \\
% \ttt{RS} & n  & relators in subgroup phase \\
% \ttt{DS} & n  & stack overflowed (compacted and doubled) \\
% \hline\hline
% \end{tabular*}
% \end{table}


The tags indicate the function  just completed by the enumerator.  The
tags with a  `y' in the `action' column  represent functions which are
aggregated and counted.

Every time this count overflows the value of `mess', a message line is
printed and the  count is zeroed.  Those tags flagged  with a `y*' are
only present if the appropriate option has been included in the build.

Tags with an `n' in the `action' column are not counted, and cause a
message line to be output every time they occur.
They also cause the action count to be reset.

The fixed  portion of  the statistics consists  of the `a',  `r', `h',
`n', `h', `l' and `c' values,  as for the result line, except that `c'
is the time since the last message line.

The variable portion of the statistics can be:

\beginlist

\item{--}  the `m' and `t' values, as for the result line;
\item{--}  `d', the current size of the deduction stack;
\item{--}  `s', `d' and `c' (with `DS' tag), the new stack size,
the non-redundant deductions retained, and the redundant deductions
discarded.

\endlist

*Notes:*
Hole monitoring  is expensive, so don't  turn it on  unless you really
need  it.   If  you  wish  to  print  out  the  presentation  and  the
parameters, but  not the progress messages, then  set `mess' non-zero,
but very large.  (You'll still  get the `SG', `DS', etc. messages, but
not the `RD', `DD', etc. ones.)  You can set `mess' to $1$, to monitor
all enumerator actions,  but be warned that this  can yield very large
output files.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Experimentation Possibilities}

\beginitems

\>`aep:=<val>'{parameter aep}&
<val> is  an integer $0 \leq  <val> \leq 7$. Runs  the enumeration for
equivalent presentations.

\enditems

The `aep'  (all equivalent  presentations) option runs  an enumeration
for combinations  of relator ordering, relator  rotations, and relator
inversions.

The mandatory  argument <val> is  considered as a binary  number.  Its
three bits  are treated as  flags, and control relator  rotations (the
$2^0$ bit),  relator inversions (the $2^1$ bit)  and relator orderings
(the $2^2$  bit); $1$  means 'active' and  $0$ means  'inactive'. (See
below for an example).

The `aep' option  first performs a 'priming run'  using the parameters
as they  stand.  In particular,  the `asis' and `mess'  parameters are
honoured.

It then  turns `asis' on and  `mess' off, and generates  and tests the
requested  equivalent presentations.  The  maximum and  minimum values
attained by  `m' (the maximum number  of coset numbers  defines at any
stage)  and  `t' (the  total  number  of  coset numbers  defined)  are
tracked, and each  time a new 'record' is found  the relators used and
the summary result line is printed.

The  order in  which the  equivalent presentations  are  generated and
tested has no particular  significance, but note that the presentation
as  given *after*  the initial  priming  run) is  the *last*
presentation to be generated and  tested, so that the group's relators
are left `unchanged' by running the `aep' option.

Use  with  the  `mess' option  to  see  the  result. 

As discussed by Cannon, Dimino, Havas and Watson \cite{CDHW} and Havas
and Ramsay  \cite{HR1} such  equivalent presentations can  yield large
variations in  the number of  cosets required in an  enumeration.  For
this command, we are interested in this variation.

At the end, some additional status information is printed: 


\beginlist
\item{--}  the number of runs which yielded a finite index; 
\item{--}  the total number of runs (excluding the priming run); and 
\item{--}  the range of values observed for `m' and `t'.
\endlist


As an example (drawn from the discussion in \cite{HR99a}) consider the enumeration of the $448$ cosets of the subgroup $\langle a^2,Ab \rangle$ of the group
     $$ (8,7 \mid 2,3) 
    = \langle a,b \mid a^8 = b^7 = (ab)^2 = (Ab)^3 = 1 \rangle . $$
There are $4!=24$ relator orderings and $2^4=16$ combinations of relator or
inverted relator.
Exponents are taken into account when rotating relators, so the relators
given give rise to 1, 1, 2 and 2 rotations respectively, for a total
of $1.1.2.2=4$ combinations.
So the command `aep` := $7$ would generate and test $24.16.4=1536$ 
equivalent presentations, while `aep' := $3$ would generate and test 
$16.4=64$ equivalent presentations.

*Notes:*
There is  no way  to stop  the `aep' option  before it  has completed,
other than killing the task.  So  do a reality check beforehand on the
size of  the search space and  the time for each  enumeration.  If you
are  interested  in finding  a  `good'  enumeration,  it can  be  very
helpful, in terms of running time,  to put a tight limit on the number
of cosets via the `max' parameter.
You may also have to set `com' := $100$ to prevent time-wasting attempts
to recover space via compaction.
This maximises throughput by causing the `bad' enumerations, which are in
the majority, to overflow quickly and abort.
If you wish to explore a very large search-space, consider firing up many
copies of {\ACE}, and starting each with a `random' equivalent
presentation.
Alternatively, you could use the `rep' command.

\beginitems

\>`rep:=<val>'{parameter rep}&
Runs the enumeration for random equivalent presentations. See the `aep'
option.

\enditems

The  `rep' (random  equivalent presentations)  option  complements the
`aep'  option.    It  generates  and  tests   some  random  equivalent
presentations.  The mandatory argument acts  as for `aep'.  It is also
possible to set the number  of presentations used (a default of eight)
by using the extended syntax 'rep':=[<val>,<number>].

The routine first  turns `asis' on and `mess'  off, and then generates
and   tests  the   requested  equivalent   presentations.    For  each
presentation  the  relators  used  and  the summary  result  line  are
printed.

*Notes:*
The  relator inversions  and  rotations are  'genuinely' random.   The
relator permuting is  a little bit of a kludge,  with the 'quality' of
the  permutations tending  to improve  with  successive presentations.
When the `rep' command completes,  the presentation active is the {\it
last} one generated.

*Guru Note:*
It might  appear that neglecting to restore  the original presentation
is an error.  In fact, it is a useful feature!  Suppose that the space
of  equivalent presentations is  too large  to exhaustively  test.  As
noted in the  entry for `aep', we can start  up multiple copies of
`aep'  at  random points  in  the  search-space.  Manually  generating
`random'  equivalent  presentations  to  serve as  starting-points  is
tedious and error-prone.  The `rep' option provides a simple solution;
simply run `rep' := $7$ before `aep' := $7$!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\Chapter{Using ACE Interactively}

\>StartACE( <name>, <fgens>, <rels>, <sgens> [:<options>] ) F

`StartACE' takes a string <name>, a list <fgens> of free generators,
a list <rels> of relators and a list <sgens> of subgroup generators,
both in terms of the free generators, and optionally <options>
(see~"CallAce" for the format of the latter).

The return value is a {\GAP} object that represents the running {\ACE},
it is used as an argument in all functions described below.
<name> is used to print the return value in all subsequent outputs.

\>LeaveACE( <aceobj> ) F

`LeaveACE' takes an object <aceobj> as returned by `StartACE'
(see~"StartACE"), and terminates the corresponding {\ACE} job.
%T return an exit status if possible?

\begintt
*GREG:

THERE SHOULD PERHAPS BE THREE SECTIONS, 

ONE GIVING COMMANDS THAT INTERACTIVELY 'STEER' ACE

ONE WITH FUNCTIONS THAT ALLOW  TO SEND QUESTIONS ABOUT THE COSET TABLE
TO ACE.

ONE THAT ALLOWS OPERATIONS USING THE (POSSIBLY INCOMPLETE) COSET TABLE
TO GET FURTHER INFORMATION.

I HAVE  INSERTED INTO PLACEHOLDERS  FOR THESE SECTIONS  THE RESPECTIVE
STANDALONE COMMANDS WHICH  I WOULD LIKE TO HAVE  AVAILABLE THROUGH THE
INTERFACE*
\endtt


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Steering ACE Interactively}

\>ACECheck( <aceobj> ) F
\>ACERedo( <aceobj> ) F

An extant  enumeration is redone,  using the current  parameters.  Any
existing information in the table  is retained, and the enumeration is
restarted from coset \#1 (i.e., the subgroup).

*Notes:*

This option is really intended  for the case where additional relators
and/or subgroup  generators have been introduced.   The current table,
which may be  incomplete or exhibit a finite  index, is still 'valid'.
However, the new data may  allow the enumeration to complete, or cause
a collapse to a smaller index.

\>ACEContinue( <aceobj> ) F

Continue the  current enumeration,  building upon the  existing table.
If a previous run stopped without producing a finite index you can, in
principle, change any  of the parameters and continue  on.  Of course,
if you make any changes  which invalidate the current table, you won't
be allowed to continue, although you may be allowed to redo.


\>ACERecover( <aceobj> ) F

Invokes the compaction routine on  the table to recover the space used
by the dead  cosetnumbers. A `CO' message line is  printed if any rows
of the coset table were recovered,  and a `co' line if none were. 

*GREG: DOES THE NEXT SENTENCE MAKE SENSE FOR THE INTERFACE?*

This routine is  called automatically if the `cy',  `nc', `pr',or `st'
options are involved.


\>ACEAddGenerators( <aceobj>, <wordlist> ) F

Adds the words in the list <wordlist> to any subgroup generators already
present.
The enumeration must be restarted or redone, it cannot be continued.

\>ACEAddRelators( <aceobj>, <relatorlist> ) F

Adds the words in the list <relatorlist> to any relators already present.
The enumeration must be restarted or redone, it cannot be continued.

\>ACECosetCoincidence( <aceobj>, <int> ) F

Print out the representative of coset <int>, and add it to the
subgroup generators; i.e., equates this coset with coset \#1, the
subgroup.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Interactive Questions}

% \>`dump' := [0/1/2[,0/1]]&
% 
% Dumps  the internal  variables of  {\ACE}.  The  first  argument selects
% which of  the three levels  of {\ACE} to  dump, and defaults  to Level
% $0$.  The second argument selects the level of detail, and defaults to
% $0$  (i.e., less  detail).  This  option  is intended  for gurus;  the
% source code should be consulted to see what the output means.

\>ACEPrintOptions( <aceobj> ) F

This command prints details of the options included  in the version of
{\ACE} you're  running; i.e.,  what compiler flags  were set  when the
executable  was built.   A  typical output,  illustrating the  default
build, is:

\begintt
Executable built:
  Sat Feb 27 15:57:59 EST 1999
Level 0 options:
  statistics package = on
  coinc processing messages = on
  dedn processing messages = on
Level 1 options:
  workspace multipliers = decimal
Level 2 options:
  host info = on
\endtt


\>ACEPrintDetails( <aceobj>[, <params> ) F

This  command  prints out  details  of  the  current presentation  and
parameters.  No second argument, or second argument `false', prints out
the group
and subgroup name, the group's relators and the subgroup's generators.
If the second argument is `true', then  the current setting of the
parameters is
also printed.  The printout is the  same as that produced at the start
of a run when messaging is on.

% *Notes:*
% The output is printed out in a form suitable for input, so that a record
% of a previous run can be used to replicate the run.
% Note that, due to the defaulting of some parameters and the special
% meaning attached to some values, a little care has to be taken in
% interpreting the parameters.
%T mention outfile option here?

*GREG: DOES THE FOLLOWING PASSAGE MAKE SENSE WITH THE INTERFACE?*
If you wish to *exactly* duplicate a run, you should use the output
of `sr' *after* the run completes.


\>ACEPrintStatistics( <aceobj> ) F

If the statistics package is compiled into the code (which it is by
default),
then print the statistics accumulated during the most recent enumeration.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Operations with a Coset table}

\>ACECycles( <aceobj> ) F

returns a list of permutations corresponding to the generators,
i.e., the permutation representation.
%T only for complete tables?

\>ACENormalClosure( <aceobj>[, <conjugates>] ) F

If the second argument is missing or `false', test for normal closure.
If a subgroup  generator  does not  normalise  a  generator,  then this  is
returned.
If  the  argument  is `true',  then  any  non-normalising
conjugates are also added to the subgroup generators.

\>ACEOrder( <aceobj>, <int> ) F

This function searches for cosets with order modulo the subgroup a multiple
of the absolute value of the integer <int>.
If <int> is negative then the list of all cosets meeting the requirement is
returned.
If <int> is positive then the first coset meeting the requirement is
returned if such a coset exists, and `fail' otherwise.

\>ACEOrders( <aceobj> ) F

returns the list of orders modulo the subgroup of all cosets.


\>ACEStabilisingCosets( <aceobj>, <int> ) F

This function returns stabilising cosets of the subgroup.

\beginlist
\item{--} If <int> $> 0$, the list of the first <int> stabilising cosets
    is returned.
\item{--} If <int> $\< 0$, the list of pairs of the first <int> stabilising
    cosets, plus their representatives, is returned.
\item{--} If <int> = $0$, the list of pairs of all of the stabilising cosets,
    plus their representatives, is returned.
\endlist


\>ACEStandardTable( <aceobj> ) F

This function compacts and then standardises the table.
That is, for a given ordering of the generators in the columns of the
table, it produces a canonic table.
In such a table, a row-major scan encounters previously unseen cosets in
numeric order.

*GREG, WHAT DOES THE LAST SENTENCE MEAN???*

*Notes:*
In a canonic table, the coset representatives are in length plus (column
order) lexicographic order, and each is the minimum in this order.
Two tables are equivalent only if their canonic forms are the same.

*Guru Notes:*
In half of the ten standard enumeration strategies of Sims \cite{Sim},
the   table   is   standardised   repeatedly.    This   is   expensive
computationally, but can result  in fewer cosets being necessary.  The
effect of  doing this  can be investigated  in {\ACE}  by (repeatedly)
halting the enumeration, standardising the table, and continuing.

\>ACETraceWord( <aceobj>, <int>, <word> ) F

Traces <word> through the coset table, starting at coset number <int>,
and returns the final coset number if the trace completes,
and `fail' otherwise.


\>ACERandomCoincidences( <aceobj>, <index>[, <attempts> ) F

This function attempts  to  find  nontrivial subgroups  with  index  a
multiple  of the first  argument <index> by  repeatedly putting  random
cosets
coincident with coset \#1 and seeing what happens.  The starting coset
table  must  be non-empty,  but  need  not  be complete.   The  second
argument <attempts> puts  a limit on  the number of  attempts,
with a  default of
eight.    For   each  attempt,   we   repeatedly   add  random   coset
representatives  to the  subgroup and  redo the  enumeration.   If the
table becomes too small, the attempt is aborted, the original subgroup
generators  restored,  and  another   attempt  made.   If  an  attempt
succeeds, then the new set of subgroup generators is retained.

*Guru  Notes:*  A  coset  can  have  many  different  representatives.
Consider running  `st' before  `rc', to canonicise  the table  and the
representatives.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Examples}

\begintt
*GREG:

HERE I WANT EVENTUALLY TO INSERT MORE EXAMPLES USING THE INTERFACE,
THIS IS JUST THE ONE ALEXANDER HAD IN HIS FIRST SHORT DRAFT*
\endtt

The following example calls `ACE' for up to 800 cosets using
Mendelsohn style relator processing and sets the message level to 500
\begintt
gap> g:=PerfectGroup(2^5*60,2);;
gap> f:=FreeGeneratorsOfFpGroup(g);;
gap> CallACE(f,RelatorsOfFpGroup(g),f{[1]}:mendelsohn,max:=800,mess:=500);;
ACE 3.000        Fri Aug 20 16:05:01 1999
=========================================
Host information:
  name = muir
  #-- ACE 3.000: Run Parameters ---
Group Name: G;
Group Generators: abcdefg;
Group Relators: (c)^2, (d)^2, (e)^2, (f)^2, (g)^2, aag, (b)^3, (cd)^2, 
  (ef)^2, (ce)^2, (cf)^2, (de)^2, (df)^2, Acae, Adaf, Aeac, Afad, Bfbe, 
  gAga, gBgb, (gc)^2, (gd)^2, (ge)^2, (gf)^2, Bebfe, Bcbgfd, Bdbfedc, 
  (ab)^5;
Subgroup Name: H;
Subgroup Generators: a;
Wo:1000000; Max:500; Mess:500; Ti:-1; Ho:-1; Loop:0;
As:0; Path:0; Row:1; Mend:1; No:28; Look:0; Com:10;
C:0; R:0; Fi:13; PMod:3; PSiz:256; DMod:4; DSiz:1000;
  #--------------------------------
SG: a=1 r=1 h=1 n=2; l=1 c=+0.00; m=1 t=1
RD: a=321 r=68 h=1 n=412; l=5 c=+0.00; m=327 t=411
CL: a=302 r=107 h=1 n=501; l=7 c=+0.01; m=327 t=500
DD: a=302 r=107 h=1 n=501; l=8 c=+0.00; d=386
CO: a=302 r=83 h=139 n=303; l=9 c=+0.01; m=327 t=500
DD: a=379 r=101 h=237 n=388; l=11 c=+0.00; d=3
DD: a=456 r=101 h=266 n=465; l=11 c=+0.00; d=5
INDEX = 480 (a=480 r=101 h=489 n=489; l=12 c=0.02; m=480 t=686)
\endtt

If `ACE' is made the standard coset enumerator the same method of passing
arguments may be used with all other commands and will affect coset
enumerations. As an example we use the `ACE' enumerator to compute the
permutation representation of a perfect group from the data library:

\begintt
gap> TCENUM:=ACETCENUM;;
gap> PerfectGroup(IsPermGroup,16*60,1:max:=50,mess);
gap> PerfectGroup(IsPermGroup,16*60,1:max:=50,mess);
ACE 3.000        Fri Aug 20 16:06:16 1999
=========================================
Host information:
  name = muir
INDEX = 16 (a=16 r=36 h=1 n=36; l=3 c=0.00; m=30 t=35)
A5 2^4
\endtt

(If you run the examples time, machine name or the version number of the
binary might differ.)


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%E

