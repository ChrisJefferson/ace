%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%W  ace.tex                ACE documentation             Alexander Hulpke
%W                                                      Joachim Neub"user
%W                                                            Greg Gamble
%%
%H  $Id$
%%
%Y  Copyright (C) 2000  Centre for Discrete Mathematics and Computing
%Y                      Department of Computer Science & Electrical Eng.
%Y                      University of Queensland, Australia.
%%

\def\ACE{{\sf ACE}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{The ACE Share Package}

The \lq{}Advanced Coset Enumerator' {\ACE}:

\begintt
ACE coset enumerator (C) 1995-1999 by George Havas and Colin Ramsay
    http://www.csee.uq.edu.au/~havas/ace3.tar.gz
\endtt

can  be called  from within  {\GAP} through  an interface,  written by
Alexander Hulpke and Greg Gamble, which is described in this manual.

The interface links to an external binary and therefore is only usable
under UNIX (see Section~"Installing the ACE Share Package" for how  to
install {\ACE}).  It will not work  on  Windows  or the Macintosh.  It
requires {\GAP}~4.2.

{\ACE} can be used through this interface in a variety  of  ways:

\beginlist

\item{--} one may supplant the  usual  {\GAP}  coset  enumerator  (see
Section~"Using ACE as a Default for Coset Enumerations"),

\item{--}  one  may  generate  a  coset  table  using  {\ACE}  without
redefining the usual {\GAP} coset enumerator (see  Section~"Using  ACE
Directly to Generate a Coset Table"),

\item{--} one  may  simply  test  whether  a  coset  enumeration  will
terminate (see Section~"Using ACE Directly to  Test  whether  a  Coset
Enumeration Terminates"),

\item{--} one may  use  {\GAP}  to  write  a  script  for  the  {\ACE}
standalone  (see  Section~"Writing  ACE  Standalone  Input  Files   to
Generate a Coset Table"), and

\item{--} one may interact with  the  {\ACE}  standalone  from  within
{\GAP} (see Section~"Using ACE Interactively").  Among  other  things,
the   interactive   {\ACE}   interface   functions    (described    in
Chapter~"Functions for Using ACE Interactively") enable  the  user  to
search for subgroups of a group (see the note  of  Section~"Using  ACE
Interactively").

\endlist

Each of these ways gives the user access to a welter of options, which
are discussed in full  in  Chapters~"Options  for  ACE"  and~"Strategy
Options for ACE".

*Note*: Some care needs to be taken with  options;  be  sure  to  read
Section~"General Warnings  regarding  the  Use  of  Options"  and  the
introductory sections of Chapter~"Options for ACE" for  some  warnings
regarding them and a general discussion of their use, before using any
of the functions provided by this interface to the {\ACE} binary.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Using ACE as a Default for Coset Enumerations}

After loading  {\ACE}   (see Section~"Loading the ACE Share Package"),
if you  want to use the {\ACE}  coset enumerator as a  default for all
coset  enumerations  done  by   {\GAP}  (which  may  also  get  called
indirectly),  you can  achieve  this by  setting  the global  variable
`TCENUM' to `ACETCENUM'.

\beginexample
gap> TCENUM:=ACETCENUM;;
\endexample

This    sets    the    function    `CosetTableFromGensAndRels'    (see
Section~"ref:Coset  Tables  and  Coset  Enumeration"  in  the   {\GAP}
Reference Manual) to be  the  function  `ACECosetTableFromGensAndRels'
(described in Section~"Using ACE Directly to Generate a Coset Table"),
which then can be called with all the options defined for  the  {\ACE}
interface, not just the options `max' and `silent'. If `TCENUM' is set
to `ACETCENUM' without any  further  action,  the  `default'  strategy
(option) of the {\ACE} enumerator will be used (see  Chapter~"Strategy
Options for ACE").

You can switch back to the coset  enumerator  built  into  the  {\GAP}
library by assigning `TCENUM' to `GAPTCENUM'.

\beginexample
gap> TCENUM:=GAPTCENUM;;
\endexample

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Using ACE Directly to Generate a Coset Table}

If, on the other hand you do not want to set up  {\ACE}  globally  for
your coset enumerations, you may call the {\ACE}  interface  directly,
which will allow you to decide for yourself, for each such call, which
options you want to use for running {\ACE}. Please note  the  warnings
regarding options in Section~"General Warnings regarding  the  Use  of
Options". The functions discussed in this and  the  following  section
(`ACECosetTableFromGensAndRels' and `ACEStats')  are  non-interactive,
i.e.~by their use, a file with your  input  data  in  {\ACE}  readable
format will be handed to {\ACE} and you will get the  answer  back  in
{\GAP} format. At that moment however the {\ACE}  job  is  terminated,
that is, you cannot send any further questions or requests  about  the
result of that job to {\ACE}. For an interactive use  of  {\ACE}  from
{\GAP} see Section~"Using ACE  Interactively"  and  Chapter~"Functions
for Using ACE Interactively".

\beginitems

Using the {\ACE} interface directly to generate a coset table is  done
by either of

\>ACECosetTableFromGensAndRels( <fgens>, <rels>, <sgens> [: <options>] ) F
\>ACECosetTable( <fgens>, <rels>, <sgens> [: <options>] ) F

Here <fgens> is a list of free generators, <rels> a list of  words  in
these generators giving relators for a finitely presented  group,  and
<sgens> the list of subgroup generators, again expressed as  words  in
the free generators. All these are given in the standard {\GAP} format
(see Chapter~"ref:Finitely Presented Groups" of the  {\GAP}  Reference
Manual). Note that `ACECosetTable' may be called with 0 or 1 arguments
after  a  call  to  `ACEStart',  in  which  case  it  is  being   used
interactively   (see    Section~"Using    ACE    Interactively"    and
Chapter~"Functions for Using ACE Interactively").

Behind the colon any  selection  of  the  options  available  for  the
interface (see Chapters~"Options for ACE"  and~"Strategy  Options  for
ACE") can be given, separated by commas like record components.  These
can be used e.g.~to preset limits of space and time  to  be  used,  to
modify input and output and to modify the enumeration procedure.  Note
that strategies are simply special options that set a  number  of  the
options, detailed in Chapter~"Options for ACE", all at once.

Please see Section~"General Warnings regarding the Use of Options" for
a discussion regarding global and local passing of  options,  and  the
non-orthogonal nature of {\ACE}'s options.

The function calls the {\ACE} binary and  returns  the  (standardized)
coset table obtained.

The example given  below  is  the  call  for  a  presentation  of  the
Fibonacci group F(2,7) for  which  we  shall  discuss  the  impact  of
various options in Appendix~"Examples". Observe that  in  the  example
below, no options  are  passed,  which  means  that  {\ACE}  uses  the
`default' strategy (see Chapter~"Strategy Options for ACE").

\beginexample
gap> F:= FreeGroup( "a", "b", "c", "d", "e", "x", "y");;
gap> a:= F.1;; b:= F.2;; c:= F.3;; d:= F.4;; e:= F.5;; x:= F.6;; y:= F.7;;
gap> fgens:= [a, b, c, d, e, x, y,];;
yap> rels:= [ a*b*c^-1, b*c*d^-1, c*d*e^-1, d*e*x^-1, 
>             e*x*y^-1, x*y*a^-1, y*a*b^-1];;
gap> ACECosetTable(fgens, rels, [c]);;
\endexample

In computing  the  coset  table,  `ACECosetTableFromGensAndRels'  must
first do a coset enumeration (which is where {\ACE} comes in!). If the
coset  enumeration  does  not  finish   in   the   preset   limits   a
`break'-loop{\undoquotes\atindex{break-loop}{@`break'-loop}}        is
entered, unless the `silent' option (see~"Option `silent'") is set, in
which case it returns `fail'. In the  event  that  a  `break'-loop  is
entered, don't despair or  be  frightened  by  the  word  `Error';  by
tweaking  {\ACE}'s  options  via  the  `SetACEOptions'  function  that
becomes available in the `break'-loop and then typing `return;' it may
be possible to help {\ACE} complete the coset enumeration  (and  hence
successfully compute the coset table); if not, you will end up in  the
`break'-loop again, and you can have another go (or `quit;' if  you've
had enough). The `SetACEOptions' function is a  no-argument  function;
it's there *purely* to pass *options* (which, of  course,  are  listed
behind a colon (`:') with record components  syntax).  Let's  continue
the Fibonacci example above, redoing the last  command  but  with  the
option `max := 2' (see~"Option `max'"), so that the coset  enumeration
has only two coset numbers to play with and hence is bound to fail  to
complete, putting us in a `break'-loop.

\beginexample
gap> ACECosetTable(fgens, rels, [c] : max := 2);
Error : No coset table ... at
Error( ": No coset table ..." );
#I  The `ACE' coset enumeration failed with the result:
#I  OVERFLOW (a=2 r=1 h=1 n=3; l=5 c=0.00; m=2 t=2)
#I  Try relaxing any restrictive options:
#I  type: 'DisplayACEOptions();' to see current ACE options;
#I  type: 'SetACEOptions(:<option1> := <value1>, ...);'
#I  to set <option1> to <value1> etc.
#I  (i.e. pass options after the ':' in the usual way)
#I  ... and then, type: 'return;' to continue.
#I  Otherwise, type: 'quit;' to quit the enumeration.
Entering break read-eval-print loop, you can 'quit;' to quit to outer loop,
or you can return to continue
brk> SetACEOptions(: max := 0);
brk> return;
[ [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], 
  [ 1 ], [ 1 ], [ 1 ], [ 1 ] ]
gap>
\endexample

Observe how the `Info' lines (the  ones  starting  with  \lq{}`\#I '')
tell you *exactly* what to do. At the `break'-loop  prompt  `brk>'  we
relaxed all restrictions on `max' (by re-setting it to  0)  and  typed
`return;' to leave the `break'-loop. The coset  enumeration  was  then
successful, allowing the computation  of  what  turned  out  to  be  a
trivial coset table. Despite the fact that the  eventual  coset  table
only has one line (i.e.~there is  exactly  one  coset  number)  {\ACE}
*did* need to define more than 2 coset numbers. To find out  just  how
many  were  required  before  the  final  collapse,  let's   set   the
`InfoLevel' of `InfoACE' (see~"SetInfoACELevel") to  2,  so  that  the
{\ACE} enumeration result is printed.

\beginexample
gap> SetInfoACELevel(2);
gap> ACECosetTable(fgens, rels, [c]);
#I  INDEX = 1 (a=1 r=2 h=2 n=2; l=6 c=0.01; m=2049 t=3127)
[ [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], 
  [ 1 ], [ 1 ], [ 1 ], [ 1 ] ]
\endexample

The enumeration result line is the `Info' line beginning \lq{}`\#I ''.
Appendix~"The Meanings of  ACE's  Output  Messages"  explains  how  to
interpret such output messages from {\ACE}. In particular, it explains
that `t=3127' tells us that a `t'otal number  of  3127  coset  numbers
needed to be defined before the final  collapse  to  1  coset  number.
Using some of the many options that {\ACE} provides, one  may  achieve
this  result  more  efficiently,  e.g.~with   the   `purec'   strategy
(see~"Option `purec'"):

\beginexample
gap> ACECosetTable(fgens, rels, [c] : purec);
#I  INDEX = 1 (a=1 r=2 h=2 n=2; l=4 c=0.00; m=332 t=332)
[ [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], [ 1 ], 
  [ 1 ], [ 1 ], [ 1 ], [ 1 ] ]
\endexample

{\ACE} needs to define a `t'otal number of only  (relatively-speaking)
332 coset numbers before the final collapse to 1 coset number.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Using ACE  Directly  to  Test  whether  a  Coset  Enumeration
Terminates}

\beginitems

If you only want to  test, whether a coset enumeration terminates, and
don't want to  transfer the whole coset table  to {\GAP}, you can call

\>ACEStats( <fgens>, <rels>, <sgens> [: <options>] ) F

which returns a record `rec(index=<i>, cputime=<c>, cputimeUnits=<cu>,
activecosets=<a>, maxcosets=<m>, totcosets=<t>)' for which <i> is  the
index of the subgroup $\langle <sgens> \rangle$  in  $\langle  <fgens>
\mid <rels> \rangle$  (or  $0$,  whenever  the  enumeration  does  not
succeed); <c> is the total CPU time used as  an  integer;  <cu>  is  a
string representing the units of <c>, e.g.~`"10^-2 seconds"';  <a>  is
the number of currently active  coset  numbers;  <m>  is  the  maximum
number  of  \lq{}alive'  coset  numbers  at  any  one  time   in   the
enumeration; and <t> is the total number of coset  numbers  that  were
defined in the enumeration. Options (see  Chapters~"Options  for  ACE"
and~"Strategy Options for ACE") are used in exactly the  same  way  as
for `ACECosetTableFromGensAndRels', discussed in the previous section;
and the same warnings alluded to previously,  regarding  options  (see
Section~"General Warnings regarding the Use of Options"), apply.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Writing ACE Standalone Input Files to Generate a Coset Table}

If you want to use ACE as a standalone with its own  syntax,  you  can
write a {\GAP} input and can use `ACECosetTable' with three  arguments
(see "ACECosetTableFromGensAndRels")  and  the  option  `aceinfile  :=
<filename>' (see~"Option `aceinfile'"). This will keep the input  file
for the {\ACE} standalone produced by the {\GAP} interface  under  the
file name <filename>  (and  just  return)  so  that  you  can  perform
interactive work in the standalone.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Using ACE Interactively}

\beginitems

An interactive {\ACE} process is initiated with the command

\>ACEStart( <fgens>, <rels>, <sgens> [:<options>] ) F

whose    arguments    and    options    are     exactly     as     for
`ACECosetTableFromGensAndRels'  and  `ACEStats',   as   discussed   in
Sections~"Using ACE Directly to Generate a Coset Table" and~"Using ACE
Directly to Test whether a Coset Enumeration  Terminates".  The  usual
warnings  regarding  options  apply  (see  Section~"General   Warnings
regarding the Use of Options").

The return value is an integer (numbering from 1) which represents the
running process. (It is possible to have  more  than  one  interactive
process running at once.) The integer returned may be  used  to  index
which of these  processes  an  interactive  function  {\ACE}  function
should be applied to.

An interactive{\ACE} process is terminated with the command

\>ACEQuit( <i> ) F

where <i> is the integer returned by `ACEStart' when the  process  was
begun.

We discuss each of these commands, as well as the range  of  functions
which enable one to access  features  of  the  {\ACE}  standalone  not
available non-interactively, in depth in Chapter~"Functions for  Using
ACE interactively".

\enditems

*Note:*

{\ACE} not only allows one to do a coset enumeration of a group  by  a
given (and then fixed) subgroup but it also allows one to  search  for
subgroups by starting from a given one (possibly the trivial subgroup)
and then augmenting  it  by  adding  new  subgroup  generators  either
explicitly               via                `ACEAddSubgroupGenerators'
(see~"ACEAddSubgroupGenerators")   or   implicitly   by    introducing
*coincidences*\index{coincidences}     (see     `ACECosetCoincidence':
"ACECosetCoincidence",           or           `ACERandomCoincidences':
"ACERandomCoincidences");  or  one  can  find  smaller  subgroups   by
deleting   subgroup   generators   via   `ACEDeleteSubgroupGenerators'
(see~"ACEDeleteSubgroupGenerators").

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Accessing ACE Examples with ACEExample}

\beginitems

There are a number of examples available in the `examples'  directory,
which may be accessed via

\>ACEExample() F
\>ACEExample( <examplename> [:<options>] ) F
\>ACEExample( <examplename>, <ACEfunc> [:<options>] ) F

where  <examplename>  is  a  string,  the  name  of  an  example  (and
corresponding file in the `examples' directory); and <ACEfunc> is  the
{\ACE} function with which the example is to be executed. 

If `ACEExample' is called with no arguments,  or  with  the  argument:
`"index"', or with a non-existent example name, an index of  available
examples is displayed.

By default, examples are executed via  `ACECosetTableFromGensAndRels'.
However, if `ACEExample' is called with a second argument (choose from
the (other) alternatives: `ACEStats', or `ACEStart'), the  example  is
executed using that function, instead. Note that,  whereas  the  first
argument appears in double quotes (since it's a  string),  the  second
argument does not (since it's a function).

`ACEExample' also accepts user options, which  may  be  passed  either
globally  (i.e.~by  using  `PushOptions'  to  push   them   onto   the
`OptionsStack') or locally  behind  a  colon  after  the  `ACEExample'
arguments, and they are passed  to  `ACECosetTableFromGensAndRels'  or
<ACEfunc> as if they  were  *appended*  to  the  existing  options  of
<examplename>; in this way, the user may *over-ride* any or all of the
options  of  <examplename>.  This  is  done  by  passing   an   option
`aceexampleoptions' (see~"Option `aceexampleoptions'"), which sets  up
a mechanism to reverse the usual order in which options of recursively
called functions  are  pushed  onto  the  `OptionsStack'.  The  option
`aceexampleoptions' is *not* a user option; it is  intended  only  for
*internal* use by `ACEExample', for the above purpose. In the  portion
of the output due to the `echo' option, if one has passed  options  to
`ACEExample', one will see `aceexampleoptions' listed  first  and  the
result  of  the  interaction  of  <examplename>'s  options   and   the
additional options.

Consider the example `"A5"'. The effect of running

\beginexample
gap> ACEExample("A5", ACEStats);
\endexample

is essentially equivalent to executing:

\beginexample
file := Filename(DirectoriesPackageLibrary("ace", "examples"), "A5");
ACEfunc := ACEStats;
ReadAsFunction(file)();
\endexample

except that  some  internal  \lq{}magic'  of  `ACEExample'  edits  the
example file and  displays  equivalent  commands  a  user  \lq{}would'
execute. If the user has passed options to `ACEExample'  these  appear
in a \lq{}`\# User Options'' block after the original options  of  the
example in the `Info' portion of the output.  By  comparing  with  the
portion of the output from the `echo'  option  (unless  the  user  has
over-ridden the `echo' option), the  user  may  directly  observe  any
over-riding effects of user-passed options.

Please see Section~"Fun with ACEExample" for some sample  interactions
with `ACEExample'.

*Notes*

Most examples use the `mess'  ($=  `messages'$)  option.  To  see  the
effect of this, it is recommended to do: `SetInfoACELevel(3);'  before
calling `ACEExample', with an example.

The coset table output from `ACEExample', when called with many of the
examples     and     with     the     default     {\ACE}      function
`ACECosetTableFromGensAndRels' is often quite long.  Recall  that  the
output may be suppressed by following the (`ACEExample') command  with
a double semicolon (`;;').

Also, try `SetInfoACELevel(2);' before  calling `ACEExample', with  an
example.

If you unexpectedly observe `aceexampleoptions' in your  output,  then
most probably you have unintentionally passed options  by  the  global
method, by having a non-empty `OptionsStack'. One possible  remedy  is
to use `FlushOptionsStack();' (see~"FlushOptionsStack"), before trying
your `ACEExample' call again.

As discussed in Section~"Interpretation  of  ACE  Options",  there  is
generally no sensible meaning that can  be  attributed  to  setting  a
strategy option (see Chapter~"Strategy Options for ACE")  to  `false';
if you wish to nullify the effect of a strategy option,  pass  another
strategy option,  e.g.~pass  the  `default'  (see~"Option  `default'")
strategy option.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{General Warnings regarding the Use of Options}
Firstly, let us mention that an {\ACE} strategy is  merely  a  special
option of {\ACE} that sets  a  number  of  the  options  described  in
Chapter~"Options for ACE" all at once.

\beginitems

One can set options globally using  the  function  `PushOptions'  (see
Chapter~"ref:Options Stack" in the {\GAP} Reference  Manual);  options
pushed onto `OptionsStack' this way, remain there  until  an  explicit
`PopOptions()' call is made. However, the usual way to pass options is
behind a colon following a  function's  arguments  (see  "ref:Function
Calls" in the {\GAP} Reference Manual, or for an example refer to  the
function               `ACECosetTableFromGensAndRels'               in
Section~"ACECosetTableFromGensAndRels"); options passed this  way  are
local, and  disappear  from  `OptionsStack'  after  the  function  has
executed successfully. Beware, however the function will see any other
options on the `OptionsStack' (in particular,  any  pushed  there  via
`PushOptions', prior to the function call), unless over-ridden  by  an
option passed via the function. Also note that duplication  of  option
names for different programs may lead to misinterpretations.  You  can
use `DisplayOptionsStack'  (see  Chapter~"ref:DisplayOptionsStack"  in
the {\GAP} Reference Manual) to ensure that there is no  such  danger.
However, considering how much of a potential  mine-field  a  non-empty
`OptionsStack' might be for the unwary user, we provide

\>FlushOptionsStack()

which simply executes `PopOptions()' until `OptionsStack' is empty.

\enditems

It  is  important  to  realize  that  {\ACE}'s   options   (even   the
non-strategy options) are not orthogonal, i.e.\  the  order  in  which
they are put to {\ACE} can be important. For this reason, except for a
few options that have no effect on the course of an  enumeration,  the
order in which options are passed to the {\ACE} interface is preserved
when those same options are passed to the  {\ACE}  binary.  Also  note
that except for limitations  imposed  by  {\GAP}  e.g.\  clashes  with
{\GAP} keywords and blank spaces not allowed in keywords, the  options
of the {\ACE} interface are the  same  as  for  the  binary;  so,  for
example, the options can appear in upper or  lower  case  (or  indeed,
mixed case) and most may be abbreviated. Note that  any  options  that
the {\ACE} binary doesn't understand are simply ignored and a  warning
appears in the {\ACE} output. If this occurs, you may  wish  to  check
the input fed to {\ACE} and the output from {\ACE}, which when  {\ACE}
is run non-interactively are stored in files whose full path names are
recorded in the record fields `ACEData.infile' and  `ACEData.outfile',
respectively. Alternatively, both interactively and  non-interactively
one can set the `InfoLevel' of `InfoACE' to 3 (see~"SetInfoACELevel"),
to see the output from {\ACE}, or  to  4  to  also  see  the  commands
directed to {\ACE}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{The ACEData Record}

Essential data for an {\ACE} session within {\GAP} is  stored  in  the
`ACEData'{\undoquotes\atindex{ACEData}{@`ACEData'   record}}   record,
whose fields are:

\beginitems

\quad`binary' & the path of the {\ACE} binary;

\quad`tmpdir' & the path of the  temporary  directory  containing  the
non-interactive {\ACE} input and output files;

\quad`io'     & list  of  data  records  for  `ACEStart'   (see  below 
and~"ACEStart") processes;

\quad`infile' & the full path of the  (non-interactive)  {\ACE}  input
file;

\quad`outfile'& the full path of the (non-interactive)  {\ACE}  output
file; and

\quad`version'& the version of the current {\ACE} binary.

\enditems

Each time an interactive {\ACE} process is  initiated  via  `ACEStart'
(see~"ACEStart"), an identifying number <ioIndex> is generated for the
interactive process and  a  record  `ACEData.io[<ioIndex>]'  with  the
following fields is created:

\beginitems

\quad`args'   & a record with fields: `fgens', `rels',  `sgens'  whose
values  are  the  corresponding   arguments   passed   originally   to
`ACEStart';

\quad`options'& the current options record of the interactive process;

\quad`acegens'& a list of strings representing the generators used  by
{\ACE} (if the names of the generators passed via the  first  argument
<fgens> of `ACEStart' were all lowercase alphabetic  characters,  then
`acegens' is the `String' equivalent of <fgens>,  i.e.~`acegens[1]   =
String(<fgens>[1])' etc.);

\quad`stream' & the IOStream opened for an interactive {\ACE}  process
initiated via `ACEStart'; and

\quad`enumResult' 
              & the enumeration result (string) without  the  trailing
newline, output from {\ACE};

\quad`stats'  & a record as output by the function `ACEStats'.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Setting the Verbosity of ACE via Info and InfoACE}

\beginitems

The output of the {\ACE} binary is, by default, not displayed. However
the user may choose to see some, or all, of this output. This is  done
via the `Info' mechanism  (see  Chapter~"ref:Info  Functions"  in  the
{\GAP} Reference Manual). For this purpose, there is  the  <InfoClass>
`InfoACE'. Each line of output from {\ACE} is directed to  a  call  to
`Info' and will be displayed for the user to see if the `InfoLevel' of
`InfoACE' is high enough. By default, the `InfoLevel' of `InfoACE'  is
1, and it is recommended that you leave it at this level,  or  higher.
Only messages which we think that the user will really want to see are
directed to `Info' at `InfoACE' level 1. To turn off  *all*  `InfoACE'
messaging, set the `InfoACE' level to 0  (see~"SetInfoACELevel").  For
convenience, we provide the function

\>InfoACELevel()

which returns the current `InfoLevel' of `InfoACE' (i.e.~it is  simply
a shorthand for `InfoLevel(InfoACE)'.

To set the `InfoLevel' of `InfoACE' we also provide

\>SetInfoACELevel( <level> )
\>SetInfoACELevel()

which for a non-negative integer  <level>,  sets  the  `InfoLevel'  of
`InfoACE'    to    <level>    (i.e.~it    is    a    shorthand     for
`SetInfoLevel(InfoACE, <level>)'),  or  with  no  arguments  sets  the
`InfoACE' level to the default value 1.  Currently,  information  from
{\ACE} is directed to `Info' at four `InfoACE' levels: 1, 2, 3 and  4.
The command

\begintt
gap> SetInfoACELevel(2);
\endtt

enables the display of the results line of an enumeration from {\ACE},
whereas

\begintt
gap> SetInfoACELevel(3);
\endtt

enables the display of all of  the  output  from  {\ACE},  except  the
{\ACE} banner (including the host machine information); in particular,
the progress messages, emitted by {\ACE} when  the  `messages'  option
(see~"Option  `messages'")  is  set  to  a  non-zero  value,  will  be
displayed via `Info'. Finally,

\begintt
gap> SetInfoACELevel(4);
\endtt

enables the display of all the input  directed  to  {\ACE}  (behind  a
\lq{}`ToACE> '' prompt, so you can distinguish it from  other  output)
and, interactively, the {\ACE}  banner  (including  the  host  machine
information). The `InfoACE' level of 4 is really  for  gurus  who  are
familiar with the {\ACE} standalone.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Acknowledgement}

Large parts of this manual,  in  particular  the  description  of  the
options for running {\ACE}, are directly copied  from  the  respective
description in the manual~\cite{Ram99} for the standalone  version  of
{\ACE} by Colin Ramsay.  Most  of  the  examples,  in  the  `examples'
directory, and accessed  via  the  `ACEExample'  function  are  direct
translations  of  Colin  Ramsay's `test\#\#\#.in' files  in  the `src'
directory.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Changes from earlier versions}

A function, some options and a data record variable have been changed
from older versions of the {\ACE} Share Package:

\beginlist

\item{--} Function   `CallACE'{\undoquotes\atindex{CallACE}{@`CallACE'
(deprecated: use  `ACECosetTableFromGensAndRels')}}  (deprecated:  use
`ACECosetTable' or `ACECosetTableFromGensAndRels').

\item{--} Option    `outfile'{\undoquotes\atindex{Option    `outfile'}
{@option `outfile' (deprecated: use  `aceinfile')}}  (deprecated:  use
`aceinfile').

\item{--} Option    `messfile'{\undoquotes\atindex{Option  `messfile'}
{@option `messfile' (deprecated: use `aceoutfile')}} (deprecated:  use
`aceoutfile').

\item{--} Data      record      `ACEinfo'{\undoquotes\atindex{ACEinfo}
{@`ACEinfo' (deprecated: old name for `ACEData' record)}} (deprecated:
old name for `ACEData' record). This change was made because there  is
now a new `InfoClass': `InfoACE' (and it was  too  confusing  to  have
both it and `ACEinfo'!)

\endlist

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Installing and Loading the ACE Share Package}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Installing the ACE Share Package}

To install, unpack the archive file as a sub-directory  in  the  `pkg'
hierarchy of your version  of  {\GAP}~4.  (This  might  be  the  `pkg'
directory of the {\GAP}~4 home directory; it is however also  possible
to keep an additional `pkg' directory in your private directories, see
Section~"ref:Installing Share  Packages"  of  the  {\GAP}~4  Reference
Manual for details on how to do this.) Go to the newly  created  `ace'
directory and call `./configure <path>' where <path> is  the  path  to
the {\GAP} home directory. So for example if you install  the  package
in the main `pkg' directory call

\begintt
./configure ../..
\endtt

This  will fetch  the  architecture  type for  which  {\GAP} has  been
compiled last and create a `Makefile'. Now simply call

\begintt
make
\endtt

to compile the binary and to install it in the appropriate place.

Note that the  current version of the configuration  process only sets
up  directory paths.  If you  need a  different compiler  or different
compiler options, you need  to edit `src/Makefile.in' prior to calling
`make' yourself.

If you use this installation of {\GAP} on different hardware platforms
you will have to compile the binary for each platform separately. This
is  done  by calling  `configure'  and  `make'  for the  package  anew
immediately   after  compiling  {\GAP}   itself  for   the  respective
architecture.  If your version of  {\GAP} is already compiled (and has
last  been compiled  on  the same  architecture)  you do  not need  to
compile {\GAP} again, it is  sufficient to call the `configure' script
in the {\GAP} home directory.

The manual you are currently reading describes how to use  the  {\ACE}
Share Package; it can be  found  in  the  `doc'  subdirectory  of  the
package. If your manual does not have a table of contents or index, or
has these but with invalid page numbers please re-generate the  manual
by executing

\begintt
./make_doc
\endtt

in the `doc' subdirectory.

The  subdirectory  `standalone-doc'  contains the  file  `ace3001.dvi'
which holds a version of the user manual for the {\ACE} standalone; it
forms part of~\cite{Ram99}).  You  should consult it if  you are going
to  switch to  the {\ACE}  standalone, e.g.~in  order to  directly use
interactive facilities.

The  `src' subdirectory  contains a  copy  of the  original source  of
{\ACE}.  (The  only modification  is  that  a  file `Makefile.in'  was
obtained from  the different `make.xyz' and  will be used  to create a
`Makefile'.)  You  can replace  the source by  a newer  version before
compiling.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Loading the ACE Share Package}

To use the {\ACE} Share Package you have  to  request  it  explicitly.
This is done by calling

\beginexample
gap> RequirePackage( "ace" );
#I  Loading the ACE (Advanced Coset Enumerator) share package
#I           by George Havas <havas@csee.uq.edu.au> and
#I              Colin Ramsay <cram@csee.uq.edu.au>
#I                   ACE binary version: 3.000
true
\endexample

The      `RequirePackage'      command      is      described       in
Section~"ref:RequirePackage" in the {\GAP} Reference Manual.

If {\GAP} cannot find a working binary, the call  to  `RequirePackage'
will fail.

If you know you have a working {\ACE} binary, as well as  a  correctly
installed {\ACE} Share Package, it is possible to suppress the  `Info'
messages by temporarily setting the `InfoLevel' of `InfoWarning' to 0,
and a duplicated semicolon will suppress the `true' result:

\beginexample
gap> SetInfoLevel(InfoWarning, 0); RequirePackage(" ace ");;
gap> SetInfoLevel(InfoWarning, 1);
\endexample

If you want to load the {\ACE} package by default, you  can  put   the
`RequirePackage' command into your `.gaprc' file (see Section~"ref:The
.gaprc file" in the {\GAP} Reference Manual).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Some Basics}

Throughout this manual for  the  use  of  {\ACE}  as  a  {\GAP}  share
package, we shall assume that the reader already knows the basic ideas
of coset enumeration, as can be  found  for  example  in~\cite{Neu82}.
There, a simple proof is given for the fact that a  coset  enumeration
for a subgroup of finite index in  a  finitely  presented  group  must
eventually terminate with the correct result, provided the enumeration
process obeys a simple condition (Mendelsohn's  condition)  formulated
in Lemma~1 and Theorem~2 of~\cite{Neu82}. This basic condition  leaves
room for a great variety  of  *strategies*\index{strategy}  for  coset
enumeration; two \lq{}classical' ones have been known for a long  time
as the *Felsch  strategy*\atindex{Felsch  strategy}{@Felsch  strategy}
and  the  *HLT  strategy*\atindex{HLT  strategy}{@HLT  strategy}  (for
Haselgrove, Leech and Trotter). Extensive experimental studies on many
strategies can be found in~\cite{CDHW73}, \cite{Hav91},  \cite{HR99a},
and \cite{HR99b}, in particular.

A few basic points should be particularly understood:

\beginlist

\item{--} \lq{}Subgroup (generator) and relator tables' that are  used
in the description of coset enumeration in \cite{Neu82}, and to  which
we will also occasionally refer in this manual,  do  *not*  physically
exist in the implementation of coset  enumeration  in  {\ACE}.  For  a
terminology that is closer to the actual implementation  and  also  to
the  formulations  in  the  manual  for  the  {\ACE}  standalone   see
\cite{CDHW73} and \cite{Hav91}.

\item{--} Coset    enumeration    proceeds    by    defining    *coset
numbers*\index{coset   numbers}   that    really    denote    possible
representatives for cosets written as words in the generators  of  the
group. At the time of their generation it is not guaranteed  that  any
two of these words do indeed represent different cosets. The state  of
an enumeration at any time is stored in a 2-dimensional array known as
a *coset table*\index{coset table} whose rows  are  indexed  by  coset
numbers and whose columns are indexed  by  the  group  generators  and
their inverses. Entries of the coset table that are  not  yet  defined
are known as *holes*\index{holes} (typically they are filled  with  0,
i.e.~an invalid coset number).

\item{--} It is customary in  talking about coset enumeration to speak
of *cosets*\index{cosets} when really coset numbers are  meant.  While
we try to avoid  this  in  this  interface  manual,  in  certain  word
combinations such as *coset application*\index{coset  application}  we
will follow this custom.

\item{--} The   definition   of   a   coset   number   may   lead   to
*deductions*\index{deduction}  from  the  \lq{}closing  of   rows   in
subgroup  or  relator  tables'.  These  are  kept  in   a   *deduction
stack*\index{deduction stack}.

\item{--} Also   it  may  be  found  that  (different)  words  in  the
generators defining different coset numbers really  lie  in  the  same
coset    of    the    given    subgroup.    This    is    called     a
*coincidence*\index{coincidence}  and  will  eventually  lead  to  the
elimination of the  larger  of  the  two  coset  numbers.  Until  this
elimination has been performed pending  coincidences  are  kept  in  a
*queue of coincidences*\index{coincidence queue}.

\item{--} A definition that will actually close a row in a subgroup or
relator table will immediately yield twice  as  many  entries  in  the
coset  table  as  other  definitions.  Such  definitions  are   called
*preferred definitions*\index{preferred definitions},  the  places  in
rows of a subgroup or relator table that they close are also  referred
to as \lq{}gaps of length one' or minimal gaps. Such gaps can be found
at little extra cost when \lq{}relators are traced from a given  coset
number'. {\ACE} keeps a selection of them in a  *preferred  definition
stack*\index{preferred definition stack} for use  in  some  definition
strategies (see~\cite{Hav91}).

\endlist

It will also be necessary to understand some further basic features of
the  implementation and  the corresponding  terminology which  we will
explain in the sequel.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Enumeration  Style}

The first main decision for any coset enumeration is in which sequence
to make definitions. When a new coset number has  to  be  defined,  in
{\ACE} there are basically three possible methods to choose from:

\beginlist

\item{--} One may fill the next empty entry  in  the  coset  table  by
scanning from the left/top of the coset table towards the right/bottom
--  that  is,  in  order  row  by  row.  This   is   called   *C-style
definition*\atindex{C-style  definition}{@C-style   definition}   (for
*C*oset Table Based definition) of coset numbers. In fact a  procedure
needs to follow a method like this to some extent for the proofs  that
coset enumeration eventually terminates in the case  of  finite  index
(see~\cite{Neu82}).

\item{--} In *R-style definition*\atindex{R-style definition}{@R-style
definition} (for *R*elator Based definition) the order in which  coset
numbers are defined is explicitly prescribed by  the  order  in  which
rows of (the subgroup generator tables and)  the  relator  tables  are
filled by making definitions.

\item{--} One may choose  definitions  from  a  *Preferred  Definition
Stack*\index{preferred definition stack}. In this stack  possibilities
for definition of coset numbers are stored that will close  a  certain
row    of    a    relator    table.     Using     these     *preferred
definitions*\index{preferred definitions} is sometimes  also  referred
to as a *minimal gaps  strategy*\index{strategy,  minimal  gaps}.  The
idea of using these is that by closing a row in a relator table, thus,
one will immediately get a consequence.  We  will  come  back  to  the
obvious question of where one obtains this  \lq{}preferred  definition
stack'.

\endlist

The *enumeration style* is mainly determined by  the  balance  between
C-style definitions and R-style definitions, which  is  controlled  by
the values of the `ct' and `rt' options (see~"Option `ct'" and~"Option
`rt'").

However this still leaves us with plenty of freedom for the design  of
definition strategies, freedom which can,  for  example,  be  used  to
great advantage in Felsch-type strategies. Though it is  not  strictly
necessary,  before  embarking  on  further  enumeration,   Felsch-type
programs generally start off  by  ensuring  that  each  of  the  given
subgroup generators produces a cycle of coset numbers at coset  1.  To
explain the idea, an example may help. Suppose  $a,b$  are  the  group
generators and $w=Abab$ is a subgroup generator, where $A$  represents
the inverse of $a$; then to say that \lq{}$(1,i,j,k)$ is  a  cycle  of
coset numbers produced at coset 1 by $w$' means  that  the  successive
application  of  the  \lq{}letters'  $A,b,a,b$  of   $w$   takes   one
successively from coset 1, through cosets $i$, $j$ and $k$,  and  back
to coset 1, i.e.~$A$ applied to coset 1  results  in  coset  $i$,  $b$
applied to coset $i$ results in coset $j$, $a$ applied  to  coset  $j$
results in coset $k$, and finally $b$ applied to coset  $k$  takes  us
back to coset $1$. In this  way,  a  hypothetical  subgroup  table  is
filled first. The use of this and other  possibilities  leads  to  the
following table of *enumeration styles*.

% \begin{table}
% \hrule
% \caption{The styles}
% \label{tab:sty}
% \smallskip
% \renewcommand{\arraystretch}{0.875}
% \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}crrlc} 
% \hline\hline
% & \ttt{Rt} value & \ttt{Ct} value & style name & \\
% \hline
% & $<\!0$ & $<\!0$ & R/C & \\
% & $<\!0$ & $0$    & R*  & \\
% & $<\!0$ & $>\!0$ & Cr  & \\
% & $0$    & $<\!0$ & C   & \\
% & $0$    & $0$    & R/C (defaulted) & \\
% & $0$    & $>\!0$ & C  & \\
% & $>\!0$ & $<\!0$ & Rc & \\
% & $>\!0$ & $0$    & R  & \\
% & $>\!0$ & $>\!0$ & CR & \\
% \hline\hline
% \end{tabular*}
% \end{table}
\begintt
Rt value     Ct value     style name
-----------------------------------------

   0           >0         C
  <0           >0         Cr
  >0           >0         CR

  >0            0         R
  <0            0         R*
  >0           <0         Rc
  <0           <0         R/C
   0            0         R/C (defaulted)

-----------------------------------------
\endtt

In *C-style*\atindex{C-style}{@C-style} most definitions are  made  in
the next empty coset table slot and are (in principle) tested  in  all
essentially different  positions  in  the  relators;  i.e.~this  is  a
Felsch-like mode.

However in C-Style some definitions may be made following a  preferred
definition strategy, controlled by the  `pmode'  and  `psize'  options
(see~"Option `pmode'" and~"Option `psize'").

*Cr-style*\atindex{Cr-style}{@Cr-style} is like C-style except that  a
single R-style pass is done after the initial C-style pass.

In *CR-style*\atindex{CR-style}{@CR-style} alternate passes of C-style
and R-style are performed.

In *R-style*\atindex{R-style}{@R-style} all the definitions  are  made
via relator scans; i.e.~this is an HLT-like mode.

*R\*-style*\atindex{R\*-style}{@R\*-style} makes definitions the  same
as R-style, but tests all definitions as for C-style.

*Rc-style*\atindex{Rc-style}{@Rc-style} is like R-style, except that a
single C-style pass is done after the initial R-style pass.

In *R/C-style*\atindex{R/C-style}{@R/C-style} we run in R-style  until
an overflow, perform a lookahead on the entire table, and then  switch
to CR-style.

*Defaulted     R/C-style*\atindex{Defaulted      R/C-style}{@Defaulted
R/C-style} is the default style,  used  if  you  call  {\ACE}  without
specifying options. In it we use R/C-style with `ct' set to  1000  and
`rt' set to approximately $2000$ divided by the total  length  of  the
relators in an attempt to balance R and C definitions when  we  switch
to CR-style.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Finding Deductions, Coincidences, and Preferred Definitions} 

First, let us  broadly  discuss  strategies  and  how  they  influence
\lq{}definitions'.  By  *definition*\index{definition}  we  mean   the
allocation of a coset number. In a complete  coset  table  each  group
relator produces a cycle of cosets numbers at each  coset  number,  in
particular at coset 1, i.e.~for each relator $w$, and for  each  coset
number $i$, successive  application  of  the  letters  of  $w$,  trace
through a sequence of coset numbers that begins and ends in  $i$  (see
Section~"Enumeration Style" for an example). It has been found to be a
good general  rule  to  use  the  given  group  relators  as  subgroup
generators. This ensures the early definition  of  some  useful  coset
numbers, and is the  basis  of  the  `default'  strategy  (see~"Option
`default'").  The  number  of  group  relators  included  as  subgroup
generators is determined by the `no' option (see~"Option `no'").  Over
a wide range of examples the use of group relators  in  this  way  has
been shown to produce generally beneficial results  in  terms  of  the
maximum number of cosets numbers defined at any one time and the total
number of coset numbers defined.  In~\cite{CDHW73},  it  was  reported
that for  some  Macdonald  group  $G(\alpha,\beta)$  examples,  (pure)
Felsch-type strategies (that don't include the given group relators as
subgroup generators) e.g.~the  `felsch  :=  0'  strategy  (see~"Option
`felsch'") defined significantly  more  coset  numbers  than  HLT-type
(e.g.~the  `hlt'  strategy,  see~"Option   `hlt'")   strategies.   The
comparison of these strategies in  terms  of  total  number  of  coset
numbers defined, in~\cite{Hav91}, for the enumeration of the cosets of
a certain index 40 subgroup of the $G(3,21)$ Macdonald group  were  91
for HLT versus 16067 for a pure Felsch-type strategy. For  the  Felsch
strategy with the group relators included as subgroup  generators,  as
for the `felsch :=  1'  strategy  (see~"Option  `felsch'")  the  total
number of coset numbers defined reduced markedly to 59.

A *deduction*\index{deduction} occurs when the scanning of  a  relator
results in the assignment of a coset table  body  entry.  A  completed
table is only valid if every  table  entry  has  been  tested  in  all
essentially different positions in  all  relators.  This  testing  can
either be done directly (Felsch strategy) or via relator scanning (HLT
strategy). If it is done directly, then more than one deduction can be
waiting to be processed at any one time. The untested  deductions  are
stored in a stack. How this stack is  managed  is  determined  by  the
`dmode' option (see~"Option `dmode'"), and its size is  controlled  by
the `dsize' option (see~"Option `dsize'").

As already mentioned a *coincidence*\index{coincidence} occurs when it
is determined that two coset numbers in fact represent the same coset.
When this occurs  the  larger  coset  number  becomes  a  *dead  coset
number*\index{dead coset (number)} and the coincidence is placed in  a
queue. When and how these dead coset numbers are eventually eliminated
is  controlled  by  the  options  `dmode',  `path'  and   `compaction'
(see~"Option `dmode'", "Option `path'" and~"Option `compaction'"). The
user may  also  force  coincidences  to  occur  (see  Section~"Finding
Subgroups").

The key  to  performance  of  coset  enumeration  procedures  is  good
selection  of  the  next   coset   number   to   be   defined.   Leech
in~\cite{Lee77}  and~\cite{Lee84}  showed  how  a  number   of   coset
enumerations could be simplified by removing coset numbers  needlessly
defined by computer implementations. Human  enumerators  intelligently
choose which coset number should be defined next, based on  the  value
of each potential definition. In particular, definitions  which  close
relator cycles (or at least shorten gaps in cycles)  are  favoured.  A
definition which actually closes a relator  cycle  immediately  yields
twice as many table entries (deductions)  as  other  definitions.  The
value of the `pmode' option (see~"Option  `pmode'")  determines  which
definitions are *preferred*; if the value of  the  `pmode'  option  is
non-zero, depending on the `pmode' value, gaps  of  length  one  found
during relator scans in Felsch style  are  either  filled  immediately
(subject to the value of `fill') or noted in the *preferred definition
stack*\index{preferred definition  stack}.  The  preferred  definition
stack is implemented as a ring  of  size  determined  by  the  `psize'
option (see~"Option `psize'"). However, making  preferred  definitions
carelessly  can  violate  the  conditions  required   for   guaranteed
termination of the coset enumeration procedure in the case  of  finite
index. To avoid such a violation {\ACE}  ensures  a  fraction  of  the
coset table is filled before  a  preferred  definition  is  made;  the
reciprocal of this fraction, the `fill factor', is manipulated via the
`fill' option (see~"Option `fill'"). In~\cite{Hav91}, the  `felsch  :=
1' type enumeration of the cosets of the certain index 40 subgroup  of
the $G(3,21)$ Macdonald group was further improved to require a  total
number of coset numbers  of  just  43  by  incorporating  the  use  of
preferred definitions.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Finding Subgroups}

The  {\ACE}  Share  Package,  via  its  interactive  {\ACE}  interface
functions   (described   in   Chapter~"Functions   for    Using    ACE
Interactively"), provides the possibility of searching for  subgroups.
To do this one starts  at  a  known  subgroup  (possibly  the  trivial
subgroup). Then one may augment it by adding new  subgroup  generators
either        explicitly        via         `ACEAddSubgroupGenerators'
(see~"ACEAddSubgroupGenerators")   or   implicitly   by    introducing
*coincidences*\index{coincidences}     (see     `ACECosetCoincidence':
"ACECosetCoincidence",           or           `ACERandomCoincidences':
"ACERandomCoincidences"). Also, one may descend to  smaller  subgroups
by  deleting  subgroup  generators  via  `ACEDeleteSubgroupGenerators'
(see~"ACEDeleteSubgroupGenerators").

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Options for ACE}

{\ACE} offers a wide range of options to  direct  and  guide  a  coset
enumeration, most of which  are  available  from  {\GAP}  through  the
interface provided by the {\ACE} Share Package. We  describe  most  of
the options  available  via  the  interface  in  this  chapter;  other
options, termed strategies, are  defined  in  the  following  chapter.
Strategies are merely special options of {\ACE} that set a  number  of
options described in this chapter, all at once.

We begin this chapter with several sections discussing the  nature  of
the options provided. Please spend some time reading these sections.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Passing ACE Options}

Options are passed to the {\ACE} interface functions in either of the
two usual mechanisms provided by {\GAP}, namely:

\beginlist

\item{--} options may be set globally using the function `PushOptions'
(see Chapter~"ref:Options Stack" in the {\GAP} Reference  Manual); or

\item{--} options may be appended to the argument list of any function
call, separated by a colon from the argument list  (see  "ref:Function
Calls" in the {\GAP} Reference Manual), in which case  they  are  then
passed on recursively to any subsequent inner function call, which may
in turn have options of their own.

\endlist

In general, if {\ACE} is to be used  interactively  one  should  avoid
using the global method of passing options. In fact, it is recommended
that prior to calling `ACEStart' that the `OptionsStack' be empty.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Warnings regarding Options}

\beginitems

As mentioned above, one can set options globally  using  the  function
`PushOptions' (see Chapter~"ref:Options Stack" in the {\GAP} Reference
Manual); however, options pushed onto `OptionsStack' this way,  remain
there until an explicit `PopOptions()'  call  is  made.  In  contrast,
options passed in the usual way behind a colon following a  function's
arguments (see "ref:Function Calls" in the  {\GAP}  Reference  Manual)
are local, and disappear from `OptionsStack' after  the  function  has
executed successfully; nevertheless, a function  passed  options  this
way will also see any  global  options  or  any  options  passed  down
recursively from functions calling that function,  unless  over-ridden
by an option passed via the function. Also note  that  duplication  of
option names for different programs may  lead  to  misinterpretations.
Considering  how  much  of  a   potential   mine-field   a   non-empty
`OptionsStack' might be for the unwary user, we have provided

\>FlushOptionsStack()

which simply executes `PopOptions()' until `OptionsStack' is empty.

However, there will be situations where an {\ACE}  interface  function
needs to be told explicitly to ignore options passed down  recursively
to it from calling functions. For this purpose we  have  provided  the
options `aceignore' (see~"Option `aceignore'") and  `aceignoreunknown'
(see~"Option `aceignoreunknown'").

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Abbreviations and mixed case for ACE Options}

Except for limitations imposed by {\GAP}  e.g.\  clashes  with  {\GAP}
keywords and blank spaces not allowed in keywords, the options of  the
{\ACE} interface are the same as for the binary; so, for example,  the
options can appear in upper or lower case (or indeed, mixed case)  and
most may be abbreviated. Below we only list the options in  all  lower
case, and in their longest form; where  abbreviation  is  possible  we
give the shortest abbreviation in the  option's  description  e.g.~for
the `mendelsohn' option we state that  its  shortest  abbreviation  is
`mend', which means `mende', `mendel' etc.,  and  indeed,  `Mend'  and
`MeND', are all valid abbreviations of that option. Some options  have
synonyms e.g.~`cfactor' is an alternative for `ct'.

The complete list of {\ACE} options  known  to  the  {\ACE}  interface
functions, their abbreviations and the values that they are  known  to
take  may  be  gleaned  from   the   `KnownACEOptions'   record   (see
Section~"The KnownACEOptions Record").

Options      for      the       {\ACE}       interface       functions
`ACECosetTableFromGensAndRels',   `ACECosetTable',   `ACEStats'    and
`ACEStart' (see  Chapter~"Functions  for  Using  ACE  Interactively"),
comprise the few  non-{\ACE}-binary  options  (`silent',  `aceinfile',
`aceoutfile',   `aceignore',   `aceignoreunknown',    `acenowarnings',
`aceincomment',     `aceecho'     and     `echo')     discussed     in
Section "Non-ACE-binary  Options",  (almost)  all  single-word  {\ACE}
binary options and  `purer'  and  `purec'.  The  options  `purer'  and
`purec' give  the  {\ACE}  binary  options  `pure  r'  and  `pure  c',
respectively; (they are the only multiple-word {\ACE}  binary  options
that do not have a single word alternative).  The  *only*  single-word
{\ACE}  binary  options  that  are  *not*  available  via  the  {\ACE}
interface are abbreviations that clash with {\GAP} keywords (e.g.~`fi'
for `fill', and `rec' for `recover'). The detail of this paragraph  is
probably of little importance to the {\GAP} user; these comments  have
been included for the user who  wishes  to  reconcile  the  respective
functionalities of the {\ACE} interface and the {\ACE} standalone, and
are probably of most value to standalone users.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Honouring of the order in which ACE Options are passed}

It  is  important  to  realize  that  {\ACE}'s   options   (even   the
non-strategy options) are not orthogonal, i.e.\  the  order  in  which
they are put to {\ACE} can be important. For this reason, except for a
few options that have no effect on the course of an  enumeration,  the
order in which options are passed to the {\ACE} interface is preserved
when those same options are passed to the {\ACE} binary.  One  of  the
reasons for the non-orthogonality of options is to  protect  the  user
from obtaining invalid enumerations from bad combinations of  options;
another reason is that commonly one may specify a strategy option  and
override some of that strategies defaults; the general  rule  is  that
the later option prevails. By the way, it's not illegal to select more
than one strategy, but it's not sensible; as just mentioned, the later
one prevails.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{What happens if no ACE Strategy Option or if no ACE Option is
passed}

If  an  {\ACE}  interface  function   (`ACECosetTableFromGensAndRels',
`ACEStats',  `ACECosetTable'  or  `ACEStart')  is  given  no  strategy
option, the `default'  strategy  (see  Chapter~"Strategy  Options  for
ACE") is selected, and a number of options that {\ACE} needs to have a
value for are given default values, *prior* to the  execution  of  any
user options, if any. This ensures that {\ACE} has a value for all its
\lq{}run parameters'; three of  these  are  defined  from  the  {\ACE}
interface function arguments; and the remaining \lq{}run  parameters',
we denote by \lq{}{\ACE} Parameter Options'. For user convenience,  we
have  provided  the  `ACEParameterOptions'  record  (see  Section~"ACE
Parameter Options"), the fields of which are the \lq{}{\ACE} Parameter
Options'.   The   value   of    each    field    (option)    of    the
`ACEParameterOptions' record is either a default value or (in the case
of an option that is set by a strategy) a  record  of  default  values
that {\ACE} assumes when the user does not  define  a  value  for  the
option (either indirectly by selecting a strategy option or directly).

If the `default' strategy does not suffice, most usually a  user  will
select one of the other strategies  from  among  the  ones  listed  in
Chapter~"Strategy Options for ACE", and possibly modify  some  of  the
options by selecting from  the  options  in  this  chapter.  It's  not
illegal to select more than one strategy, but it's  not  sensible;  as
mentioned above, the later one prevails.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Interpretation of ACE Options}

Options may be given a value by an assignment to  the  name  (such  as
`time := <val>'); or be passed without assigning  a  value,  in  which
case {\GAP} treats the option as *boolean* and sets the option to  the
value `true', which  is  then  interpreted  by  the  {\ACE}  interface
functions. Technically speaking the {\ACE} binary itself does not have
boolean options, though it does have some options which  are  declared
by passing without a value  (e.g.  the  `hard'  strategy  option)  and
others that are boolean in the C-sense (taking on just the values 0 or
1).   The   behaviour    of    the    {\ACE}    interface    functions
(`ACECosetTableFromGensAndRels',   `ACEStats',   `ACECosetTable'    or
`ACEStart') is essentially  to  restore  as  much  as  is  possible  a
behaviour that mimics the {\ACE} standalone; a `false' value is always
translated to 0 and `true' may be translated to any of no-value, 0  or
1. Any option passed with an assigned value <val> other  than  `false'
or `true' is passed with the value <val> to the {\ACE}  binary.  Since
this may appear confusing, let's consider some examples.

\beginlist

\item{--} The `hard' strategy option (see~"Option `hard'")  should  be
passed without a value, which in turn is passed to the  {\ACE}  binary
without  a  value.  However,  the  {\ACE}  interface  function  cannot
distinguish the option `hard' being passed without a  value,  from  it
being passed via `hard := true'. Passing `hard := false' or  `hard  :=
<val>' for any non-`true' <val> will however produce a warning message
(unless the option `acenowarnings' is passed) that the  value  0  (for
`false') or <val> is unknown for that  option.  Nevertheless,  despite
the warning, in this event, the {\ACE} interface function  passes  the
value to the {\ACE} binary. When the {\ACE} binary sees a line that it
doesn't understand it prints a warning  and  simply  ignores  it.  (So
passing `hard := false' will produce warnings, but will  have  no  ill
effects.) The reason we still pass  *unknown*  values  to  the  {\ACE}
binary is that it's conceivable a future version of the {\ACE}  binary
might have  several  `hard'  strategies,  in  which  case  the  {\ACE}
interface function will still complain (until it's made aware  of  the
new possible values) but it will perform in the correct  manner  if  a
value expected by the {\ACE} binary is passed.

\item{--} The `felsch' strategy option (see~"Option `felsch'") may  be
passed without a value (which chooses the *felsch 0* strategy) or with
the values 0 or 1. Despite the fact that {\GAP} sees  this  option  as
*boolean*; it is *not*. There are two Felsch  strategies:  *felsch  0*
and *felsch 1*. To get the *felsch 1* strategy,  the  user  must  pass
`felsch := 1'. If the user were to pass `felsch := false'  the  result
would be the *felsch 0* strategy (since `false' is  always  translated
to 0), i.e.~the same as how `felsch := true' would be interpreted.  We
could protect the user more from  such  ideosyncrasies,  but  we  have
erred on the side of simplicity in order to make  the  interface  less
vulnerable to upgrades of the {\ACE} binary.

\endlist

The lesson from the two examples is: *check the documentation  for  an
option to see  how  it  will  be  interpreted*.  In  general,  options
documented (in this chapter) as *only* being no-value options  can  be
safely thought of as boolean (i.e.~you will get  what  you  expect  by
assigning `true' or  `false'),  whereas  strategy  (no-value)  options
should *not* be thought of as boolean (a `false' assignment will *not*
give you what you might have expected).

Options that are unknown to the {\ACE} interface  functions  that  are
passed without a value, are *always* passed to the  {\ACE}  binary  as
no-value options (except when the options are ignored); the  user  can
over-ride this behaviour simply by assigning the  intended  value.  An
option is ignored if it is unknown to the {\ACE}  interface  functions
and the `aceignoreunknown' option (see "Option `aceignoreunknown'") is
passed, or if the `aceignore' option is passed and the  option  is  an
element of the list value of `aceignore' (see  "Option  `aceignore'").
Warning messages regarding unknown  options  are  printed  unless  the
`acenowarnings' (see "Option `acenowarnings'") is passed.

To see how options are interpreted by an  {\ACE}  interface  function,
pass the `echo' option.

As  mentioned  above,  any  option  that  the  {\ACE}  binary  doesn't
understand is simply ignored and a warning appears in the output  from
{\ACE}. If this occurs, you may wish to check the input fed to  {\ACE}
and the output from {\ACE}, which when {\ACE} is run non-interactively
are stored in files whose full path names are recorded in  the  record
fields `ACEData.infile' and `ACEData.outfile', respectively.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{An Example of passing Options}

Continuing with the example of Section~"Using ACE Directly to Generate
a Coset Table", one could set the `echo' option to be  true,  use  the
`hard' strategy option, increase the workspace  to  $10^7$  words  and
turn messaging on (but to be fairly infrequent) by setting  `messages'
to a large positive value as follows:

\beginexample
gap> ACECosetTable(fgens, rels, [c] : echo, hard, Wo := 10^7, mess := 10000);;
\endexample

As mentioned in the previous section, `echo' may be thought  of  as  a
boolean option, whereas `hard' is a strategy option (and hence  should
be thought of as a no-value option). Also, observe  that  two  options
have  been  abbreviated:  `Wo'  is  a  mixed  case   abbreviation   of
`workspace', and `mess' is an abbreviation of `messages'.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{The KnownACEOptions Record}

The {\ACE} options known to the {\ACE} interface are the fields of the
record          `KnownACEOptions'{\undoquotes\atindex{KnownACEOptions}
{@`KnownACEOptions'}}; each field (known {\ACE} option) is assigned to
a list of the  form  `[<i>,  <ListOrFunction>]',  where  `<i>'  is  an
integer representing the  shortest  abbreviation  of  the  option  and
`<ListOrFunction>' is either a list of (known)  allowed  values  or  a
boolean function that may be used to determine if the given value is a
(known) valid value e.g.

\beginexample
gap> KnownACEOptions.compaction;
[ 3, [ 0 .. 100 ] ]
\endexample

indicates that the option `compaction' may be  abbreviated  to  `com'
and the (known) valid values are in the (integer) range 0 to 100; and

\beginexample
gap> KnownACEOptions.ct;
[ 2, <Operation "IS_INT"> ]
\endexample

indicates that there is essentially no abbreviation of `ct' (since its
shortest abbreviation is of length 2),  and a value of  `ct' is  known
to be valid if `IsInt' returns true for that value.

\beginitems

For user convenience, we provide the function

\>ACEOptionData( <optname> ) F

which for a string <optname> representing an {\ACE} option (or a guess
of one) returns a record with the following fields:

\beginitems

\quad`name'   & <optname> (unchanged);

\quad`known'  & `true' if <optname> is a valid mixed case abbreviation
of a known {\ACE} option, and false otherwise;

\quad`fullname'& the lower case unabbreviated form of <optname> if the
`known'  field  is  set  `true',  or  <optname>  in  all  lower  case,
otherwise;

\quad`synonyms'& a  list  of  known  {\ACE}  options  synonymous  with
<optname>, in lowercase unabbreviated form, if the  `known'  field  is
set `true', or a list containing just <optname>  in  all  lower  case,
otherwise;

\quad`abbrev' & the shortest lowercase abbreviation  of  <optname>  if
the `known' field is set `true',  or  <optname>  in  all  lower  case,
otherwise.

\enditems

For more on  synonyms  of  {\ACE}  options,  see  Section~"ACE  Option
Synonyms".

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{The ACEStrategyOptions list}

For convenience the strategy options known  to  the  {\ACE}  interface
functions  are  listed  in  the   {\GAP}   list  `ACEStrategyOptions'%
{\undoquotes\atindex{ACEStrategyOptions}{@`ACEStrategyOptions'}}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Option Synonyms}

A number of known {\ACE} options have synonyms. For user  convenience,
we     have      defined      the      `ACEOptionSynonyms'{\undoquotes
\atindex{ACEOptionSynonyms}{@`ACEOptionSynonyms'}} record, the  fields
of which are the \lq{}preferred' option names and the values of  which
are lists of synonyms of those option names. What makes an option name
\lq{}preferred' is somewhat arbitrary (in most cases, it is simply the
shortest of a list of synonyms). For  a  \lq{}preferred'  option  name
<optname> that has synonyms, the complete  list  of  synonyms  may  be
obtained     by     concatenating     `[     <optname>     ]'      and
`ACEOptionSynonyms.(<optname>)', e.g.

\beginexample
gap> Concatenation( [ "messages" ], ACEOptionSynonyms.("messages") );
[ "messages", "monitor" ]
\endexample

More generally, for an arbitrary option name  <optname>  its  list  of
synonyms (which maybe a list of one element)  maybe  obtained  as  the
`synonyms' field of the record returned by  `ACEOptionData(<optname>)'
(see~"ACEOptionData").

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Non-ACE-binary Options}

*Except* for the options listed  in  this  section  (which  appear  as
elements of the global  variable  list  `NonACEbinOptions'{\undoquotes
\atindex{NonACEbinOptions}{@`NonACEbinOptions'}})  and  those  options
that are excluded via the `aceignore' and  `aceignoreunknown'  options
(described below), *all* options that are on the  `OptionsStack'  when
an {\ACE} interface function is  called,  are  passed  to  the  {\ACE}
binary. Even options that produce the warning  message:  \lq{}`unknown
(maybe  new)  or  bad'',  by  virtue  of  not   being   a   field   of
`KnownACEOptions', are passed to the {\ACE} binary  (except  that  the
options `purer' and `purec' are first translated to `pure r' and `pure
c', respectively). When the {\ACE} binary encounters an option that it
doesn't understand it issues a  warning  and  simply  ignores  it;  so
options accidentally passed to {\ACE} are unlikely to pose problems.

Here now, are the  few  options  that  are  available  to  the  {\GAP}
interface to {\ACE} that have no counterpart in the {\ACE} standalone:

\beginitems

\>`silent'{Option `silent'}& 
Inhibits an error return.

If a coset  enumeration  that  invokes  `ACECosetTableFromGensAndRels'
does not finish within the preset limits, an error is  raised  by  the
interface to {\GAP}, unless the option `silent' has been set, in which
case `fail' is returned. This option is included to make the behaviour
of `ACECosetTableFromGensAndRels' compatible with that of the function
`CosetTableFromGensAndRels' it replaces.

\>`aceinfile:=<filename>'{Option `aceinfile'}&
Creates an {\ACE} input file <filename> for use with  the  standalone,
only;  <filename>  should  be  a  string.
(Shortest abbreviation: `acein'.)

This option is only relevant to `ACECosetTableFromGensAndRels' and  is
ignored if included as an option for  invocations  of  `ACEStats'  and
`ACEStart'. If this option is used, {\GAP} creates an input file  with
filename <filename> only, and then exits (i.e.~the  {\ACE}  binary  is
not called). This option is  provided  for  users  who  wish  to  work
directly (and interactively) with the {\ACE} standalone. The full path
to  the  input  file  normally  used  by  {\ACE}   (i.e.~when   option
`aceinfile' is not used) is stored in `ACEData.infile'.


\>`aceoutfile:=<filename>'{Option `aceoutfile'}&
Redirects {\ACE} output to file <filename>;  <filename>  should  be  a
string. (Shortest abbreviation: `aceo'.)

This  is  actually  a  synonym  for  the  `ao'  option.  Please  refer
to~"Option `ao'", for further discussion of this option.

\>`aceignore:=<optionList>'{Option `aceignore'}&
Directs an {\ACE} function to  ignore  the  options  in  <optionList>;
<optionList> should be a list of strings.
(Shortest abbreviation: `aceig'.)

If a function called with its own options, in  turn  calls  an  {\ACE}
function for which those options are not intended, the {\ACE} function
will pass those options to the {\ACE} binary.  If  those  options  are
unknown to the {\ACE} interface a warning is issued. Options that  are
unknown to the {\ACE} binary are  simply  ignored  by  {\ACE}  (and  a
warning that the option was ignored  appears  in  the  {\ACE}  output,
which the user will not see unless the `InfoLevel' of `InfoACE' is set
to 3). This option enables the user to avoid such options being passed
at all, thus avoiding the warning messages and also any  options  that
coincidentally are {\ACE} options but are not intended for the  {\ACE}
function being called.

\>`aceignoreunknown'{Option `aceignoreunknown'}&
Directs an {\ACE} function to  ignore  any  options  not known to the
{\ACE} interface.
(Shortest abbreviation: `aceignoreu'.)

This option is provided for similar reasons to `aceignore'.  Normally,
it is safe to include it, to avoid aberrant warning messages from  the
{\ACE} interface. However, fairly obviously, it should not be used  in
the situation where a new {\ACE} binary has been  installed  with  new
options that are not listed among  the  fields  of  `KnownACEOptions',
which you intend to use.

\>`acenowarnings'{Option `acenowarnings'}& 
Inhibits the warning message \lq{}`unknown (maybe new) or bad option''
for options not listed in `KnownACEOptions'.
(Shortest abbreviation: `acenow'.)

This option suppresses the warning messages for  unknown  options  (to
the {\ACE} interface), but unlike `aceignore'  and  `aceignoreunknown'
still allows them to be passed to the {\ACE} binary.

\>`echo'{Option `echo'} 
\>`echo:=2'{Option `echo'}& 
Echoes arguments and options (and indicates how options were handled).

Unlike the previous options of this  section,  there  *is*  an  {\ACE}
binary option `echo'. However, the `echo' option  is  handled  by  the
{\ACE} interface and is not passed to the {\ACE} binary. (If you  wish
to put  `echo'  in  a  standalone  script  use  the  `aceecho'  option
following.) If `echo' is passed with the value 2 then a  list  of  the
options (together with their values) that are set via {\ACE}  defaults
are also echoed to the screen.

\>`aceecho'{Option `aceecho'}& 
The {\ACE} binary's `echo' command.

This option is only included so  that  a  user  *can*  put  an  `echo'
statement in  an  {\ACE}  standalone  script.  Otherwise,  use  `echo'
(above).

\>`aceincomment:=<string>'{Option `aceincomment'}&
Print comment <string> in the {\ACE} input; <string> must be a string.
(Shortest abbreviation: `aceinc'.)

This option prints the comment <string> behind a sharp sign (`\#')  in
the input to {\ACE}. Only useful  for  adding  comments  (that  {\ACE}
ignores) to standalone input files.

\>`aceexampleoptions'{Option `aceexampleoptions'}&
An *internal* option for `ACEExample'.

This option is passed  *internally*  by  `ACEExample'  to  the  {\ACE}
interface function  it  calls,  when  one  invokes  `ACEExample'  with
options. Its purpose is to provide a mechanism for the over-riding  of
an example's options by the user. The option name is deliberately long
and has no abbreviation to discourage user use.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options}

The \lq{}{\ACE} Parameter Options' are options which if not supplied a
value by the user are supplied a default value  by  {\ACE}.  For  user
convenience, we  have  defined  the  `ACEParameterOptions'{\undoquotes
\atindex{ACEParameterOptions}{@`ACEParameterOptions'}}   record,   the
fields of which are the \lq{}{\ACE} Parameter Options' and the  values
of which are the default  values  (or  a  record  of  default  values)
that are supplied by {\ACE} when those options are not given values by
the  user  (either  indirectly  by  selecting  a  strategy  option  or
directly).

For the case that the value of a field  of  the  `ACEParameterOptions'
record is itself a record, the fields of that record are `default' and
strategies for which the value assigned by that strategy differs  from
the `default' strategy; a \lq{}strategy', here, is the strategy option
itself, if it is only  a  no-value  option,  or  the  strategy  option
concatenated with any of its integer values  (as  strings),  otherwise
(e.g.~`felsch0' and `sims9'  are  strategies,  and  `hlt'  is  both  a
strategy and a strategy option). As an exercise, the reader might like
to try to reproduce the table at the  beginning  of  Chapter~"Strategy
Options for ACE" using the `ACEParameterOptions'  record.  (Hint:  you
first need to select those fields of the `ACEParameterOptions'  record
whose values are records with at least two fields.)

Note,  however,  that  where  an  \lq{}{\ACE}  Parameter  Option'  has
synonyms only the \lq{}preferred' option name (see Section~"ACE Option
Synonyms") appears as a field of `ACEParameterOptions'.  The  complete
list of \lq{}{\ACE} Parameter Options' may be obtained by

\beginexample
gap> Concatenation( List(RecNames(ACEParameterOptions),                    
>                        optname -> ACEOptionData(optname).synonyms) ); 
[ "asis", "ct", "cfactor", "compaction", "dmode", "dsize", "enumeration", 
  "fill", "ffactor", "hole", "lookahead", "loop", "max", "mendelsohn", 
  "messages", "monitor", "no", "path", "pmode", "psize", "rt", "rfactor", 
  "row", "subgroup", "time", "workspace" ]
\endexample

The \lq{}{\ACE} Parameter Options'  are  those  options  which  appear
(along  with  `Group  Generators',  `Group  Relators'  and   `Subgroup
Generators'  which  are  defined  from   {\ACE}   interface   function
arguments), in the \lq{}Run Parameters' block of {\ACE} output,  when,
for example, the `messages' option is non-zero.

We   describe   the   \lq{}{\ACE}   Parameter    Options'    in    the
Sections~"General ACE Parameter Options that  Modify  the  Enumeration
Process", "ACE Parameter Options Modifying C-Style Definitions",  "ACE
Parameter Options for R-Style Definitions", "ACE Parameter Options for
Deduction Handling", "Technical ACE Parameter Options", "ACE Parameter
Options controlling ACE Output", and~"ACE Parameter Options that gives
Names to the Group and Subgroup", following.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{General ACE Parameter Options that Modify the Enumeration Process}

\beginitems

\>`asis'{Option `asis'}&
Do not reduce relators. (Shortest abbreviation: `as'.)

By default, {\ACE} freely  and cyclically reduces the relators, freely
reduces  the  subgroup generators,  and  sorts  relators and  subgroup
generators in length-increasing  order.  If you do not  want this, you
can switch it off by setting the `asis' option.

*Notes:* As well as allowing you  to use the presentation *as* it *is*
given,  this  is  useful for  forcing  definitions  to  be made  in  a
prespecified  order,  by  introducing  dummy  (i.e.,  freely  trivial)
subgroup generators.   (Note that the  exact form of  the presentation
can  have a significant  impact on  the enumeration  statistics.)  For
some fine points of the influence of `asis' being set on the treatment
of involutory generators see the {\ACE} standalone manual.

\>`ct:=<val>'{Option `ct'}
\>`cfactor:=<val>'{Option `cfactor'}&
Number of C-style definitions per pass; `<val>' should be an  integer. 
(Shortest abbreviation of `cfactor' is `c'.)

The absolute value of `<val>' sets the
number of C-style definitions per  pass through  the enumerator's main
loop. The sign of `<val>'  sets the  style. The possible  combinations
of the values of `ct' and  `rt'  (described below)  are  given in  the
table of  enumeration styles in Section~"Enumeration Style".

\>`rt:=<val>'{Option `rt'}
\>`rfactor:=<val>'{Option `rfactor'}&
Number of R-style definitions per pass; `<val>' should be an  integer. 
(Shortest abbreviation of `rfactor' is `r'.)

The absolute value of `<val>' sets the
number of R-style definitions per  pass through  the enumerator's main
loop. The sign of `<val>'  sets the  style. The possible  combinations
of the values of `ct' (described above)  and  `rt'  are  given in  the
table of  enumeration styles in Section~"Enumeration Style".

\>`no:=<val>'{Option `no'}&
The number of group relators to include in the subgroup;  
`<val>' should be an integer greater than or equal to $-1$.

It is sometimes helpful to include the group relators into the list of
the subgroup generators, in the sense that they are applied  to  coset
number 1 at the start of an enumeration. A value of 0 for this  option
turns this feature off and the (default) argument of $-1$ includes all
the relators. A positive argument includes  the  specified  number  of
relators,  in  order.  The  `no'  option  affects  only  the   C-style
procedures.

\>`mendelsohn'{Option `mendelsohn'}&
Turns on mendelsohn processing. (Shortest abbreviation: `mend'.)

Mendelsohn style processing during relator scanning/closing is  turned
on by giving this option. Off is the default, and  here  relators  are
scanned only from  the  start  (and  end)  of  a  relator.  Mendelsohn
\lq{}on' means that all (different) cyclic permutations of  a  relator
are scanned.

The effect of Mendelsohn style processing  is  case-specific.  It  can
mean the difference between success or failure, or it can  impact  the
number of coset numbers required, or it  can  have  no  effect  on  an
enumeration's statistics.

*Note:* Processing all cyclic permutations of the relators can be very
time-consuming,  especially if  the  presentation is  large.  So,  all
other things being equal, the  Mendelsohn flag should normally be left
off.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options Modifying C-Style Definitions}

The  next  three  options  are  relevant  only  for   making   C-style
definitions. Making definitions in C-style, that is filling the  coset
table line by line, it can be very advantageous to  switch  to  making
definitions from the preferred definition stack. Possible  definitions
can be extracted from this stack in various ways and the  two  options
`pmode'  and  `psize'  (see~"Option  `pmode'"   and~"Option   `psize'"
respectively) regulate this. However it should be  clearly  understood
that making all definitions from a preferred definition stack one  may
violate the condition of Mendelsohn's theorem, and the  option  `fill'
(see~"Option `fill'") can be used to avoid this.

\beginitems

\>`fill:=<val>'{Option `fill'}
\>`ffactor:=<val>'{Option `ffactor'}&
Controls the preferred definition strategy by setting the fill factor;
`<val>' must be a non-negative integer.
(Shortest abbreviation of `fill' is `fil', and  shortest  abbreviation
of `ffactor' is `f'.)

Unless prevented by the fill factor, gaps of length one  found  during
deduction  testing  are  preferentially   filled   (see~\cite{Hav91}).
However, this potentially violates the  formal  requirement  that  all
rows in the coset table are eventually filled (and tested against  the
relators). The fill factor  is  used  to  ensure  that  some  constant
proportion of the coset table is always kept filled. Before defining a
coset number to fill a  gap  of  length  one,  the  enumerator  checks
whether `fill' times the completed part of the table is at  least  the
total size of the table  and,  if  not,  fills  coset  table  rows  in
standard order (C-style) instead of filling gaps.

An  argument of  0  selects  the default  value  of $\lfloor  5(n+2)/4
\rfloor$,  where $n$  is the  number of  columns in  the  table.  This
default  fill factor  allows  a moderate  amount  of gap-filling.   If
`fill' is  1, then there is  no gap-filling.  A large  value of `fill'
can cause  what is in effect  infinite looping (resolved  by the coset
enumeration failing).   However, in general,  a large value  does work
well.  The  effects of the various gap-filling  strategies vary widely.
It is  not clear  which values are  good general defaults  or, indeed,
whether any strategy is always ``not too bad''.

This option is identified as `Fi' in the  \lq{}Run  Parameters'  block
(obtained when `messages' is non-zero) of the {\ACE} output, since for
the {\ACE} binary, `fi' is an allowed abbreviation of `fill'. However,
`fi' is a {\GAP} keyword and so the shortest  abbreviation  of  `fill'
allowed by the interface functions is `fil'.

\>`pmode:=<val>'{Option `pmode'}&
Option for preferred definitions; `<val>' should  be  in  the  integer
range 0 to 3. (Shortest abbreviation: `pmod'.)

The  value of  the  `pmode' option  determines  which definitions  are
preferred.  If  the argument is  0, then Felsch style  definitions are
made using  the next empty table  slot.  If the  argument is non-zero,
then gaps of length one found during relator scans in Felsch style are
preferentially  filled  (subject to  the  value  of  `fill').  If  the
argument  is 1,  they are  filled  immediately, and  if it  is 2,  the
consequent deduction  is also made  immediately (of course,  these are
also put on the deduction stack).  If the argument is 3, then the gaps
of length one are noted in the preferred definition queue.

Provided such a gap survives (and no coincidence occurs, which  causes
the queue to be discarded) the next coset number will  be  defined  to
fill the oldest gap of length one. The default value is either 0 or 3,
depending on the strategy selected (see Chapter~"Strategy Options  for
ACE"). If you want to know more details, read the code.


\>`psize:=<val>'{Option `psize'}&
Size of preferred definition queue; `<val>' *must* be 0 or $2^n$,  for
some integer $n>0$. (Shortest abbreviation: `psiz'.)

The  preferred definition  queue is  implemented as  a  ring, dropping
earliest entries. An argument of 0 selects  the default size of $256$.
Each  queue slot takes two words (i.e., 8 bytes),  and the  queue  can
store up to $2^n-1$ entries.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options for R-Style Definitions}

\beginitems

\>`row:=<val>'{Option `row'}&
Set the \lq{}row filling' option; `<val>' is either 0 or 1.

By default, \lq{}row filling' is on (i.e.~`true' or 1). To turn it off
set `row' to either `false' or 0 (both are translated to 0 when passed
to  the {\ACE}  binary).   When making  HLT-style  definitions, it  is
normal to scan each row of  the coset table after its coset number has
been applied to  all relators, and make definitions  to fill any holes
in that row of the  coset table encountered. This will, in particular,
guarantee  that   the  condition  of  Mendelsohn's   Theorem  will  be
fulfilled.  Failure  to do  so can cause  even simple  enumerations to
overflow.

\>`lookahead:=<val>'{Option `lookahead'}&
Lookahead; `<val>' should be in the integer range 0 to 4.
(Shortest abbreviation: `look'.)
  
Although HLT-style strategies are fast, they are local, in  the  sense
that  the  implications  of  any  definitions/deductions  made   while
applying coset numbers may not become apparent until much  later.  One
way to alleviate this problem is to perform  lookaheads  occasionally;
that is, to test the information in the table, looking for  deductions
or  concidences.  {\ACE}  can  perform  a  lookahead  when  the  table
overflows, before the compaction routine is called. Lookahead  can  be
done using the entire table or only that part of the table  above  the
current coset number, and it  can  be  done  R-style  (scanning  coset
numbers from the  beginning  of  relators)  or  C-style  (testing  all
definitions in all essentially different positions).

The following are the effects of the possible values of `lookahead':

\beginlist

\item{--} 0 disables lookahead;
\item{--} 1 does a partial table lookahead, R-style; 
\item{--} 2 does a whole table lookahead, C-style; 
\item{--} 3 does a whole table lookahead, R-style; and
\item{--} 4 does a partial table lookahead, C-style.  

\endlist

The default is 1 if the `hlt' strategy is used and  0  otherwise;  see
Chapter~"Strategy Options for ACE".

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options for Deduction Handling}

\beginitems

\>`dmode:=<val>'{Option `dmode'}&
Deduction mode; `<val>' should be in the integer range 0 to 4.
(Shortest abbreviation: `dmod'.)

A completed table  is only valid if every table  entry has been tested
in all essentially different  positions in all relators.  This testing
can either be done directly  (Felsch strategy) or via relator scanning
(HLT strategy).  If it is  done directly, then more than one deduction
(i.e., table  entry) can be waiting  to be processed at  any one time.
So the untested deductions are stored in a stack.  Normally this stack
is fairly small but, during a collapse, it can become very large.

This command allows the user  to  specify  how  deductions  should  be
handled. The value <val> has the following interpretations:

\beginlist

\item{--} $0$:  
discard deductions if there is no stack space left;

\item{--} $1$: 
as for $0$, but purge any redundant coset numbers on the  top  of  the
stack at every coincidence;

\item{--} $2$: 
as for 0, but purge all redundant coset  numbers  from  the  stack  at
every coincidence;

\item{--} $3$:
discard the entire stack if it overflows; and

\item{--} $4$:
if the stack overflows, double the stack size and purge all  redundant
coset numbers from the stack.

\endlist

The default deduction mode is either $0$  or  $4$,  depending  on  the
strategy selected (see Chapter~"Strategy Options for ACE"), and it  is
recommended that you stay with the default. If you want to  know  more
details, read the well-commented C code.

*Notes:*
If deductions are discarded for any reason, then a final relator check
phase  will be run  automatically at  the end  of the  enumeration, if
necessary, to check the result.

\>`dsize:=<val>'{Option `dsize'}&
Deduction stack size; `<val>' should be a non-negative integer.
(Shortest abbreviation: `dsiz'.)

Sets the  size of  the (initial) allocation  for the  deduction stack.
The size is  in terms of the number of  deductions, with one deduction
taking two words (i.e., 8 bytes).  The default size, of $1000$, can be
selected  by  a value  of  0.   See the  `dmode' entry  for a  (brief)
discussion of deduction handling.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Technical ACE Parameter Options}

The following options do not affect how the coset enumeration is done,
but how it  uses the computer's resources. They  might thus affect the
runtime as  well as  the range of  problems that  can be tackled  on a
given machine.

\beginitems

\>`workspace:=<val>'{Option `workspace'}&
Workspace size in words (default $10^6$);
`<val>' should be an expression that evaluates to a positive  integer,
or a string of digits ending in a  `k',  `M'  or  `G'  representing  a
multiplication  factor  of  $10^3$,  $10^6$  or  $10^9$,  respectively
e.g.~both `workspace := 2 * 10^6' and `workspace :=  "2M"'  specify  a
workspace  of  $2\times10^6$  words.  Actually,  if   the   value   of
`workspace' is entered as a string, each of `k', `M' or  `G'  will  be
accepted in either upper or lower case. (Shortest abbreviation: `wo'.)

By default, {\ACE} has a physical table size of $10^6$ words (i.e., $4
\times 10^6$ bytes in the  default 32-bit environment).  The number of
coset numbers in the table is  the table size divided by the number of
columns.   Although  the  number   of  coset  numbers  is  limited  to
$2^{31}-1$ (if the C `int' type is 32 bits), the table size can exceed
the $4$GByte 32-bit limit if a suitable machine is used.

\>`time:=<val>'{Option `time'}&
Maximum execution time in seconds; `<val>' must be an integer  greater
than or equal to $-1$. (Shortest abbreviation: `ti'.)

The `time' command  puts a time limit (in seconds) on  the length of a
run. The default is $-1$  which is no  time limit. If the  argument is
$\ge0$ then the total elapsed time for this call is checked at the end
of each pass through the enumerator's main loop, and if it's more than
the limit the run is stopped and the current table returned.

Note that a limit of $0$ performs exactly one pass  through  the  main
loop, since $0 \ge 0$.

%\begintt
%???????????????????????????????????????????????????????????????????
%*GREG:
%
%DOES THIS HAVE RELEVANCE TO THE INTERACTIVE MODE?*
%
%If the enumerator is run in the continue mode, this allows a form of
%  ``single-stepping''
%
%??????????????????????????????????????????????????????????????????
%\endtt

The time  limit is approximate, in  the sense that  the enumerator may
run for a longer, but never a shorter, time.  So, if there is, e.g., a
big collapse (so that the time round the loop becomes very long), then
the run may run over the limit by a large amount.

*Notes:*
The time limit is CPU-time, not wall-time.  As  in  all  timing  under
Unix, the clock's granularity  (usually  $10$  milliseconds)  and  the
system load can  affect  the  timing;  so  the  number  of  main  loop
iterations in a given time may vary.

\>`loop:=<val>'{Option `loop'}&
Loop limit; `<val>' should be a non-negative integer.

The core enumerator is organised as a state machine,  with  each  step
performing an \lq{}action' (i.e., lookahead, compaction) or a block of
actions (i.e.,  $|`ct'|$  coset  number  definitions,  $|`rt'|$  coset
number applications). The number  of  passes  through  the  main  loop
(i.e., steps) is counted, and the enumerator can make an early  return
when this count hits the value of `loop'. A value of $0$, the default,
turns this feature off.

*Guru Notes:*
You can do lots of really neat things using this feature, but you need
some understanding of the internals of {\ACE} to get real benefit from
it.

\>`path'{Option `path'}&
Turns on path compression.

To correctly  process  multiple  concidences,  a  union-find  must  be
performed. If both path compression and weighted union are used,  then
this can be done in essentially linear time (see, e.g., \cite{CLR90}).
Weighted union alone, in the worst-case, is worse than linear, but  is
subquadratic. In practice, path compression  is  expensive,  since  it
involves many coset table accesses. So, by default,  path  compression
is turned off; it can be turned on by `path'. It has no effect on  the
result, but may affect the running time and the internal statistics.

*Guru Notes:*
The whole question of the best way to handle large coincidence forests
is problematic.  Formally, {\ACE} does  not do a weighted union, since
it is constrained to replace the higher-numbered of a coincident pair.
In practice,  this seems  to amount to  much the same  thing!  Turning
path  compression on  cuts down  the  amount of  data movement  during
coincidence processing at the expense of having to trace the paths and
compress them.  In general, it does not seem to be worthwhile.

\>`compaction:=<val>'{Option `compaction'}&
Percentage of dead coset numbers\index{dead coset (number)} to trigger
compaction; `<val>' should be an integer (percentage) in  the  integer
range 0 to 100. (Shortest abbreviation: `com'.)

The option `compaction'  sets  the  percentage  of  *dead*~\index{dead
coset (number)} coset numbers needed  to  trigger  compaction  of  the
coset table, during an enumeration. A *dead* coset (number) is a coset
number found to be coincident with a smaller coset number.  The
default  is  10  or  100,  depending  on  the   strategy   used   (see
Chapter~"Strategy Options for ACE").

Compaction recovers the space allocated to  coset  numbers  which  are
flagged as dead. It results in a table  where  all  the  active  coset
numbers are numbered contiguously from 1, and with  the  remainder  of
the table available for new coset numbers.

The coset table is compacted when a definition of a  coset  number  is
required, there is no space for a  new  coset  number  available,  and
provided that the given percentage of the coset  table  contains  dead
coset numbers. For example, if `compaction'  =  $20$  then  compaction
will occur only if 20\% or more of the coset numbers in the table  are
dead. An argument of 100 means that  compaction  is  never  performed,
while an argument of 0 means always compact, no matter  how  few  dead
coset numbers there are (provided there is at least one, of course).

Compaction may be performed  multiple times during an enumeration, and
the table that results from an  enumeration may or may not be compact,
depending on whether or not there have been any coincidences since the
last compaction (or  from the start of the  enumeration, if there have
been no compactions).

*Notes:*
In some strategies (e.g., `hlt') a lookahead phase may be  run  before
compaction is attempted. In  other  strategies  (e.g.,  `sims  :=  3')
compaction may be performed while there  are  outstanding  deductions;
since deductions are discarded during compaction,  a  final  lookahead
phase will (automatically) be performed.

Compacting a table \lq{}destroys'  information  and  history,  in  the
sense that the coincidence list is deleted, and the table entries  for
any dead coset numbers\index{dead coset (number)} are deleted.

\>`max:=<val>'{Option `max'}&
Maximum number of coset numbers to be defined;
`<val>' should be $0$ or an integer greater than or equal to 2.

Sets the maximum  number of coset numbers to  be defined.  By default,
all  of the workspace  is used,  if necessary,  in building  the coset
table.  So the table size is  an upper bound on how many coset numbers
can be active at any one time.   The `max' option allows a limit to be
placed on  how much of the  physical table space is  made available to
the enumerator.   Enough space for  at least two coset  numbers (i.e.,
the subgroup and one other) must  be made available.  An argument of 0
selects all of the workspace.

\>`hole:=<val>'{Option `hole'}&
Maximum percentage of holes allowed during an enumeration;
`<val>' should be an integer in the range $-1$ to 100.
(Shortest abbreviation: `ho'.)

This is an experimental feature which  allows  an  enumeration  to  be
terminated when the percentage of holes in the table exceeds  a  given
value. In practice, calculating this is very expensive, and  it  tends
to remain constant or  decrease  throughout  an  enumeration.  So  the
feature doesn't seem very useful. The default value of $-1$ turns this
feature off. If you want more details, read the source code.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options controlling ACE Output}

\beginitems

\>`messages:=<val>'{Option `messages'}
\>`monitor:=<val>'{Option `monitor'}&
Sets the verbosity of output from {\ACE}; <val> should be an integer.
(Shortest  abbreviation  of  `messages'  is   `mess',   and   shortest
abbreviation of `monitor' is `mon'.)

By default, <val> = 0, for which {\ACE} prints out only a single  line
of information, giving the result of each  enumeration.  If  <val>  is
non-zero then the presentation and the parameters are  echoed  at  the
start of the run, and messages  on  the  enumeration's  status  as  it
progresses are also printed out. The absolute value of <val> sets  the
frequency of the progress messages, with a negative sign turning  hole
monitoring on. Note that, hole monitoring is expensive, so don't  turn
it on unless you really need it.

Note   that,  ordinarily,  one   will   not   see   these    messages:
non-interactively,   these   messages    are    directed    to    file
`ACEData.outfile'   (or   <filename>,   if   option   `aceoutfile   :=
<filename>', or `ao := <filename>', is used), and interactively  these
messages are simply  not  displayed.  However,  one  can  change  this
situation both interactively and   non-interactively  by  setting  the
`InfoLevel' of `InfoACE' to 3 via

\begintt
gap> SetInfoACELevel(3);
\endtt

Then {\ACE}'s messages are  displayed  prepended  with  \lq{}`\#I  ''.
Please refer to Appendix~"The  Meanings  of  ACE's  output  messages",
where the meanings of {\ACE}'s output messages are fully discussed.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{ACE Parameter Options that gives Names to the Group and Subgroup}

These options may be safely ignored; they only give names to the group
or subgroup within the {\ACE}  output,  and  have  no  effect  on  the
enumeration itself.

\beginitems

\>`enumeration:=<string>'{Option `enumeration'}&
Sets the `Group Name' to <string>;  <string>,  must  of  course  be  a
string. (Shortest abbreviation: `enum'.)

The {\ACE} binary has a two-word synonym for this option: `Group Name'
and this is how it is identified in the \lq{}Run Parameters' block  of
the {\ACE} output when `messages' has a non-zero  value.  The  default
`Group Name' is `"G"'.

\>`subgroup:=<string>'{Option `subgroup'}& Sets the `Subgroup Name' to
<string>; <string>, must of course be a string.
(Shortest abbreviation: `subg'.) 

The default `Subgroup Name' is `"H"'.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Options for redirection of ACE Output}

\beginitems

\>`ao:=<filename>'{Option `ao'}
\>`aceoutfile:=<filename>'{Option `aceoutfile'}&
Redirects (`a'lters) `o'utput to <filename>; <filename>  should  be  a
string.

Non-interactively, {\ACE}'s output is normally directed to a temporary
file whose full path is stored in `ACEData.outfile', which  is  parsed
to produce a coset table or a list of statistics. This  option  causes
{\ACE}'s output to  be  directed  to  <filename>  instead,  presumably
because the user wishes to see (and keep) data output  by  the  {\ACE}
binary,    other    than    the    coset     table     output     from
`ACECosetTableFromGensAndRels' or the statistics output by `ACEStats'.
Please refer to Appendix~"The  Meanings  of  ACE's  output  messages",
where we discuss the meaning of the additional data to be found in the
{\ACE} binary's output. The option `aceoutfile' is a {\GAP}-introduced
synonym for `ao', that is translated to `ao' before submission to  the
{\ACE} binary.  Do  not  use  option  `aceoutfile'  when  running  the
standalone directly. Happily, `ao' can also be regarded as  mnemonical
for `aceoutfile'.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Other Options}

{\ACE} has a number of other options, but the  {\GAP}  user  will  not
ordinarily need them, since interactively alternative functions  exist
and non-interactively most have limited  usefulness,  except  possibly
for a user wishing to generate an input file for use with  the  {\ACE}
standalone. Hence, these remaining  options  have  been  relegated  to
Appendix~"Other ACE Options".

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Strategy Options for ACE}

It can be difficult to select appropriate options when presented  with
a new enumeration. The problem is  compounded  by  the  fact  that  no
generally applicable rules exist to  predict,  given  a  presentation,
which option settings are \lq{}good'. To help overcome  this  problem,
{\ACE} contains various commands which select  particular  enumeration
strategies. One or other of these strategies may work and, if not, the
results may indicate how  the  options  can  be  varied  to  obtain  a
successful enumeration. 

If no strategy option is passed to {\ACE}, the `default'  strategy  is
assumed, which starts out presuming that the enumeration will be easy,
and if it turns out not to  be  so,  {\ACE}  switches  to  a  strategy
designed for more difficult enumerations.  The  other  straightforward
options for beginning users are `easy' and `hard'. Thus,  `easy'  will
quickly succeed or fail (in  the  context  of  the  given  resources);
`default' may succeed quickly, or if not will try the `hard' strategy;
and `hard' will run more slowly, from the beginning trying to succeed.

Strategy options are merely options that set a number of  the  options
seen in Chapter~"Options for ACE", all at once;  they  are  parsed  in
*exactly* the same way as other options; order *is* important.  It  is
usual to specify one strategy option and possibly  follow  it  with  a
number of options defined in Chapter~"Options for ACE", some of  which
may over-ride those options set by strategy option.  Please  refer  to
the  introductory  sections  of  Chapter~"Options  for  ACE",   paying
particular attention to Sections "Warnings regarding  Options",  "What
happens if no ACE Strategy Option or if  no  ACE  Option  is  passed",
and~"Interpretation of ACE  Options",  which  give  various  warnings,
hints and information on the interpretation of options.

There are eight strategy options. Each is passed without a value  (see
Section~"Interpretation of  ACE  Options")  except  for  `sims'  which
expects one of the integer values: 1, 3, 5, 7, or 9; and, `felsch' can
accept a value of 0 or 1, where 0  has  the  same  effect  as  passing
`felsch' with  no  value.  Thus  the  eight  strategy  options  define
thirteen standard strategies; these are listed  in  the  table  below,
along with all but three of the options (of Chapter~"Options for ACE")
that they set. Additionally, each strategy sets `path = 0',  `psize  =
256', and `dsize = 1000'. Recall `mend', `look' and  `com'  abbreviate
`mendelsohn'  (see~"Option  `mendelsohn'"),  `lookahead'  (see~"Option
`lookahead'")   and    `compaction'    (see~"Option    `compaction'"),
respectively.

% \begin{table}
% \hrule
% \caption{The Predefined Strategies}
% \label{tab:pred}
% \smallskip
% \renewcommand{\arraystretch}{0.875}
% \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}lrrrrrrrrrrrrr} 
% \hline\hline
%           & \multicolumn{13}{c}{parameter} \\ 
% \cline{2-14}
% strategy & path & row & mend & no & look & com & ct   & rt    & fill &
% pmode & psize & dmode & dsize \\ 
% \hline
% default    & 0   & 1   & 0    & -1 & 0    & 10  & 0    & 0     & 0  & 3    & 256  & 4    & 1000 \\
% easy   & 0   & 1   & 0    & 0  & 0    & 100 & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
% felsch:0& 0   & 0   & 0    & 0  & 0    & 10  & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
% felsch:1  & 0   & 0   & 0    & -1 & 0    & 10  & 1000 & 0     & 0  & 3    & 256  & 4    & 1000 \\
% hard   & 0   & 1   & 0    & -1 & 0    & 10  & 1000 & 1     & 0  & 3    & 256  & 4    & 1000 \\
% hlt    & 0   & 1   & 0    & 0  & 1    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
% purec & 0   & 0   & 0    & 0  & 0    & 100 & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
% purer & 0   & 0   & 0    & 0  & 0    & 100 & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
% sims:1 & 0   & 1   & 0    & 0  & 0    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
% sims:3 & 0   & 1   & 0    & 0  & 0    & 10  & 0    & -1000 & 1  & 0    & 256  & 4    & 1000 \\
% sims:5 & 0   & 1   & 1    & 0  & 0    & 10  & 0    & 1000  & 1  & 0    & 256  & 0    & 1000 \\
% sims:7 & 0   & 1   & 1    & 0  & 0    & 10  & 0    & -1000 & 1  & 0    & 256  & 4    & 1000 \\
% sims:9 & 0   & 0   & 0    & 0  & 0    & 10  & 1000 & 0     & 1  & 0    & 256  & 4    & 1000 \\
% \hline\hline
% \end{tabular*}
% \end{table}

\begintt
                               option
            ---------------------------------------------------------
strategy    row  mend  no  look  com    ct     rt  fill  pmode  dmode
---------------------------------------------------------------------
default       1     0  -1     0   10     0      0     0      3      4
easy          1     0   0     0  100     0   1000     1      0      0
felsch := 0   0     0   0     0   10  1000      0     1      0      4
felsch := 1   0     0  -1     0   10  1000      0     0      3      4
hard          1     0  -1     0   10  1000      1     0      3      4
hlt           1     0   0     1   10     0   1000     1      0      0
purec         0     0   0     0  100  1000      0     1      0      4
purer         0     0   0     0  100     0   1000     1      0      0
sims := 1     1     0   0     0   10     0   1000     1      0      0
sims := 3     1     0   0     0   10     0  -1000     1      0      4
sims := 5     1     1   0     0   10     0   1000     1      0      0
sims := 7     1     1   0     0   10     0  -1000     1      0      4
sims := 9     0     0   0     0   10  1000      0     1      0      4
---------------------------------------------------------------------
\endtt

Note that we explicitly (re)set all of the listed  enumerator  options
in all of the predefined strategies, even though some of them have  no
effect. For example, the `fill' value is irrelevant in HLT  mode.  The
idea  behind  this  is  that,  if  you  later  change   some   options
individually, then the enumeration retains the  \lq{}flavour'  of  the
last selected predefined strategy.

Note also that other options which may effect an enumeration are  left
untouched by setting one of the predefined  strategies;  for  example,
the values of  `max'  (see~"Option  `max'")  and  `asis'  (see~"Option
`asis'"). These options have an effect which  is  independent  of  the
selected strategy.

Note that, apart from the `felsch := 0' and `sims  :=  9'  strategies,
all of the strategies are distinct, although some are very similar.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{The Strategies in Detail}

\beginitems

\>`default'{Option `default'}&
Selects the default strategy. (Shortest abbreviation: `def'.)

This   strategy   is   based   on   the   defaulted   R/C-style;   see
Section~"Enumeration Style". The idea here is that we assume that  the
enumeration is \lq{}easy' and start out in R-style. If  it  turns  out
not to be easy, then  we  regard  it  as  \lq{}hard',  and  switch  to
CR-style, after performing a lookahead on the entire table.

\>`easy'{Option `easy'}&
Selects an \lq{}easy' R-style strategy.

If this strategy is selected, we run in R-style (i.e., HLT), but  turn
`lookahead' and `compaction' off. For small and/or easy  enumerations,
this mode is likely to be the fastest.

\>`felsch'{Option `felsch'}
\>`felsch:=<val>'{Option `felsch'}&
Selects a Felsch strategy; <val> should be 0 or 1. 
(Shortest abbreviation: `fel'.)

Assigning `felsch' 0 or no value selects a pure Felsch strategy, and a
value of 1 selects a Felsch strategy with all relators in the subgroup
(`no = -1') and turns gap-`fill'ing on.

\>`hard'{Option `hard'}&  
Selects a mixed R-style and C-style strategy.

In many \lq{}hard' enumerations, a  mixture  of  R-style  and  C-style
definitions, all tested in all  essentially  different  positions,  is
appropriate. This option selects such a mixed strategy. The idea  here
is that most of the work is done C-style (with  the  relators  in  the
subgroup (`no = -1') and with gap-`fill'ing active),  but  that  every
$1000$ C-style definitions a further coset number is  applied  to  all
relators.

*Guru  Notes:*
The $1000/1$ mix is not necessarily optimal, and some  experimentation
may be needed  to  find  an  acceptable  balance  (see,  for  example,
\cite{HR99b}). Note also that, the longer  the  total  length  of  the
presentation, the more work needs to be done  for  each  coset  number
application to the relators; one coset number application  can  result
in more than $1000$ definitions, reversing the balance between R-style
and C-style definitions.

\>`hlt'{Option `hlt'}&
Selects the standard HLT strategy.

\>`purec'{Option `purec'}&
Sets the strategy to basic C-style (coset table based).

In this strategy there is no `compaction',  no  gap-`fill'ing  and  no
relators in subgroup (`no = 0').

\>`purer'{Option `purer'}&
Sets the strategy  to basic R-style (relator based).

In this  strategy  there  is  no  `mendelsohn',  no  `compaction',  no
`lookahead' and no `row'-filling.

\>`sims:=<val>'{Option `sims'}&
Sets a Sims strategy; <val> should be one of 1, 3, 5, 7 or 9.

In his book~\cite{Sim94},  Sims  discusses  ten  standard  enumeration
strategies. These are effectively HLT (with and  without  `mendelsohn'
set -- see~"Option `mendelsohn'")  and  Felsch,  all  either  with  or
without table standardisation as the enumeration proceeds. {\ACE} does
not implement table standardisation during  an  enumeration,  although
incomplete tables can be standardised and  an  enumeration  continued.
The five odd-numbered non-standardising strategies of~\cite{Sim94} are
implemented ({\ACE}'s numbering is the same as  given  in  Section~5.5
of~\cite{Sim94}).  With  care,  it  is  possible  to   duplicate   the
statistics  given  in~\cite{Sim94};  some  examples   are   given   in
Appendix~"Examples". % again, in the appendix ...

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Chapter{Functions for Using ACE Interactively}

The user will probably benefit most from interactive use of {\ACE}  by
setting   the   `InfoLevel'   of   `InfoACE'    to    at    least    3
(see~"SetInfoACELevel"),  particularly  if  she  uses  the  `messages'
option with a non-zero value.

All functions that manipulate an interactive process  (that  has  been
initiated by `ACEStart', with three arguments), have a form where  the
first  argument  is  the  integer  <i>  returned  by  the   initiating
`ACEStart' command, and a second form with one fewer arguments  (where
the integer <i> is  discovered  by  a  default  mechanism,  namely  by
determining the least integer <i>  for  which  there  is  a  currently
active interactive {\ACE} process). In each case, it is an  error,  if
<i> is not the index of an active interactive process, or there are no
current active interactive processes.

*Notes*: 

The global method of passing options (via `PushOptions'),  should  not
be  used  with  any  of  the  interactive  functions.  In  fact,   the
`OptionsStack' should be empty at the  time  any  of  the  interactive
functions is called.

On `quit'ting {\GAP}, `ACEQuitAll();' is  executed,  which  terminates
all active interactive {\ACE} processes. If {\GAP} is  killed  without
`quit'ting, before all interactive {\ACE}  processes  are  terminated,
*zombie* processes (still living  *child*  processes  whose  *parents*
have died), will result. Since zombie processes do consume  resources,
in such an event, the responsible computer user should  seek  out  and
kill the still living `ace' children (e.g.~by piping the output  of  a
`ps' with appropriate options, usually `aux' or `ef', to  `grep  ace',
to find the process ids, and then using `kill'; try `man ps' and  `man
kill' if these hints are unhelpful).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Starting and Stopping Interactive ACE Processes}

\beginitems

\>ACEStart( 0 ) F
\>ACEStart( <fgens>, <rels>, <sgens> [:<options>] ) F
\>ACEStart( <i> [:<options>] ) F
\>ACEStart( [:<options>] ) F

The first form of `ACEStart' (on the  one  argument:  0)  is  used  to
initiate an interactive {\ACE} process, but does  nothing  more.  This
form is mainly for gurus who are familiar with the  {\ACE}  standalone
and who wish, at least initially, to communicate with {\ACE} using the
primitive  read/write  tools  of  Section~"Primitive  ACE   Read/Write
Functions". In this case, after the group  generators,  relators,  and
subgroup generators have been set in the {\ACE}  process,  invocations
of    any    of    `ACEGroupGenerators'    (see~"ACEGroupGenerators"),
`ACERelators'       (see~"ACERelators"),       `ACESubgroupGenerators'
(see~"ACESubgroupGenerators"),           or            `ACEParameters'
(see~"ACEParameters") will establish the corresponding {\GAP}  values.
Be warned, though, that unless one of the modes `ACEStart' (without  a
zero   argument),   `ACERedo'   (see~"ACERedo")    or    `ACEContinue'
(see~"ACEContinue"), or their equivalent  for  the  standalone  {\ACE}
(`start;', `redo;', or `continue;'), has been invoked since  the  last
change of any parameter options (see Section~"ACE Parameter Options"),
some  of  the  values  reported  by  `ACEParameters'   may   well   be
*incorrect*.

The second form of `ACEStart' (on three arguments) is used to start an
interactive process; here <fgens> is a list of free generators, <rels>
a list of words in these generators giving  relators  for  a  finitely
presented group, and <sgens> the list of  subgroup  generators,  again
expressed as words in the free generators. All these are given in  the
standard {\GAP} format (See Chapter~"ref:Finitely Presented Groups" of
the {\GAP} Reference Manual).

When `ACEStart' is called with one positive integer  argument  <i>  it
starts a new enumeration on the <i>th running process, i.e.~it  scrubs
a previously generated table and starts from  scratch  with  the  same
parameters (i.e.~the same arguments and options); except that  if  new
options are included these will modify  those  given  previously.  The
only reason for doing such a thing, without new options, is to perhaps
compare timings of runs (a second run is quicker  because  memory  has
already been allocated).  If  you  are  interested  in  this  sort  of
information, however, you may be better off dealing directly with  the
standalone.

When `ACEStart' is  called  with  no  arguments  it  finds  the  least
positive integer <i> for which an interactive process is  running  and
applies `ACEStart(<i>)'. (Most users will  only  run  one  interactive
process at a time. Hence, `ACEStart()' will be a useful  shortcut  for
`ACEStart(1)'.)

If you intend to use options these are  listed  behind  a  colon;  any
selection  of  the  options   available   for   the   interface   (see
Chapters~"Options for ACE" and~"Strategy  Options  for  ACE")  can  be
given,  separated  by  commas  like  record  components.   Note   that
strategies are simply  special  options  that  set  a  number  of  the
options, detailed in Chapter~"Options  for  ACE",  all  at  once.  The
reader is strongly encouraged to read  the  introductory  sections  of
Chapter~"Options for ACE". The global mechanism (via `PushOptions') of
passing options is *not* recommended  for  use  with  the  interactive
{\ACE} interface functions; please ensure the `OptionsStack' is  empty
before calling an interactive {\ACE} interface function.

The return value (for all four forms  of  `ACEStart')  is  an  integer
(numbering from  1)  which  represents  the  running  process.  It  is
possible to have more than one interactive process  running  at  once.
The integer returned may be used to index which of these processes  an
interactive {\ACE} interface function should be applied to.

Each of

\>ACEQuit( <i> ) F
\>ACEQuit() F

terminate an interactive {\ACE} process,  where  <i>  is  the  integer
returned by `ACEStart' when the process was  started.  If  the  second
form is used (i.e.~without arguments) then the interactive process  of
least index that is still running is terminated.

As a convenience, to terminate all active interactive {\ACE} processes
at once, we provide:

\>ACEQuitAll() F

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Primitive ACE Read/Write Functions}

For those familiar with the  workings  of  the  {\ACE}  standalone  we
provide primitive read/write tools to  communicate  directly  with  an
interactive {\ACE} process,  started  via  `ACEStart'  (possibly  with
argument 0, but this is not essential). For the most part, it is up to
the user to translate the output  strings  from  {\ACE}  into  a  form
useful in {\GAP}. However, after the group generators,  relators,  and
subgroup  generators  have  been  set  in  the  {\ACE}  process,   via
`ACEWrite',    invocations    of    any    of     `ACEGroupGenerators'
(see~"ACEGroupGenerators"),     `ACERelators'     (see~"ACERelators"),
`ACESubgroupGenerators'       (see~"ACESubgroupGenerators"),        or
`ACEParameters' (see~"ACEParameters") will establish the corresponding
{\GAP} values.  Be  warned  though,  that  unless  one  of  the  modes
`ACEStart'  (without  a  zero  argument;  see~"ACEStart"),   `ACERedo'
(see~"ACERedo")  or  `ACEContinue'   (see~"ACEContinue"),   or   their
equivalent  for  the  standalone   {\ACE}   (`start;',   `redo;',   or
`continue;'), has been invoked since the last change of any  parameter
options (see Section~"ACE Parameter  Options"),  some  of  the  values
reported by `ACEParameters' may well be *incorrect*.

\beginitems

\>ACEWrite( <i>, <string> ) F
\>ACEWrite( <string> ) F

write <string> to the <i>th or  default  interactive  {\ACE}  process;
<string> must be in exactly the form the  {\ACE}  standalone  expects.
The command is  echoed  via  `Info'  at  `InfoACE'  level  4  (with  a
\lq{}`ToACE> '' prompt); i.e.~do `SetInfoACELevel(4);' to see what  is
transmitted to the {\ACE} binary.

\>ACERead( <i> ) F
\>ACERead() F

read a complete line of {\ACE}  output,  from  the  <i>th  or  default
interactive {\ACE} process, if there is output to be read and  returns
`fail' otherwise. When successful, the line is returned  as  a  string
complete with trailing newline  character.  Please  note  that  it  is
possible to be \lq{}too quick' (i.e.~the return can be  `fail'  purely
because the output from {\ACE} is not there  yet),  but  if  `ACERead'
finds any output at all, it waits for a complete line.

\>ACEReadAll( <i> ) F
\>ACEReadAll() F

read and return as many *complete* lines of {\ACE}  output,  from  the
<i>th or default interactive {\ACE} process, as there are to be  read,
*at the time of the call*, as a list  of  strings  with  the  trailing
newlines removed and returns the empty  list  otherwise.  `ACEReadAll'
also writes each line read via `Info' at `InfoACE' level  3.  Whenever
`ACEReadAll' finds only a partial line,  it  waits  for  the  complete
line, thus increasing the probability that it  has  captured  all  the
output to be had from {\ACE}.

\>ACEReadUntil( <i>, <IsMyLine> ) F
\>ACEReadUntil( <IsMyLine> ) F
\>ACEReadUntil( <i>, <IsMyLine>, <Modify> ) F
\>ACEReadUntil( <IsMyLine>, <Modify> ) F

read complete lines of  {\ACE}  output,  from  the  <i>th  or  default
interactive  {\ACE}  process,  \lq{}chomps'  them  (i.e.~removes   any
trailing newline character), emits them to `Info' at  `InfoACE'  level
3, and applies the function  <Modify>  (where  <Modify>  is  just  the
identity map/function for the first two forms) until  a  \lq{}chomped'
line <line>  for  which  `<IsMyLine>(  <Modify>(<line>)  )'  is  true.
`ACEReadUntil' returns the list  of  <Modify>-ed  \lq{}chomped'  lines
read.

*Notes:* 

When provided by the user, <Modify> should be a function that  accepts
a single string argument.

<IsMyLine> should be a function that is able to accept the  output  of
<Modify> (or take a  single  string  argument  when  <Modify>  is  not
provided) and should return a boolean.

If `<IsMyLine>( <Modify>(<line>) )' is never true, `ACEReadUntil' will
wait indefinitely.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Some Interactive ACE Process Utilities}

\beginitems

\>ACEProcessIndex( <i> ) F
\>ACEProcessIndex() F

With argument <i>, which must be a positive integer, `ACEProcessIndex'
returns <i> if it corresponds to an  active  interactive  process,  or
raises an error. With no  arguments  it  returns  the  default  active
interactive process or returns `fail' and emits a warning  message  to
`Info' at `InfoACE' or `InfoWarning' level 1.

\>ACEProcessIndices() F

returns the list of integer indices of all active  interactive  {\ACE}
processes.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{General and Experimentation ACE Modes}

For our purposes, we define an interactive {\ACE} interface command to
be  an  {\ACE}  mode,  if  it  delivers  an  enumeration  result  (see
Section~"Results messages"). Thus, `ACEStart' (see~"ACEStart"), except
when called with the  argument  0,  and  the  commands  `ACERedo'  and
`ACEContinue' which we describe below are {\ACE} modes; we call  these
\lq{}general' {\ACE} modes. Additionally, there are two other commands
which   deliver   enumeration   results:    `ACEAllEquivPresentations'
(see~"ACEAllEquivPresentations")   and   `ACERandomEquivPresentations'
(see~"ACERandomEquivPresentations");       we        call        these
\lq{}experimentation' {\ACE} modes (they  implement  respectively  the
`aep' and `rep' {\ACE} standalone commands).

*Guru Note:*
The  {\ACE}  standalone  defines  three  modes:  `start',  `redo'  and
`continue',  which  double  as  (\lq{}modal')  command   names   that,
respectively, build an initial coset table, modify an existing  table,
and build on an existing table. Each of  these  commands  delivers  as
their final output, an enumeration result. For the  {\ACE}  interface,
we have generalised the term \lq{}mode' to include  any  command  that
produces enumeration results,  and  ignored  the  semantic  difference
between a \lq{}mode' and a \lq{}modal command'.

After changing any of  {\ACE}'s  parameters,  one  of  three  *general
modes*  is  possible:  one  may  be   able   to   \lq{}continue'   via
`ACEContinue'  (see~"ACEContinue"),  or   \lq{}redo'   via   `ACERedo'
(see~"ACERedo"), or if neither of these is possible one  may  have  to
re-\lq{}start'  the  enumeration  via   `ACEStart'   (see~"ACEStart").
Generally, the appropriate mode is invoked automatically when  options
are changed; so most users should be  able  to  ignore  the  following
three functions.

\beginitems

\>ACEModes( <i> ) F
\>ACEModes() F

for the <i>th (or default) interactive {\ACE} process, return a record
whose fields are the modes `ACEStart',  `ACEContinue'  and  `ACERedo',
and whose values are `true' if the mode is possible  for  the  process
and `false' otherwise.

\>ACEContinue( <i> [:<options>] ) F
\>ACEContinue( [:<options>] ) F

for the <i>th (or  default)  interactive  {\ACE}  process,  apply  any
<options> and then \lq{}continue' the  current  enumeration,  building
upon the existing table. If a previous run stopped without producing a
finite index you can, in principle, change  any  of  the  options  and
continue on. Of course, if you make any changes which  invalidate  the
current table, you won't be allowed to `ACEContinue' and an error will
be raised. However, after `quit'ting the `break'-loop, the interactive
{\ACE} process should normally still be active; after  doing  so,  run
`ACEModes' (see~"ACEModes") to see which of `ACERedo' or `ACEStart' is
possible.

\>ACERedo( <i> [:<options>] ) F
\>ACERedo( [:<options>] ) F

for the <i>th (or  default)  interactive  {\ACE}  process,  apply  any
<options> and then \lq{}redo' the current  enumeration;  any  existing
information in the table is retained, and the enumeration is restarted
from coset 1 (i.e., the subgroup).

*Notes:*

This command is really intended for the case where additional relators
and/or subgroup generators have been introduced.  The  current  table,
which  may  be  incomplete  or  exhibit  a  finite  index,  is   still
\lq{}valid'. However, the  new  data  may  allow  the  enumeration  to
complete, or cause a collapse to  a  smaller  index.  In  some  cases,
`ACERedo' may not be possible and an error will  be  raised;  in  this
case, `quit' the `break'-loop, and try `ACEStart', which will  discard
the current table and re-\lq{}start' the enumeration.

Now we describe the two *experimentation modes*.

\>ACEAllEquivPresentations( <i>, <val> ) F
\>ACEAllEquivPresentations( <val> ) F

for the <i>th (or default) interactive {\ACE} process,  generates  and
tests an enumeration for combinations  of  relator  ordering,  relator
rotations, and relator inversions; <val> is in the integer range 0  to
7.

The argument <val> is considered as a binary number.  Its  three  bits
are treated as flags, and control relator rotations (the  $2^0$  bit),
relator inversions (the $2^1$ bit) and relator  orderings  (the  $2^2$
bit),  respectively;  where  $1$  means  \lq{}active'  and  $0$  means
\lq{}inactive'. (See below for an example).

The `ACEAllEquivPresentations' command first performs  a  \lq{}priming
run' using the options as they stand. In particular,  the  `asis'  and
`messages' options are honoured.

It then turns `asis' on and `messages' off  (i.e.~sets  `messages'  to
0), and generates and tests the  requested  equivalent  presentations.
The maximum and minimum values attained by `m' (the maximum number  of
coset numbers defines at any stage) and `t' (the total number of coset
numbers defined) are tracked, and each  time  a  new  \lq{}record'  is
found, the relators used and the summary result line are printed.  See
Appendix~"The Meanings of ACE's output messages" for a  discussion  of
the statistics  `m'  and  `t'.  To  observe  these  messages  set  the
`InfoLevel' of `InfoACE' to 3.

The order in which the  equivalent  presentations  are  generated  and
tested has no particular significance, but note that the  presentation
as given *after* the initial priming run) is the  *last*  presentation
to be generated and tested, so that  the  group's  relators  are  left
\lq{}unchanged' by running the `ACEAllEquivPresentations' command.

As discussed by Cannon, Dimino, Havas  and  Watson  \cite{CDHW73}  and
Havas and Ramsay \cite{HR99b} such equivalent presentations can  yield
large variations in  the  number  of  coset  numbers  required  in  an
enumeration. For this command, we are interested in this variation.

After  the  final  presentation  is  run,   some   additional   status
information messages are printed to the {\ACE} output:

\beginlist
\item{--}  the number of runs which yielded a finite index; 
\item{--}  the total number of runs (excluding the priming run); and 
\item{--}  the range of values observed for `m' and `t'.
\endlist

As an example (drawn from the discussion in \cite{HR99a}) consider the
enumeration   of   the   $448$   coset   numbers   of   the   subgroup
$\langle  a^2,Ab \rangle$ of the group
$$ (8,7 \mid 2,3) 
    = \langle a,b \mid a^8 = b^7 = (ab)^2 = (Ab)^3 = 1 \rangle. $$
There are $4!=24$  relator  orderings  and  $2^4=16$  combinations  of
relator or inverted relator. Exponents are  taken  into  account  when
rotating relators, so the relators given give rise to 1, 1,  2  and  2
rotations respectively, for a total of $1.1.2.2=4$  combinations.  So,
for  <val>${} = 7$   (resp.~$3$),   $24.16.4=1536$   (resp.~$16.4=64$)
equivalent presentations are tested.

*Notes:*
There is no way to stop the `ACEAllEquivPresentations' command  before
it has completed, other than killing the task. So do a  reality  check
beforehand on the size of the search  space  and  the  time  for  each
enumeration.  If  you  are  interested   in   finding   a   \lq{}good'
enumeration, it can be very helpful, in terms of running time, to  put
a tight limit on the number of coset numbers via the `max' option. You
may also have to set `compaction'  =  $100$  to  prevent  time-wasting
attempts to recover space via compaction. This maximises throughput by
causing the \lq{}bad' enumerations, which  are  in  the  majority,  to
overflow quickly and abort. If  you  wish  to  explore  a  very  large
search-space, consider firing up many copies of {\ACE},  and  starting
each with a \lq{}random' equivalent presentation.  Alternatively,  you
could use the `ACERandomEquivPresentations' command.


\>ACERandomEquivPresentations( <i>, <val> ) F
\>ACERandomEquivPresentations( <val> ) F
\>ACERandomEquivPresentations( <i>, [<val>] ) F
\>ACERandomEquivPresentations( [<val>] ) F
\>ACERandomEquivPresentations( <i>, [<val>, <Npresentations>] ) F
\>ACERandomEquivPresentations( [<val>, <Npresentations>] ) F

for the <i>th (or default) interactive {\ACE} process,  generates  and
tests up to <Npresentations> (or 8,  in  the  first  4  forms)  random
presentations; <val>, an integer in the range 0  to  7,  acts  as  for
`ACEAllEquivPresentations' and <Npresentations>, when given, should be
a positive integer.

The routine first  turns  `asis'  on  and  `messages'  off  (i.e.~sets
`messages' to 0), and then generates and tests the requested number of
random equivalent presentations. For each presentation,  the  relators
used and the  summary  result  line  are  printed.  To  observe  these
messages either set the `InfoLevel' of `InfoACE'  to  at  least  3.

*Notes:*
The relator inversions and rotations are \lq{}genuinely'  random.  The
relator permuting is a little bit of a kludge, with the  \lq{}quality'
of the permutations tending to improve with successive  presentations.
When  the   `ACERandomEquivPresentations'   command   completes,   the
presentation active is the *last* one generated.

*Guru Notes:*
It might appear that neglecting to restore the  original  presentation
is an error. In fact, it is a useful feature! Suppose that  the  space
of equivalent presentations is too  large  to  exhaustively  test.  As
noted in the entry for `ACEAllEquivPresentations',  we  can  start  up
multiple copies of `ACEAllEquivPresentations' at random points in  the
search-space. Manually generating `random' equivalent presentations to
serve   as   starting-points   is   tedious   and   error-prone.   The
`ACERandomEquivPresentations'  command  provides  a  simple  solution;
simply    run    `ACERandomEquivPresentations(<i>,     7);'     before
`ACEAllEquivPresentations(<i>, 7);'.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Interactive Query Functions and an Option Setting Function}

\beginitems

\>ACEGroupGenerators( <i> ) F
\>ACEGroupGenerators() F

return  the  {\GAP}  group  generators,  of  the  <i>th  (or  default)
interactive {\ACE} process. If no generators have been saved  for  the
interactive {\ACE} process, possibly because the process  was  started
via   `ACEStart(0);'   (see~"ACEStart"),   the   {\ACE}   process   is
interrogated,  the  equivalent  in  {\GAP}  is  saved  and   returned.
Essentially,  `ACEGroupGenerators(<i>)',   interrogates   {\ACE}   and
establishes `ACEData.io[<i>].args.fgens', if  necessary,  and  returns
`ACEData.io[<i>].args.fgens'.  As  a  side-effect,  if  any   of   the
remaining       fields       of       `ACEData.io[<i>].args'        or
`ACEData.io[<i>].acegens' are unset, they are  also  set.  Note  that,
{\GAP} provides  `GroupWithGenerators'  (see~"ref:GroupWithGenerators"
in the {\GAP} Reference Manual) to establish a free group on  a  given
set of already-defined generators.

\>ACERelators( <i> ) F
\>ACERelators() F

return the {\GAP} relators, of  the  <i>th  (or  default)  interactive
{\ACE} process. If no relators have been  saved  for  the  interactive
{\ACE}  process,  possibly  because  the  process  was   started   via
`ACEStart(0);' (see~"ACEStart"), the {\ACE} process  is  interrogated,
the  equivalent  in  {\GAP}  is  saved  and   returned.   Essentially,
`ACERelators(<i>)',    interrogates     {\ACE}     and     establishes
`ACEData.io[<i>].args.rels',     if     necessary,     and     returns
`ACEData.io[<i>].args.rels'. As a side-effect, if any of the remaining
fields  of  `ACEData.io[<i>].args'  or  `ACEData.io[<i>].acegens'  are
unset, they are also set.

\>ACESubgroupGenerators( <i> ) F
\>ACESubgroupGenerators() F

return the {\GAP} subgroup  generators,  of  the  <i>th  (or  default)
interactive {\ACE} process. If no subgroup generators have been  saved
for the interactive {\ACE} process, possibly because the  process  was
started via `ACEStart(0);' (see~"ACEStart"),  the  {\ACE}  process  is
interrogated,  the  equivalent  in  {\GAP}  is  saved  and   returned.
Essentially,  `ACESubgroupGenerators(<i>)',  interrogates  {\ACE}  and
establishes `ACEData.io[<i>].args.sgens', if  necessary,  and  returns
`ACEData.io[<i>].args.sgens'.  As  a  side-effect,  if  any   of   the
remaining       fields       of       `ACEData.io[<i>].args'        or
`ACEData.io[<i>].acegens' are unset, they are also set.

\>DisplayACEOptions( <i> ) F
\>DisplayACEOptions() F

display the options of the  <i>th  (or  default)  process  started  by
`ACEStart'. In fact, `DisplayACEOptions(<i>)' is just a pretty-printer
of   the   `ACEData.io[<i>].options'   record.   Use   `GetACEOptions'
(see~"GetACEOptions") in assignments. Please note that no-value {\ACE}
options  will   appear   with   the   assigned   value   `true'   (see
Section~"Interpretation of ACE Options" for how the  {\ACE}  interface
functions interpret such options). Note, however, that any options set
via `ACEWrite' (see~"ACEWrite") will *not* be displayed.

\>GetACEOptions( <i> ) F
\>GetACEOptions() F

return a record of the current  options  of  the  <i>th  (or  default)
process started  by  `ACEStart'.  Please  note  that  no-value  {\ACE}
options  will   appear   with   the   assigned   value   `true'   (see
Section~"Interpretation of ACE Options" for how the  {\ACE}  interface
functions interpret such options). Note, however, that any options set
via `ACEWrite' (see~"ACEWrite") will *not* be included in the returned
record.

\>SetACEOptions( <i> [:<options>] ) F
\>SetACEOptions( [:<options>] ) F

modify the current options of the <i>th (or default)  process  started
by `ACEStart'. Please ensure that the `OptionsStack' is  empty  before
calling `SetACEOptions', otherwise the options already present on  the
`OptionsStack'  will  also  be  \lq{}seen'.  All  interactive   {\ACE}
interface functions that accept options,  actually  call  an  internal
version of `SetACEOptions'; so, it is generally important to keep  the
`OptionsStack' clear while working with {\ACE} interactively.

After  setting  the  options  passed,  the  first  available  mode  of
`ACEContinue'  (see~"ACEContinue"),   `ACERedo'   (see~"ACERedo")   or
`ACEStart' (see~"ACEStart"), is automatically invoked.

Since a user will sometimes have options  in  the  form  of  a  record
(e.g.~via   `GetACEOptions'),   we   provide   a    `PushOptions'-like
alternative to the behind-the-colon syntax for the passing of  options
via `SetACEOptions':

\>SetACEOptions( <i>, <optionsRec>] ) F
\>SetACEOptions( <optionsRec>] ) F

In this form, the record <optionsRec> is used to  update  the  current
options of the <i>th (or default) process started by `ACEStart'.  Note
that since <optionsRec> is a record each field must have  an  assigned
value; in particular, no-value {\ACE} options should be  assigned  the
value `true' (see Section~"Interpretation  of  ACE  Options").  Please
don't mix this form of `SetACEOptions' with the previous form; i.e.~do
*not* pass both a record argument and options, since this will lead to
options appearing in the wrong order; if you want to do this, make two
separate calls to `SetACEOptions', e.g.

\beginexample
gap> SetACEOptions( rec(echo := 2) );
gap> SetACEOptions( : hlt);
\endexample

*Notes:*

When `ACECosetTableFromGensAndRels' enters a  `break'-loop{\undoquotes
\atindex {break-loop} {@`break'-loop}} local versions  of  the  second
form  of  each  of  `DisplayACEOptions'  and  `SetACEOptions'   become
available. (Even though the names are similar and  their  function  is
analogous they are in fact different functions.)

\>ACEParameters( <i> ) F
\>ACEParameters() F

return a record of the current values of the {\ACE} Parameter  Options
(see Section~"ACE  Parameter  Options")  of  the  <i>th  (or  default)
process started by `ACEStart', according to {\ACE}. Please  note  that
some options may be reported with incorrect values if they  have  been
changed  recently  without  following  up  with  one  of   the   modes
`ACEContinue',  `ACERedo'  or  `ACEStart'.   Together   the   commands
`ACEGroupGenerators',   `ACERelators',   `ACESubgroupGenerators'   and
`ACEParameters'  give  the  equivalent  {\GAP}  information  that   is
obtained in {\ACE} with `sr := 1' (see~"Option `sr'"),  which  is  the
\lq{}Run  Parameters'  block  obtained   in   the   messaging   output
(observable when the `InfoLevel' of `InfoACE' is set to at  least  3),
when `messages' (see~"Option `messages'") is set a non-zero value.

*Notes:*
One use for this function might be to determine the  options  required
to replicate a previous run,  but  be  sure  that,  if  this  is  your
purpose, that any recent change in the  parameter  option  values  has
been   followed   by   an   invocation   of   one   of   `ACEContinue'
(see~"ACEContinue"),   `ACERedo'   (see~"ACERedo")    or    `ACEStart'
(see~"ACEStart").

As a side-effect, for  {\ACE}  process  <i>,  any  of  the  fields  of
`ACEData.io[<i>].args' or `ACEData.io[<i>].acegens'  that  are  unset,
are set.

\>ACEVersion( <i> ) F
\>ACEVersion() F

for the <i>th  (or  default)  process  started  by  `ACEStart',  print
version details of  the  {\ACE}  binary  you  are  currently  running,
including what compiler flags were set when the executable was  built;
essentially the information obtained is what is obtained via  {\ACE}'s
`options'  option  (see~"Option   `options'").   A   typical   output,
illustrating the default build, is:

\beginexample
gap> ACEVersion();
#I  ACE 3.000
#I  Executable built:
#I    Sat Feb 27 15:57:59 EST 1999
#I  Level 0 options:
#I    statistics package = on
#I    coinc processing messages = on
#I    dedn processing messages = on
#I  Level 1 options:
#I    workspace multipliers = decimal
#I  Level 2 options:
#I    host info = on
\endexample

*Note:*
Unlike other {\ACE} interface functions, the information obtained  via
`ACEVersion();' is absolutely independent of any enumeration. For this
reason, we make it permissible to run `ACEVersion();' when  there  are
no currently active interactive {\ACE} processes; and, in such a case,
`ACEVersion();' initiates (and closes again) its own stream to  obtain
the information from the {\ACE} binary.

The next two functions of this section are really intended for  {\ACE}
standalone gurus. To fully understand their output you  will  need  to
consult the standalone manual and the C source code.

\>ACEDumpVariables( <i> ) F
\>ACEDumpVariables() F
\>ACEDumpVariables( <i>, [<level>] ) F
\>ACEDumpVariables( [<level>] ) F
\>ACEDumpVariables( <i>, [<level>, <detail>] ) F
\>ACEDumpVariables( [<level>, <detail>] ) F

dump the internal variables  of  {\ACE}  of  the  <i>th  (or  default)
process started by `ACEStart'; <level> should be one of 0,  1,  or  2,
and <detail> should be 0 or 1.

The value of <level> determines which of the three levels of {\ACE} to
dump. (You will need to read the standalone manual to understand  what
Levels 0, 1 and 2 are all about.) The value of <detail> determines the
amount of detail (`<detail> = 0' means less  detail).  The  first  two
forms of `ACEDumpVariables' (with no list argument) selects `<level> =
0, <detail> = 0'. The third and fourth forms  (with  a  list  argument
containing the integer <level>) makes `<detail> = 0'. This command  is
intended for gurus; the source code should be consulted  to  see  what
the output means.

\>ACEDumpStatistics( <i> ) F
\>ACEDumpStatistics() F

dump {\ACE}'s internal statistics accumulated during the  most  recent
enumeration of the <i>th (or default) process started  by  `ACEStart',
provided the {\ACE} binary  was  built  with  the  statistics  package
(which it is by default). Use  `ACEVersion();'  (see~"ACEVersion")  to
check for the inclusion of the statistics package.  See  the  `enum.c'
source file for the meaning of the variables.

\>ACEStyle( <i> ) F
\>ACEStyle() F

returns the current enumeration style as one of  the  strings:  `"C"',
`"Cr"', `"CR"', `"R"', `"R*"', `"Rc"', `"R/C"', or `"R/C (defaulted)"'
(see Section~"Enumeration Style").

\>ACEDisplayCosetTable( <i> ) F
\>ACEDisplayCosetTable() F
\>ACEDisplayCosetTable( <i>, [<val>] ) F
\>ACEDisplayCosetTable( [<val>] ) F
\>ACEDisplayCosetTable( <i>, [<val>, <last>] ) F
\>ACEDisplayCosetTable( [<val>, <last>] ) F
\>ACEDisplayCosetTable( <i>, [<val>, <last>, <by>] ) F
\>ACEDisplayCosetTable( [<val>, <last>, <by>] ) F

compact and display the coset table of the <i>th (or default)  process
started by `ACEStart'; <val> must be an integer, and <last>  and  <by>
must be positive integers. In the first two forms of the command,  the
entire  coset  table   is   displayed,   without   orders   or   coset
representatives. In the third and fourth forms, the absolute value  of
<val> is taken to be the last line of the table to be displayed (and 1
is taken to be the first); in the fifth and sixth forms, `|<val>|'  is
taken to be the first line of the table to be displayed, and <last> is
taken to be the number of the last line to be displayed. In  the  last
two forms, the table is displayed from line `|<val>|' to  line  <last>
in steps of <by>. If <val> is negative, then  the  orders  modulo  the
subgroup (if available) and coset representatives are displayed also.

\>IsCompleteACECosetTable( <i> ) F
\>IsCompleteACECosetTable() F

return, for the <i>th (or  default)  process  started  by  `ACEStart',
`true' if {\ACE}'s current coset table is complete (as  determined  by
the index of the current enumeration), and `false' otherwise.

\>ACECosetRepresentative( <i>, <n> ) F
\>ACECosetRepresentative( <n> ) F

return, for the <i>th (or default) process started by `ACEStart',  the
coset representative of coset <n> of the current coset table  held  by
{\ACE}, where <n> must be a positive integer.

\>ACECosetRepresentatives( <i> ) F
\>ACECosetRepresentatives() F

return, for the <i>th (or default) process started by `ACEStart',  the
list of coset representatives of  the  current  coset  table  held  by
{\ACE}.

\>ACETransversal( <i> ) F
\>ACETransversal() F

return, for the <i>th (or default) process started by `ACEStart',  the
list of coset representatives of  the  current  coset  table  held  by
{\ACE}, if the  current  table  is  complete,  and  `fail'  otherwise.
Essentially, `ACETransversal(<i>) = ACECosetRepresentatives(<i>)'  for
a complete table.

\>ACECycles( <i> ) F
\>ACECycles() F
\>ACEPermutationRepresentation( <i> ) F
\>ACEPermutationRepresentation() F

return, for the <i>th (or default) process started  by  `ACEStart',  a
list of permutations corresponding to the group generators, (i.e., the
permutation representation), if the current coset table held by {\ACE}
is complete or `fail', otherwise. In the event of failure a message is
emitted to `Info' at `InfoACE' or `InfoWarning' level 1.

\>ACETraceWord( <i>, <n>, <word> ) F
\>ACETraceWord( <n>, <word> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', trace <word> through {\ACE}'s  coset  table,  starting  at
coset <n>, and return the final coset number if the  trace  completes,
and `fail' otherwise. In Group  Theory  terms,  if  the  cosets  of  a
subgroup $H$ in a group $G$ are  the  subject  of  interactive  {\ACE}
process <i> and the coset identified by that process  by  the  integer
<n> corresponds to some coset $Hx$, for some $x$ in  $G$,  and  <word>
represents the element $g$ of $G$, then, providing the  current  coset
table is complete enough, `ACETraceWord( <i>, <n>, <word>  )'  returns
the integer identifying the coset $Hxg$.

*Notes:*
You may wish to compact {\ACE}'s coset table first, either  explicitly
via `ACERecover' (see~"ACERecover"), or, implicitly, via any  function
call that invokes {\ACE}'s compaction routine (see~"ACERecover" note).

If you actually wanted {\ACE}'s  coset  representative,  then,  for  a
*compact*   table,   feed   the   output    of    `ACETraceWord'    to
`ACECosetRepresentative' (see~"ACECosetRepresentative").

\>ACEOrders( <i> ) F
\>ACEOrders() F
\>ACEOrders( <i> : suborder := <suborder> ) F
\>ACEOrders(: suborder := <suborder> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', search for coset  numbers  whose  representatives'  orders
(modulo the subgroup) are either  finite,  or,  if  invoked  with  the
`suborder' option,  are  multiples  of  <suborder>,  where  <suborder>
should be a positive integer. `ACEOrders' returns a  (possibly  empty)
list of records, each with fields `coset', `order'  and  `rep',  which
are respectively, the coset number, its order modulo the subgroup, and
a representative for each coset number satisfying the criteria of  the
search. 

*Note:*
You may wish to compact {\ACE}'s coset table first, either  explicitly
via `ACERecover' (see~"ACERecover"), or, implicitly, via any  function
call that invokes {\ACE}'s compaction routine (see~"ACERecover" note).

\>ACEOrder( <i>, <suborder> ) F
\>ACEOrder( <suborder> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', search for coset numbers whose coset representatives  have
order modulo the subgroup a multiple of <suborder>. When <suborder> is
a positive integer, `ACEOrder' returns a record with  fields  `coset',
`order' and `rep', which are respectively, the coset number, its order
modulo the subgroup, and a representative for the first  coset  number
satisfying the criteria of the search, or `fail' if there is  no  such
coset number. The value of <suborder> may also be a negative  integer,
in  which  case,  `ACEOrder(  <i>,  <suborder>  )'  is  equivalent  to
`ACEOrders( <i> : suborder := |<suborder>|)';  or  <suborder>  may  be
zero, in which case, `ACEOrder( <i>, 0 )' is equivalent to `ACEOrders(
<i> )'.

*Note:*
You may wish to compact {\ACE}'s coset table first, either  explicitly
via `ACERecover' (see~"ACERecover"), or, implicitly, via any  function
call that invokes {\ACE}'s compaction routine (see~"ACERecover" note).

\>ACECosetsThatStabiliseSubgroup( <i>, <n> ) F
\>ACECosetsThatStabiliseSubgroup( <n> ) F
\>ACECosetsThatNormaliseSubgroup( <i>, <n> ) F
\>ACECosetsThatNormaliseSubgroup( <n> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', determine non-trivial  (i.e.~other  than  coset  1)  coset
numbers whose representatives stabilise (i.e.~normalise) the subgroup.

\beginlist

\item{--} If <n> $> 0$, the list of the first  <n>  non-trivial  coset
numbers whose representatives normalise the subgroup is returned.

\item{--} If <n> $\< 0$, a list of records  with  fields  `coset'  and
`rep'  which  represent  the  coset  number  and   a   representative,
respectively,  of  the  first  <n>  non-trivial  coset  numbers  whose
representatives normalise the subgroup is returned.

\item{--} If <n> $= 0$, a list of  records  with  fields  `coset'  and
`rep'  which  represent  the  coset  number  and   a   representative,
respectively, of all non-trivial coset numbers  whose  representatives
normalise the subgroup is returned.

\endlist

*Note:*
You may wish to compact {\ACE}'s coset table first, either  explicitly
via `ACERecover' (see~"ACERecover"), or, implicitly, via any  function
call that invokes {\ACE}'s compaction routine (see~"ACERecover" note).

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Interactive Versions of Non-interactive ACE Functions}

\beginitems

\>ACECosetTable( <i> [:<options>] ) F
\>ACECosetTable( [:<options>] ) F

return a coset table  as  a  {\GAP}  object,  in  standard  form  (for
{\GAP}).   These   functions   perform   the    same    function    as
`ACECosetTableFromGensAndRels' and `ACECosetTable' on three arguments,
albeit interactively, on the <i>th (or  default)  process  started  by
`ACEStart'.  If  options  are  passed  then  an  internal  version  of
`ACEModes'  is  run   to   determine   which   of   the   modes   (see
Section~"General  and  Experimentation  ACE   Modes")   `ACEContinue',
`ACERedo' or `ACEStart' is possible; and (an internal version of)  the
first mode of these  that  is  allowed  is  executed,  to  ensure  the
resultant table is correct for the current options.

\>ACEStats( <i> [:<options>] ) F
\>ACEStats( [:<options>] ) F

perform the same function as `ACEStats'  on  three  arguments,  albeit
interactively,  on  the  <i>th  (or  default)   process   started   by
`ACEStart'.  If  options  are  passed  then  an  internal  version  of
`ACEModes'  is  run   to   determine   which   of   the   modes   (see
Section~"General  and  Experimentation  ACE   Modes")   `ACEContinue',
`ACERedo' or `ACEStart' is possible; and (an internal version of)  the
first mode of these  that  is  allowed  is  executed,  to  ensure  the
resultant statistics are correct for the current options.

See Section~"Example of Using ACE Interactively (Using ACEStart)"  for
an example demonstrating both these functions  within  an  interactive
process.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\Section{Steering ACE Interactively}

\beginitems

\>ACERecover( <i> ) F
\>ACERecover() F

invokes on the coset table, of  the  <i>th  (or  default)  interactive
{\ACE} process  started  by  `ACEStart',  the  compaction  routine  to
recover the space used by  the  dead  coset  numbers\index{dead  coset
(number)}. A `CO' message line is printed if any  rows  of  the  coset
table were recovered, and a `co' line if none were. (See Appendix~"The
Meanings  of  ACE's  output  messages"  for  the  meanings  of   these
messages.)

*Note:*
The  compaction  routine  is  called   automatically   when   any   of
`ACEDisplayCosetTable'                   (see~"ACEDisplayCosetTable"),
`ACECosetRepresentative'               (see~"ACECosetRepresentative"),
`ACECosetRepresentatives'             (see~"ACECosetRepresentatives"),
`ACETransversal'          (see~"ACETransversal"),          `ACECycles'
(see~"ACECycles"),                         `ACEStandardCosetNumbering'
(see~"ACEStandardCosetNumbering"),                     `ACECosetTable'
(see~"ACECosetTable")    or    `ACEConjugatesForSubgroupNormalClosure'
(see~"ACEConjugatesForSubgroupNormalClosure"), is invoked.

\>ACEStandardCosetNumbering( <i> ) F
\>ACEStandardCosetNumbering() F

compacts and then standardises the numbering of cosets  in  the  coset
table of the <i>th (or default) interactive {\ACE} process started  by
`ACEStart'.  This  function  does  not  display  the  new  table;  use
`ACEDisplayCosetTable' (see~"ACEDisplayCosetTable") for that. That is,
for a given ordering of the generators in the columns of the table, it
produces a canonic table.  Such  a  table  has  the  property  that  a
row-major scan (i.e.~a scan of the successive rows of  the  *body*  of
the table row by row, from left to right) encounters previously unseen
cosets in numeric order.

*Notes:*
In a canonic  table,  the  coset  representatives  are  ordered  first
according to length and then the lexicographic order  defined  by  the
order the generators and their inverses head the columns.  Note  that,
since {\ACE} avoids having an involutory generator in the first column
when it can, this lexicographic order does not necessarily  correspond
with the order in which the generators were first put to  {\ACE}.  Two
tables are equivalent only if their canonic forms are the same.  Also,
standardising the coset numbering within {\ACE} does *not* affect  the
{\GAP} coset table obtained via `ACECosetTable'.

*Guru Notes:*
In  half  of  the  ten  standard  enumeration   strategies   of   Sims
\cite{Sim94}, the table is standardised repeatedly. This is  expensive
computationally, but can result in fewer cosets being  necessary.  The
effect of doing this can be investigated  in  {\ACE}  by  (repeatedly)
halting  the  enumeration  (by  say,  imposing  timing  restrictions),
standardising the coset numbering, and continuing.

\>ACEAddRelators( <i>, <wordlist> ) F
\>ACEAddRelators( <wordlist> ) F

add, for the <i>th (or default) interactive {\ACE} process started  by
`ACEStart', the words in the list <wordlist> to any  relators  already
present, and automatically invokes  either  `ACERedo'  or  `ACEStart'.
Note that, {\ACE} sorts the resultant relator list, unless the  `asis'
option (see~"Option `asis'") has been set to 1; don't  assume,  unless
`asis = 1', that the new relators have been appended in  user-provided
order to the previously existing relator list.  `ACEAddRelators'  also
returns the new relator list. Use `ACERelators' (see~"ACERelators") to
determine the current relator list.

\>ACEAddSubgroupGenerators( <i>, <wordlist> ) F
\>ACEAddSubgroupGenerators( <wordlist> ) F

add, for the <i>th (or default) interactive {\ACE} process started  by
`ACEStart',  the  words  in  the  list  <wordlist>  to  any   subgroup
generators already present.  The  enumeration  must  be  restarted  or
redone, it cannot be  continued.  add,  for  the  <i>th  (or  default)
interactive {\ACE} process started by `ACEStart',  the  words  in  the
list <wordlist>  to  any  subgroup  generators  already  present,  and
automatically invokes  either  `ACERedo'  or  `ACEStart'.  Note  that,
{\ACE} sorts the resultant subgroup generator list, unless the  `asis'
option (see~"Option `asis'") has been set to 1; don't  assume,  unless
`asis = 1', that the new subgroup generators  have  been  appended  in
user-provided order to  the  previously  existing  subgroup  generator
list.  `ACEAddSubgroupGenerators'  also  returns  the   new   subgroup
generator          list.          Use          `ACESubgroupGenerators'
(see~"ACESubgroupGenerators")  to  determine  the   current   subgroup
generator list.

\>ACEDeleteRelators( <i>, <list> ) F
\>ACEDeleteRelators( <list> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', delete <list> from the current relators, if list is a list
of words in the group generators, or those current relators indexed by
the integers in <list>, if <list> is a list of positive integers,  and
automatically invoke `ACEStart'. `ACEDeleteRelators' also returns  the
new relator list. Use `ACERelators' (see~"ACERelators")  to  determine
the current relator list.

\>ACEDeleteSubgroupGenerators( <i>, <list> ) F
\>ACEDeleteSubgroupGenerators( <list> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', delete <list> from the  current  subgroup  generators,  if
list is a list of words in the  group  generators,  or  those  current
subgroup generators indexed by the integers in <list>, if <list> is  a
list  of  positive  integers,  and  automatically  invoke  `ACEStart'.
`ACEDeleteSubgroupGenerators' also returns the new subgroup  generator
list.  Use  `ACESubgroupGenerators'  (see~"ACESubgroupGenerators")  to
determine the current subgroup generator list.

\>ACECosetCoincidence( <i>, <n> ) F
\>ACECosetCoincidence( <n> ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', return the representative of coset <n>, where <n> must  be
a positive integer, and add  it  to  the  subgroup  generators;  i.e.,
equates  this  coset  with  coset  1,  the  subgroup.   `ACERedo'   is
automatically invoked.

\>ACERandomCoincidences( <i>, <subindex> ) F
\>ACERandomCoincidences( <subindex> ) F
\>ACERandomCoincidences( <i>, [<subindex>] ) F
\>ACERandomCoincidences( [<subindex>] ) F
\>ACERandomCoincidences( <i>, [<subindex>, <attempts>] ) F
\>ACERandomCoincidences( [<subindex>, <attempts>] ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', attempt upto <attempts> (or, in the first four  forms,  8)
times to find nontrivial subgroups with index a multiple of <subindex>
by repeatedly making random coset numbers coincident with coset 1  and
seeing what happens. The starting coset table must be  non-empty,  but
should not be complete. For each attempt,  we  repeatedly  add  random
coset representatives to the subgroup and `redo' the  enumeration.  If
the table becomes too small, the  attempt  is  aborted,  the  original
subgroup generators restored, and another attempt made. If an  attempt
succeeds, then  the  new  set  of  subgroup  generators  is  retained.
`ACERandomCoincidences' returns the list of  new  subgroup  generators
added. Use  `ACESubgroupGenerators'  (see~"ACESubgroupGenerators")  to
determine the current subgroup generator list.

*Notes:* 
`ACERandomCoincidences' may add subgroup generators even if it  failed
to  determine  a  nontrivial  subgroup  with  index  a   multiple   of
<subindex>; in such a case, the original status  may  be  restored  by
applying                                 `ACEDeleteSubgroupGenerators'
(see~"ACEDeleteSubgroupGenerators")  with   the   list   returned   by
`ACERandomCoincidences'.

It  makes  no  sense  to  invoke   `ACERandomCoincidences'   when   an
enumeration has already obtained a finite index (either, <subindex> is
already a divisor of that finite index, or the request is impossible).
Thus an invocation of `ACERandomCoincidences', in  this  case,  is  an
error.

*Guru  Notes:*  A  coset  can  have  many  different  representatives.
Consider              running              `ACEStandardCosetNumbering'
(see~"ACEStandardCosetNumbering") before  `ACERandomCoincidences',  to
canonicise the table and the representatives.

\>ACEConjugatesForSubgroupNormalClosure( <i> ) F
\>ACEConjugatesForSubgroupNormalClosure() F
\>ACEConjugatesForSubgroupNormalClosure( <i> : add ) F
\>ACEConjugatesForSubgroupNormalClosure(: add ) F

for the <i>th (or  default)  interactive  {\ACE}  process  started  by
`ACEStart', tests each conjugate of a subgroup generator  by  a  group
generator for membership of the subgroup, and  returns  the  (possibly
empty) list of conjugates that were determined  to  belong  to  cosets
other than coset 1 (the subgroup);  and,  if  called  with  the  `add'
option, these conjugates are  also  added  to  the  existing  list  of
subgroup generators.

*Notes:* A conjugate of a subgroup generator is tested for  membership
of the subgroup, by checking whether it can be traced from coset 1  to
coset 1  (see  `ACETraceWord':~"ACETraceWord").  For  an  *incomplete*
coset  table,  such  a  trace  may  not  complete,   in   which   case
`ACEConjugatesForSubgroupNormalClosure' may return an empty list  even
though the subgroup is *not* normally closed within the group.

The `add' option does *not* guarantee that the resultant  subgroup  is
normally closed. It is still possible  that  some  conjugates  of  the
newly added subgroup generators will not be elements of the subgroup.

\enditems

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%E
